<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <title>Web Platform Design Principles</title>
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
<style data-fill-with="stylesheet">/******************************************************************************
 *                   Style sheet for the W3C specifications                   *
 *
 * Special classes handled by this style sheet include:
 *
 * Indices
 *   - .toc for the Table of Contents (<ol class="toc">)
 *     + <span class="secno"> for the section numbers
 *   - #toc for the Table of Contents (<nav id="toc">)
 *   - ul.index for Indices (<a href="#ref">term</a><span>, in Â§N.M</span>)
 *   - table.index for Index Tables (e.g. for properties or elements)
 *
 * Structural Markup
 *   - table.data for general data tables
 *     -> use 'scope' attribute, <colgroup>, <thead>, and <tbody> for best results !
 *     -> use <table class='complex data'> for extra-complex tables
 *     -> use <td class='long'> for paragraph-length cell content
 *     -> use <td class='pre'> when manual line breaks/indentation would help readability
 *   - dl.switch for switch statements
 *   - ol.algorithm for algorithms (helps to visualize nesting)
 *   - .figure and .caption (HTML4) and figure and figcaption (HTML5)
 *     -> .sidefigure for right-floated figures
 *   - ins/del
 *
 * Code
 *   - pre and code
 *
 * Special Sections
 *   - .note       for informative notes             (div, p, span, aside, details)
 *   - .example    for informative examples          (div, p, pre, span)
 *   - .issue      for issues                        (div, p, span)
 *   - .assertion  for assertions                    (div, p, span)
 *   - .advisement for loud normative statements     (div, p, strong)
 *   - .annoying-warning for spec obsoletion notices (div, aside, details)
 *
 * Definition Boxes
 *   - pre.def   for WebIDL definitions
 *   - table.def for tables that define other entities (e.g. CSS properties)
 *   - dl.def    for definition lists that define other entitles (e.g. HTML elements)
 *
 * Numbering
 *   - .secno for section numbers in .toc and headings (<span class='secno'>3.2</span>)
 *   - .marker for source-inserted example/figure/issue numbers (<span class='marker'>Issue 4</span>)
 *   - ::before styled for CSS-generated issue/example/figure numbers:
 *     -> Documents wishing to use this only need to add
 *        figcaption::before,
 *        .caption::before { content: "Figure "  counter(figure) " ";  }
 *        .example::before { content: "Example " counter(example) " "; }
 *        .issue::before   { content: "Issue "   counter(issue) " ";   }
 *
 * Header Stuff (ignore, just don't conflict with these classes)
 *   - .head for the header
 *   - .copyright for the copyright
 *
 * Miscellaneous
 *   - .overlarge for things that should be as wide as possible, even if
 *     that overflows the body text area. This can be used on an item or
 *     on its container, depending on the effect desired.
 *     Note that this styling basically doesn't help at all when printing,
 *     since A4 paper isn't much wider than the max-width here.
 *     It's better to design things to fit into a narrower measure if possible.
 *   - js-added ToC jump links (see fixup.js)
 *
 ******************************************************************************/

/* color variables included separately for reliability */

/******************************************************************************/
/*                                   Body                                     */
/******************************************************************************/

	html {
		color: black;
		color: var(--text);
		background-color: white;
		background-color: var(--bg);
	}

	body {
		counter-reset: example figure issue;

		/* Layout */
		max-width: 50em;               /* limit line length to 50em for readability   */
		margin: 0 auto;                /* center text within page                     */
		padding: 1.6em 1.5em 2em 50px; /* assume 16px font size for downlevel clients */
		padding: 1.6em 1.5em 2em calc(26px + 1.5em); /* leave space for status flag     */

		/* Typography */
		line-height: 1.5;
		font-family: sans-serif;
		widows: 2;
		orphans: 2;
		word-wrap: break-word;
		overflow-wrap: break-word;
		hyphens: auto;

		background: transparent top left fixed no-repeat;
		background-size: 25px auto;
	}


/******************************************************************************/
/*                         Front Matter & Navigation                          */
/******************************************************************************/

/** Header ********************************************************************/

	div.head { margin-bottom: 1em }
	div.head hr { border-style: solid; }

	div.head h1 {
		font-weight: bold;
		margin: 0 0 .1em;
		font-size: 220%;
	}

	div.head h2 { margin-bottom: 1.5em;}

/** W3C Logo ******************************************************************/

	.head .logo {
		float: right;
		margin: 0.4rem 0 0.2rem .4rem;
	}

	.head img[src*="logos/W3C"] {
		display: block;
		border: solid #1a5e9a;
		border: solid var(--logo-bg);
		border-width: .65rem .7rem .6rem;
		border-radius: .4rem;
		background: #1a5e9a;
		background: var(--logo-bg);
		color: white;
		color: var(--logo-text);
		font-weight: bold;
	}

	.head a:hover > img[src*="logos/W3C"],
	.head a:focus > img[src*="logos/W3C"] {
		opacity: .8;
	}

	.head a:active > img[src*="logos/W3C"] {
		background: #c00;
		background: var(--logo-active-bg);
		border-color: #c00;
		border-color: var(--logo-active-bg);
	}

	/* see also additional rules in Link Styling section */

/** Copyright *****************************************************************/

	p.copyright,
	p.copyright small { font-size: small }

/** Back to Top / ToC Toggle **************************************************/

	@media print {
		#toc-nav {
			display: none;
		}
	}
	@media not print {
		#toc-nav {
			position: fixed;
			z-index: 2;
			bottom: 0; left: 0;
			margin: 0;
			min-width: 1.33em;
			border-top-right-radius: 2rem;
			box-shadow: 0 0 2px;
			font-size: 1.5em;
		}
		#toc-nav > a {
			display: block;
			white-space: nowrap;

			height: 1.33em;
			padding: .1em 0.3em;
			margin: 0;

			box-shadow: 0 0 2px;
			border: none;
			border-top-right-radius: 1.33em;

			color: #707070;
			color: var(--tocnav-normal-text);
			background: white;
			background: var(--tocnav-normal-bg);
		}
		#toc-nav > a:hover,
		#toc-nav > a:focus {
			color: black;
			color: var(--tocnav-hover-text);
			background: #f8f8f8;
			background: var(--tocnav-hover-bg);
		}
		#toc-nav > a:active {
			color: #c00;
			color: var(--tocnav-active-text);
			background: white;
			background: var(--tocnav-active-bg);
		}

		#toc-nav > #toc-jump {
			padding-bottom: 2em;
			margin-bottom: -1.9em;
		}

		/* statusbar gets in the way on keyboard focus; remove once browsers fix */
		#toc-nav > a[href="#toc"]:not(:hover):focus:last-child {
			padding-bottom: 1.5rem;
		}

		#toc-nav:not(:hover) > a:not(:focus) > span + span {
			/* Ideally this uses :focus-within on #toc-nav */
			display: none;
		}
		#toc-nav > a > span + span {
			padding-right: 0.2em;
		}
	}

/** ToC Sidebar ***************************************************************/

	/* Floating sidebar */
	@media screen {
		body.toc-sidebar #toc {
			position: fixed;
			top: 0; bottom: 0;
			left: 0;
			width: 23.5em;
			max-width: 80%;
			max-width: calc(100% - 2em - 26px);
			overflow: auto;
			padding: 0 1em;
			padding-left: 42px;
			padding-left: calc(1em + 26px);
			color: black;
			color: var(--tocsidebar-text);
			background: inherit;
			background-color: #f7f8f9;
			background-color: var(--tocsidebar-bg);
			z-index: 1;
			box-shadow: -.1em 0 .25em rgba(0,0,0,.1) inset;
			box-shadow: -.1em 0 .25em var(--tocsidebar-shadow) inset;
		}
		body.toc-sidebar #toc h2 {
			margin-top: .8rem;
			font-variant: small-caps;
			font-variant: all-small-caps;
			text-transform: lowercase;
			font-weight: bold;
			color: gray;
			color: hsla(203,20%,40%,.7);
			color: var(--tocsidebar-heading-text);
		}
		body.toc-sidebar #toc-jump:not(:focus) {
			width: 0;
			height: 0;
			padding: 0;
			position: absolute;
			overflow: hidden;
		}
	}
	/* Hide main scroller when only the ToC is visible anyway */
	@media screen and (max-width: 28em) {
		body.toc-sidebar {
			overflow: hidden;
		}
	}

	/* Sidebar with its own space */
	@media screen and (min-width: 78em) {
		body:not(.toc-inline) #toc {
			position: fixed;
			top: 0; bottom: 0;
			left: 0;
			width: 23.5em;
			overflow: auto;
			padding: 0 1em;
			padding-left: 42px;
			padding-left: calc(1em + 26px);
			color: black;
			color: var(--tocsidebar-text);
			background: inherit;
			background-color: #f7f8f9;
			background-color: var(--tocsidebar-bg);
			z-index: 1;
			box-shadow: -.1em 0 .25em rgba(0,0,0,.1) inset;
			box-shadow: -.1em 0 .25em var(--tocsidebar-shadow) inset;
		}
		body:not(.toc-inline) #toc h2 {
			margin-top: .8rem;
			font-variant: small-caps;
			font-variant: all-small-caps;
			text-transform: lowercase;
			font-weight: bold;
			color: gray;
			color: hsla(203,20%,40%,.7);
			color: var(--tocsidebar-heading-text);
		}

		body:not(.toc-inline) {
			padding-left: 29em;
		}
		/* See also Overflow section at the bottom */

		body:not(.toc-inline) #toc-jump:not(:focus) {
			width: 0;
			height: 0;
			padding: 0;
			position: absolute;
			overflow: hidden;
		}
	}
	@media screen and (min-width: 90em) {
		body:not(.toc-inline) {
			margin: 0 4em;
		}
	}

/******************************************************************************/
/*                                Sectioning                                  */
/******************************************************************************/

/** Headings ******************************************************************/

	h1, h2, h3, h4, h5, h6, dt {
		page-break-after: avoid;
		page-break-inside: avoid;
		font: 100% sans-serif;   /* Reset all font styling to clear out UA styles */
		font-family: inherit;    /* Inherit the font family. */
		line-height: 1.2;        /* Keep wrapped headings compact */
		hyphens: manual;         /* Hyphenated headings look weird */
	}

	h2, h3, h4, h5, h6 {
		margin-top: 3rem;
	}

	h1, h2, h3 {
		color: #005A9C;
		color: var(--heading-text);
	}

	h1 { font-size: 170%; }
	h2 { font-size: 140%; }
	h3 { font-size: 120%; }
	h4 { font-weight: bold; }
	h5 { font-style: italic; }
	h6 { font-variant: small-caps; }
	dt { font-weight: bold; }

/** Subheadings ***************************************************************/

	h1 + h2,
	#subtitle {
		/* #subtitle is a subtitle in an H2 under the H1 */
		margin-top: 0;
	}
	h2 + h3,
	h3 + h4,
	h4 + h5,
	h5 + h6 {
		margin-top: 1.2em; /* = 1 x line-height */
	}

/** Section divider ***********************************************************/

	:not(.head) > :not(.head) + hr {
		font-size: 1.5em;
		text-align: center;
		margin: 1em auto;
		height: auto;
		color: black;
		color: var(--hr-text);
		border: transparent solid 0;
		background: transparent;
	}
	:not(.head) > hr::before {
		content: "\2727\2003\2003\2727\2003\2003\2727";
	}

/******************************************************************************/
/*                            Paragraphs and Lists                            */
/******************************************************************************/

	p {
		margin: 1em 0;
	}

	dd > p:first-child,
	li > p:first-child {
		margin-top: 0;
	}

	ul, ol {
		margin-left: 0;
		padding-left: 2em;
	}

	li {
		margin: 0.25em 0 0.5em;
		padding: 0;
	}

	dl dd {
		margin: 0 0 .5em 2em;
	}

	.head dd + dd { /* compact for header */
		margin-top: -.5em;
	}

	/* Style for algorithms */
	ol.algorithm ol:not(.algorithm),
	.algorithm > ol ol:not(.algorithm) {
	 border-left: 0.5em solid #DEF;
	 border-left: 0.5em solid var(--algo-border);
	}

	/* Put nice boxes around each algorithm. */
	[data-algorithm]:not(.heading) {
	  padding: .5em;
	  border: thin solid #ddd;
	  border: thin solid var(--algo-border);
	  border-radius: .5em;
	  margin: .5em calc(-0.5em - 1px);
	}
	[data-algorithm]:not(.heading) > :first-child {
	  margin-top: 0;
	}
	[data-algorithm]:not(.heading) > :last-child {
	  margin-bottom: 0;
	}

	/* Style for switch/case <dl>s */
	dl.switch > dd > ol.only,
	dl.switch > dd > .only > ol {
	 margin-left: 0;
	}
	dl.switch > dd > ol.algorithm,
	dl.switch > dd > .algorithm > ol {
	 margin-left: -2em;
	}
	dl.switch {
	 padding-left: 2em;
	}
	dl.switch > dt {
	 text-indent: -1.5em;
	 margin-top: 1em;
	}
	dl.switch > dt + dt {
	 margin-top: 0;
	}
	dl.switch > dt::before {
	 content: '\21AA';
	 padding: 0 0.5em 0 0;
	 display: inline-block;
	 width: 1em;
	 text-align: right;
	 line-height: 0.5em;
	}

/** Terminology Markup ********************************************************/


/******************************************************************************/
/*                                 Inline Markup                              */
/******************************************************************************/

/** Terminology Markup ********************************************************/
	dfn   { /* Defining instance */
		font-weight: bolder;
	}
	a > i { /* Instance of term */
		font-style: normal;
	}
	dt dfn code, code.idl {
		font-size: medium;
	}
	dfn var {
		font-style: normal;
	}

/** Change Marking ************************************************************/

	del {
		color: red;
		color: var(--del-text);
		background: transparent;
		background: var(--del-bg);
		text-decoration: line-through;
	}
	ins {
		color: #080;
		color: var(--ins-text);
		background: transparent;
		background: var(--ins-bg);
		text-decoration: underline;
	}

/** Miscellaneous improvements to inline formatting ***************************/

	sup {
		vertical-align: super;
		font-size: 80%
	}

/******************************************************************************/
/*                                    Code                                    */
/******************************************************************************/

/** General monospace/pre rules ***********************************************/

	pre, code, samp {
		font-family: Menlo, Consolas, "DejaVu Sans Mono", Monaco, monospace;
		font-size: .9em;
		hyphens: none;
		text-transform: none;
		text-align: left;
		text-align: start;
		font-variant: normal;
		orphans: 3;
		widows: 3;
		page-break-before: avoid;
	}
	pre code,
	code code {
		font-size: 100%;
	}

	pre {
		margin-top: 1em;
		margin-bottom: 1em;
		overflow: auto;
	}

/** Inline Code fragments *****************************************************/

  /* Do something nice. */

/******************************************************************************/
/*                                    Links                                   */
/******************************************************************************/

/** General Hyperlinks ********************************************************/

	/* We hyperlink a lot, so make it less intrusive */
	a[href] {
		color: #034575;
		color: var(--a-normal-text);
		text-decoration: none;
		border-bottom: 1px solid #707070;
		border-bottom: 1px solid var(--a-normal-underline);
		/* Need a bit of extending for it to look okay */
		padding: 0 1px 0;
		margin: 0 -1px 0;
	}
	a:visited {
		color: #034575;
		color: var(--a-visited-text);
		border-bottom-color: #bbb;
		border-bottom-color: var(--a-visited-underline);
	}

	/* Use distinguishing colors when user is interacting with the link */
	a[href]:focus,
	a[href]:hover {
		background: #f8f8f8;
		background: rgba(75%, 75%, 75%, .25);
		background: var(--a-hover-bg);
		border-bottom-width: 3px;
		margin-bottom: -2px;
	}
	a[href]:active {
		color: #c00;
		color: var(--a-active-text);
		border-color: #c00;
		border-color: var(--a-active-underline);
	}

	/* Backout above styling for W3C logo */
	.head .logo,
	.head .logo a {
		border: none;
		text-decoration: none;
		background: transparent;
	}

/******************************************************************************/
/*                                    Images                                  */
/******************************************************************************/

	img {
		border-style: none;
	}

	img, svg {
		/* Intentionally not color-scheme aware. */
		background: white;
	}

	/* For autogen numbers, add
	   .caption::before, figcaption::before { content: "Figure " counter(figure) ". "; }
	*/

	figure, .figure, .sidefigure {
		page-break-inside: avoid;
		text-align: center;
		margin: 2.5em 0;
	}
	.figure img,    .sidefigure img,    figure img,
	.figure object, .sidefigure object, figure object {
		max-width: 100%;
		margin: auto;
		height: auto;
	}
	.figure pre, .sidefigure pre, figure pre {
		text-align: left;
		display: table;
		margin: 1em auto;
	}
	.figure table, figure table {
		margin: auto;
	}
	@media screen and (min-width: 20em) {
		.sidefigure {
			float: right;
			width: 50%;
			margin: 0 0 0.5em 0.5em
		}
	}
	.caption, figcaption, caption {
		font-style: italic;
		font-size: 90%;
	}
	.caption::before, figcaption::before, figcaption > .marker {
		font-weight: bold;
	}
	.caption, figcaption {
		counter-increment: figure;
	}

	/* DL list is indented 2em, but figure inside it is not */
	dd > .figure, dd > figure { margin-left: -2em }

/******************************************************************************/
/*                             Colored Boxes                                  */
/******************************************************************************/

	.issue, .note, .example, .assertion, .advisement, blockquote {
		padding: .5em;
		border: .5em;
		border-left-style: solid;
		page-break-inside: avoid;
	}
	span.issue, span.note {
		padding: .1em .5em .15em;
		border-right-style: solid;
	}

	.issue,
	.note,
	.example,
	.advisement,
	.assertion,
	blockquote {
		margin: 1em auto;
	}
	.note  > p:first-child,
	.issue > p:first-child,
	blockquote > :first-child {
		margin-top: 0;
	}
	blockquote > :last-child {
		margin-bottom: 0;
	}


	.issue::before, .issue > .marker,
	.example::before, .example > .marker,
	.note::before, .note > .marker,
	details.note > summary > .marker {
		text-transform: uppercase;
		padding-right: 1em;
	}

	.example::before, .example > .marker {
		display: block;
		padding-right: 0em;
	}

/** Blockquotes ***************************************************************/

	blockquote {
		border-color: silver;
		border-color: var(--blockquote-border);
		background: transparent;
		background: var(--blockquote-bg);
		color: currentcolor;
		color: var(--blockquote-text);
	}

/** Open issue ****************************************************************/

	.issue {
		border-color: #e05252;
		border-color: var(--issue-border);
		background: #fbe9e9;
		background: var(--issue-bg);
		color: black;
		color: var(--issue-text);
		counter-increment: issue;
		overflow: auto;
	}
	.issue::before, .issue > .marker {
		color: #831616;
		color: var(--issueheading-text);
	}
	/* Add .issue::before { content: "Issue " counter(issue) " "; } for autogen numbers,
	   or use class="marker" to mark up the issue number in source. */

/** Example *******************************************************************/

	.example {
		border-color: #e0cb52;
		border-color: var(--example-border);
		background: #fcfaee;
		background: var(--example-bg);
		color: black;
		color: var(--example-text);
		counter-increment: example;
		overflow: auto;
		clear: both;
	}
	.example::before, .example > .marker {
		color: #574b0f;
		color: var(--exampleheading-text);
	}
	/* Add .example::before { content: "Example " counter(example) " "; } for autogen numbers,
	   or use class="marker" to mark up the example number in source. */

/** Non-normative Note ********************************************************/

	.note {
		border-color: #52e052;
		border-color: var(--note-border);
		background: #e9fbe9;
		background: var(--note-bg);
		color: black;
		color: var(--note-text);
		overflow: auto;
	}

	.note::before, .note > .marker,
	details.note > summary {
		color: hsl(120, 70%, 30%);
		color: var(--noteheading-text);
	}
	/* Add .note::before { content: "Note "; } for autogen label,
	   or use class="marker" to mark up the label in source. */

	details.note[open] > summary {
		border-bottom: 1px silver solid;
		border-bottom: 1px var(--notesummary-underline) solid;
	}

/** Assertion Box *************************************************************/
	/*  for assertions in algorithms */

	.assertion {
		border-color: #AAA;
		border-color: var(--assertion-border);
		background: #EEE;
		background: var(--assertion-bg);
		color: black;
		color: var(--assertion-text);
	}

/** Advisement Box ************************************************************/
	/*  for attention-grabbing normative statements */

	.advisement {
		border-color: orange;
		border-color: var(--advisement-border);
		border-style: none solid;
		background: #fec;
		background: var(--advisement-bg);
		color: black;
		color: var(--advisement-text);
	}
	strong.advisement {
		display: block;
		text-align: center;
	}
	.advisement::before, .advisement > .marker {
		color: #b35f00;
		color: var(--advisementheading-text);
	}

/** Spec Obsoletion Notice ****************************************************/
	/* obnoxious obsoletion notice for older/abandoned specs. */

	details {
		display: block;
	}
	summary {
		font-weight: bolder;
	}

	.annoying-warning:not(details),
	details.annoying-warning:not([open]) > summary,
	details.annoying-warning[open] {
		background: hsla(40,100%,50%,0.95);
		background: var(--warning-bg);
		color: black;
		color: var(--warning-text);
		padding: .75em 1em;
		border: red;
		border: var(--warning-border);
		border-style: solid none;
		box-shadow: 0 2px 8px black;
		text-align: center;
	}
	.annoying-warning :last-child {
		margin-bottom: 0;
	}

	@media not print {
		details.annoying-warning[open] {
			position: fixed;
			left: 0;
			right: 0;
			bottom: 2em;
			z-index: 1000;
		}
	}

	details.annoying-warning:not([open]) > summary {
		text-align: center;
	}

/** Entity Definition Boxes ***************************************************/

	.def {
		padding: .5em 1em;
		background: #def;
		background: var(--def-bg);
		margin: 1.2em 0;
		border-left: 0.5em solid #8ccbf2;
		border-left: 0.5em solid var(--def-border);
		color: black;
		color: var(--def-text);
	}

/******************************************************************************/
/*                                    Tables                                  */
/******************************************************************************/

	th, td {
		text-align: left;
		text-align: start;
	}

/** Property/Descriptor Definition Tables *************************************/

	table.def {
		/* inherits .def box styling, see above */
		width: 100%;
		border-spacing: 0;
	}

	table.def td,
	table.def th {
		padding: 0.5em;
		vertical-align: baseline;
		border-bottom: 1px solid #bbd7e9;
		border-bottom: 1px solid var(--defrow-border);
	}

	table.def > tbody > tr:last-child th,
	table.def > tbody > tr:last-child td {
		border-bottom: 0;
	}

	table.def th {
		font-style: italic;
		font-weight: normal;
		padding-left: 1em;
		width: 3em;
	}

	/* For when values are extra-complex and need formatting for readability */
	table td.pre {
		white-space: pre-wrap;
	}

	/* A footnote at the bottom of a def table */
	table.def td.footnote {
		padding-top: 0.6em;
	}
	table.def td.footnote::before {
		content: " ";
		display: block;
		height: 0.6em;
		width: 4em;
		border-top: thin solid;
	}

/** Data tables (and properly marked-up index tables) *************************/
	/*
		 <table class="data"> highlights structural relationships in a table
		 when correct markup is used (e.g. thead/tbody, th vs. td, scope attribute)

		 Use class="complex data" for particularly complicated tables --
		 (This will draw more lines: busier, but clearer.)

		 Use class="long" on table cells with paragraph-like contents
		 (This will adjust text alignment accordingly.)
		 Alternately use class="longlastcol" on tables, to have the last column assume "long".
	*/

	table {
		word-wrap: normal;
		overflow-wrap: normal;
		hyphens: manual;
	}

	table.data,
	table.index {
		margin: 1em auto;
		border-collapse: collapse;
		border: hidden;
		width: 100%;
	}
	table.data caption,
	table.index caption {
		max-width: 50em;
		margin: 0 auto 1em;
	}

	table.data td,  table.data th,
	table.index td, table.index th {
		padding: 0.5em 1em;
		border-width: 1px;
		border-color: silver;
		border-color: var(--datacell-border);
		border-top-style: solid;
	}

	table.data thead td:empty {
		padding: 0;
		border: 0;
	}

	table.data  thead,
	table.index thead,
	table.data  tbody,
	table.index tbody {
		border-bottom: 2px solid;
	}

	table.data colgroup,
	table.index colgroup {
		border-left: 2px solid;
	}

	table.data  tbody th:first-child,
	table.index tbody th:first-child  {
		border-right: 2px solid;
		border-top: 1px solid silver;
		border-top: 1px solid var(--datacell-border);
		padding-right: 1em;
	}

	table.data th[colspan],
	table.data td[colspan] {
		text-align: center;
	}

	table.complex.data th,
	table.complex.data td {
		border: 1px solid silver;
		border: 1px solid var(--datacell-border);
		text-align: center;
	}

	table.data.longlastcol td:last-child,
	table.data td.long {
		vertical-align: baseline;
		text-align: left;
	}

	table.data img {
		vertical-align: middle;
	}


/*
Alternate table alignment rules

	table.data,
	table.index {
		text-align: center;
	}

	table.data  thead th[scope="row"],
	table.index thead th[scope="row"] {
		text-align: right;
	}

	table.data  tbody th:first-child,
	table.index tbody th:first-child  {
		text-align: right;
	}

Possible extra rowspan handling

	table.data  tbody th[rowspan]:not([rowspan='1']),
	table.index tbody th[rowspan]:not([rowspan='1']),
	table.data  tbody td[rowspan]:not([rowspan='1']),
	table.index tbody td[rowspan]:not([rowspan='1']) {
		border-left: 1px solid silver;
	}

	table.data  tbody th[rowspan]:first-child,
	table.index tbody th[rowspan]:first-child,
	table.data  tbody td[rowspan]:first-child,
	table.index tbody td[rowspan]:first-child{
		border-left: 0;
		border-right: 1px solid silver;
	}
*/

/******************************************************************************/
/*                                  Indices                                   */
/******************************************************************************/


/** Table of Contents *********************************************************/

	.toc a {
		/* More spacing; use padding to make it part of the click target. */
		padding-top: 0.1rem;
		/* Larger, more consistently-sized click target */
		display: block;
		/* Reverse color scheme */
		color: black;
		color: var(--toclink-text);
		border-color: #3980b5;
		border-color: var(--toclink-underline);
	}
	.toc a:visited {
		color: black;
		color: var(--toclink-visited-text);
		border-color: #054572;
		border-color: var(--toclink-visited-underline);
	}
	.toc a:not(:focus):not(:hover) {
		/* Allow colors to cascade through from link styling */
		border-bottom-color: transparent;
	}

	.toc, .toc ol, .toc ul, .toc li {
		list-style: none; /* Numbers must be inlined into source */
		/* because generated content isn't search/selectable and markers can't do multilevel yet */
		margin:  0;
		padding: 0;
		line-height: 1.1rem; /* consistent spacing */
	}

	/* ToC not indented until third level, but font style & margins show hierarchy */
	.toc > li             { font-weight: bold;   }
	.toc > li li          { font-weight: normal; }
	.toc > li li li       { font-size:   95%;    }
	.toc > li li li li    { font-size:   90%;    }
	.toc > li li li li .secno { font-size: 85%; }
	.toc > li li li li li { font-size:   85%;    }
	.toc > li li li li li .secno { font-size: 100%; }

	/* @supports not (display:grid) { */
		.toc > li             { margin: 1.5rem 0;    }
		.toc > li li          { margin: 0.3rem 0;    }
		.toc > li li li       { margin-left: 2rem;   }

		/* Section numbers in a column of their own */
		.toc .secno {
			float: left;
			width: 4rem;
			white-space: nowrap;
		}

		.toc li {
			clear: both;
		}

		:not(li) > .toc              { margin-left:  5rem; }
		.toc .secno                  { margin-left: -5rem; }
		.toc > li li li .secno       { margin-left: -7rem; }
		.toc > li li li li .secno    { margin-left: -9rem; }
		.toc > li li li li li .secno { margin-left: -11rem; }

		/* Tighten up indentation in narrow ToCs */
		@media (max-width: 30em) {
			:not(li) > .toc              { margin-left:  4rem; }
			.toc .secno                  { margin-left: -4rem; }
			.toc > li li li              { margin-left:  1rem; }
			.toc > li li li .secno       { margin-left: -5rem; }
			.toc > li li li li .secno    { margin-left: -6rem; }
			.toc > li li li li li .secno { margin-left: -7rem; }
		}
		/* Loosen it on wide screens */
		@media screen and (min-width: 78em) {
			body:not(.toc-inline) :not(li) > .toc              { margin-left:  4rem; }
			body:not(.toc-inline) .toc .secno                  { margin-left: -4rem; }
			body:not(.toc-inline) .toc > li li li              { margin-left:  1rem; }
			body:not(.toc-inline) .toc > li li li .secno       { margin-left: -5rem; }
			body:not(.toc-inline) .toc > li li li li .secno    { margin-left: -6rem; }
			body:not(.toc-inline) .toc > li li li li li .secno { margin-left: -7rem; }
	}
	/* } */

	@supports (display:grid) and (display:contents) {
		/* Use #toc over .toc to override non-@supports rules. */
		#toc {
			display: grid;
			align-content: start;
			grid-template-columns: auto 1fr;
			grid-column-gap: 1rem;
			column-gap: 1rem;
			grid-row-gap: .6rem;
			row-gap: .6rem;
		}
		#toc h2 {
			grid-column: 1 / -1;
			margin-bottom: 0;
		}
		#toc ol,
		#toc li,
		#toc a {
			display: contents;
			/* Switch <a> to subgrid when supported */
		}
		#toc span {
			margin: 0;
		}
		#toc > .toc > li > a > span {
			/* The spans of the top-level list,
			   comprising the first items of each top-level section. */
			margin-top: 1.1rem;
		}
		#toc#toc .secno { /* Ugh, need more specificity to override base.css */
			grid-column: 1;
			width: auto;
			margin-left: 0;
		}
		#toc .content {
			grid-column: 2;
			width: auto;
			margin-right: 1rem;
		}
		#toc .content:hover,
		#toc .content:focus {
			background: rgba(75%, 75%, 75%, .25);
			background: var(--a-hover-bg);
			border-bottom: 3px solid #054572;
			border-bottom: 3px solid var(--toclink-underline);
			margin-bottom: -3px;
		}
		#toc li li li .content {
			margin-left: 1rem;
		}
		#toc li li li li .content {
			margin-left: 2rem;
		}
	}


/** Index *********************************************************************/

	/* Index Lists: Layout */
	ul.index       { margin-left: 0; columns: 15em; text-indent: 1em hanging; }
	ul.index li    { margin-left: 0; list-style: none; break-inside: avoid; }
	ul.index li li { margin-left: 1em }
	ul.index dl    { margin-top: 0; }
	ul.index dt    { margin: .2em 0 .2em 20px;}
	ul.index dd    { margin: .2em 0 .2em 40px;}
	/* Index Lists: Typography */
	ul.index ul,
	ul.index dl { font-size: smaller; }
	@media not print {
		ul.index li span {
			white-space: nowrap;
			color: transparent; }
		ul.index li a:hover + span,
		ul.index li a:focus + span {
			color: #707070;
			color: var(--indexinfo-text);
		}
	}

/** Index Tables *****************************************************/
	/* See also the data table styling section, which this effectively subclasses */

	table.index {
		font-size: small;
		border-collapse: collapse;
		border-spacing: 0;
		text-align: left;
		margin: 1em 0;
	}

	table.index td,
	table.index th {
		padding: 0.4em;
	}

	table.index tr:hover td:not([rowspan]),
	table.index tr:hover th:not([rowspan]) {
		color: black;
		color: var(--indextable-hover-text);
		background: #f7f8f9;
		background: var(--indextable-hover-bg);
	}

	/* The link in the first column in the property table (formerly a TD) */
	table.index th:first-child a {
		font-weight: bold;
	}

/******************************************************************************/
/*                                    Print                                   */
/******************************************************************************/

	@media print {
		/* Pages have their own margins. */
		html {
			margin: 0;
		}
		/* Serif for print. */
		body {
			font-family: serif;
		}
	}
	@page {
		margin: 1.5cm 1.1cm;
	}



/******************************************************************************/
/*                             Overflow Control                               */
/******************************************************************************/

	.figure .caption, .sidefigure .caption, figcaption {
		/* in case figure is overlarge, limit caption to 50em */
		max-width: 50rem;
		margin-left: auto;
		margin-right: auto;
	}
	.overlarge {
		/* Magic to create good table positioning:
		   "content column" is 50ems wide at max; less on smaller screens.
		   Extra space (after ToC + content) is empty on the right.

		   1. When table < content column, centers table in column.
		   2. When content < table < available, left-aligns.
		   3. When table > available, fills available + scroll bar.
		*/
		display: grid;
		grid-template-columns: minmax(0, 50em);
	}
	.overlarge > table {
		/* limit preferred width of table */
		max-width: 50em;
		margin-left: auto;
		margin-right: auto;
	}

	@media (min-width: 55em) {
		.overlarge {
			margin-right: calc(13px + 26.5rem - 50vw);
			max-width: none;
		}
	}
	@media screen and (min-width: 78em) {
		body:not(.toc-inline) .overlarge {
			/* 30.5em body padding 50em content area */
			margin-right: calc(40em - 50vw) !important;
		}
	}
	@media screen and (min-width: 90em) {
		body:not(.toc-inline) .overlarge {
			/* 4em html margin 30.5em body padding 50em content area */
			margin-right: calc(84.5em - 100vw) !important;
		}
	}

	@media not print {
		.overlarge {
			overflow-x: auto;
			/* See Lea Verou's explanation background-attachment:
			 * http://lea.verou.me/2012/04/background-attachment-local/
			 *
			background: top left  / 4em 100% linear-gradient(to right,  #ffffff, rgba(255, 255, 255, 0)) local,
			            top right / 4em 100% linear-gradient(to left, #ffffff, rgba(255, 255, 255, 0)) local,
			            top left  / 1em 100% linear-gradient(to right,  #c3c3c5, rgba(195, 195, 197, 0)) scroll,
			            top right / 1em 100% linear-gradient(to left, #c3c3c5, rgba(195, 195, 197, 0)) scroll,
			            white;
			background-repeat: no-repeat;
			*/
		}
	}
</style>
  <meta content="Bikeshed version f9f60c8f, updated Fri Sep 25 16:39:03 2020 -0700" name="generator">
  <link href="https://w3ctag.github.io/design-principles/" rel="canonical">
  <meta content="0b4600aba241a552fd15064ee02ee64ef6efcb52" name="document-revision">
<style>
    table.data {
        text-align: left;
        font-size: small;
    }
</style>
<style>/* style-autolinks */

.css.css, .property.property, .descriptor.descriptor {
    color: var(--a-normal-text);
    font-size: inherit;
    font-family: inherit;
}
.css::before, .property::before, .descriptor::before {
    content: "â";
}
.css::after, .property::after, .descriptor::after {
    content: "â";
}
.property, .descriptor {
    /* Don't wrap property and descriptor names */
    white-space: nowrap;
}
.type { /* CSS value <type> */
    font-style: italic;
}
pre .property::before, pre .property::after {
    content: "";
}
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {
    content: "â";
}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {
    content: "â";
}

[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after {
    content: "";
}

[data-link-type=element],
[data-link-type=element-attr] {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
    font-size: .9em;
}
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after  { content: ">" }

[data-link-type=biblio] {
    white-space: pre;
}</style>
<style>/* style-colors */

/* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
html {
    color: black;
    color: var(--text);
    background-color: white;
    background-color: var(--bg);
}
:root {
    color-scheme: light dark;

    --text: black;
    --bg: white;

    --logo-bg: #1a5e9a;
    --logo-active-bg: #c00;
    --logo-text: white;

    --tocnav-normal-text: #707070;
    --tocnav-normal-bg: var(--bg);
    --tocnav-hover-text: var(--tocnav-normal-text);
    --tocnav-hover-bg: #f8f8f8;
    --tocnav-active-text: #c00;
    --tocnav-active-bg: var(--tocnav-normal-bg);

    --tocsidebar-text: var(--text);
    --tocsidebar-bg: #f7f8f9;
    --tocsidebar-shadow: rgba(0,0,0,.1);
    --tocsidebar-heading-text: hsla(203,20%,40%,.7);

    --toclink-text: var(--text);
    --toclink-underline: #3980b5;
    --toclink-visited-text: var(--toclink-text);
    --toclink-visited-underline: #054572;

    --heading-text: #005a9c;

    --hr-text: var(--text);

    --algo-border: #def;

    --del-text: red;
    --del-bg: transparent;
    --ins-text: #080;
    --ins-bg: transparent;

    --a-normal-text: #034575;
    --a-normal-underline: #707070;
    --a-visited-text: var(--a-normal-text);
    --a-visited-underline: #bbb;
    --a-hover-bg: rgba(75%, 75%, 75%, .25);
    --a-active-text: #c00;
    --a-active-underline: #c00;

    --blockquote-border: silver;
    --blockquote-bg: transparent;
    --blockquote-text: currentcolor;

    --issue-border: #e05252;
    --issue-bg: #fbe9e9;
    --issue-text: var(--text);
    --issueheading-text: #831616;

    --example-border: #e0cb52;
    --example-bg: #fcfaee;
    --example-text: var(--text);
    --exampleheading-text: #574b0f;

    --note-border: #52e052;
    --note-bg: #e9fbe9;
    --note-text: var(--text);
    --noteheading-text: hsl(120, 70%, 30%);
    --notesummary-underline: silver;

    --assertion-border: #aaa;
    --assertion-bg: #eee;
    --assertion-text: black;

    --advisement-border: orange;
    --advisement-bg: #fec;
    --advisement-text: var(--text);
    --advisementheading-text: #b35f00;

    --warning-border: red;
    --warning-bg: hsla(40,100%,50%,0.95);
    --warning-text: var(--text);

    --def-border: #8ccbf2;
    --def-bg: #def;
    --def-text: var(--text);
    --defrow-border: #bbd7e9;

    --datacell-border: silver;

    --indexinfo-text: #707070;

    --indextable-hover-text: black;
    --indextable-hover-bg: #f7f8f9;

    --outdatedspec-bg: rgba(0, 0, 0, .5);
    --outdatedspec-text: black;
    --outdated-bg: maroon;
    --outdated-text: white;
    --outdated-shadow: red;

    --editedrec-bg: darkorange;
}</style>
<style>/* style-counters */

body {
    counter-reset: example figure issue;
}
.issue {
    counter-increment: issue;
}
.issue:not(.no-marker)::before {
    content: "Issue " counter(issue);
}

.example {
    counter-increment: example;
}
.example:not(.no-marker)::before {
    content: "Example " counter(example);
}
.invalid.example:not(.no-marker)::before,
.illegal.example:not(.no-marker)::before {
    content: "Invalid Example" counter(example);
}

figcaption {
    counter-increment: figure;
}
figcaption:not(.no-marker)::before {
    content: "Figure " counter(figure) " ";
}</style>
<style>/* style-dfn-panel */

:root {
    --dfnpanel-bg: #ddd;
    --dfnpanel-text: var(--text);
}
.dfn-panel {
    position: absolute;
    z-index: 35;
    height: auto;
    width: -webkit-fit-content;
    width: fit-content;
    max-width: 300px;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.75em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--dfnpanel-bg);
    color: var(--dfnpanel-text);
    border: outset 0.2em;
}
.dfn-panel:not(.on) { display: none; }
.dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
.dfn-panel > b { display: block; }
.dfn-panel a { color: black; }
.dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
.dfn-panel > b + b { margin-top: 0.25em; }
.dfn-panel ul { padding: 0; }
.dfn-panel li { list-style: inside; }
.dfn-panel.activated {
    display: inline-block;
    position: fixed;
    left: .5em;
    bottom: 2em;
    margin: 0 auto;
    max-width: calc(100vw - 1.5em - .4em - .5em);
    max-height: 30vh;
}

.dfn-paneled { cursor: pointer; }
</style>
<style>/* style-md-lists */

/* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
[data-md] > :first-child {
    margin-top: 0;
}
[data-md] > :last-child {
    margin-bottom: 0;
}</style>
<style>/* style-selflinks */

:root {
    --selflink-text: white;
    --selflink-bg: gray;
    --selflink-hover-text: black;
}
.heading, .issue, .note, .example, li, dt {
    position: relative;
}
a.self-link {
    position: absolute;
    top: 0;
    left: calc(-1 * (3.5rem - 26px));
    width: calc(3.5rem - 26px);
    height: 2em;
    text-align: center;
    border: none;
    transition: opacity .2s;
    opacity: .5;
}
a.self-link:hover {
    opacity: 1;
}
.heading > a.self-link {
    font-size: 83%;
}
li > a.self-link {
    left: calc(-1 * (3.5rem - 26px) - 2em);
}
dfn > a.self-link {
    top: auto;
    left: auto;
    opacity: 0;
    width: 1.5em;
    height: 1.5em;
    background: var(--selflink-bg);
    color: var(--selflink-text);
    font-style: normal;
    transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
    opacity: 1;
}
dfn > a.self-link:hover {
    color: var(--selflink-hover-text);
}

a.self-link::before            { content: "Â¶"; }
.heading > a.self-link::before { content: "Â§"; }
dfn > a.self-link::before      { content: "#"; }
</style>
<style>/* style-syntax-highlighting */

code.highlight { padding: .1em; border-radius: .3em; }
pre.highlight, pre > code.highlight { display: block; padding: 1em; margin: .5em 0; overflow: auto; border-radius: 0; }

.highlight:not(.idl) { background: #fdf6e3; }
c-[a] { color: #990055 } /* Keyword.Declaration */
c-[b] { color: #990055 } /* Keyword.Type */
c-[c] { color: #708090 } /* Comment */
c-[d] { color: #708090 } /* Comment.Multiline */
c-[e] { color: #0077aa } /* Name.Attribute */
c-[f] { color: #669900 } /* Name.Tag */
c-[g] { color: #222222 } /* Name.Variable */
c-[k] { color: #990055 } /* Keyword */
c-[l] { color: #000000 } /* Literal */
c-[m] { color: #000000 } /* Literal.Number */
c-[n] { color: #0077aa } /* Name */
c-[o] { color: #999999 } /* Operator */
c-[p] { color: #999999 } /* Punctuation */
c-[s] { color: #a67f59 } /* Literal.String */
c-[t] { color: #a67f59 } /* Literal.String.Single */
c-[u] { color: #a67f59 } /* Literal.String.Double */
c-[cp] { color: #708090 } /* Comment.Preproc */
c-[c1] { color: #708090 } /* Comment.Single */
c-[cs] { color: #708090 } /* Comment.Special */
c-[kc] { color: #990055 } /* Keyword.Constant */
c-[kn] { color: #990055 } /* Keyword.Namespace */
c-[kp] { color: #990055 } /* Keyword.Pseudo */
c-[kr] { color: #990055 } /* Keyword.Reserved */
c-[ld] { color: #000000 } /* Literal.Date */
c-[nc] { color: #0077aa } /* Name.Class */
c-[no] { color: #0077aa } /* Name.Constant */
c-[nd] { color: #0077aa } /* Name.Decorator */
c-[ni] { color: #0077aa } /* Name.Entity */
c-[ne] { color: #0077aa } /* Name.Exception */
c-[nf] { color: #0077aa } /* Name.Function */
c-[nl] { color: #0077aa } /* Name.Label */
c-[nn] { color: #0077aa } /* Name.Namespace */
c-[py] { color: #0077aa } /* Name.Property */
c-[ow] { color: #999999 } /* Operator.Word */
c-[mb] { color: #000000 } /* Literal.Number.Bin */
c-[mf] { color: #000000 } /* Literal.Number.Float */
c-[mh] { color: #000000 } /* Literal.Number.Hex */
c-[mi] { color: #000000 } /* Literal.Number.Integer */
c-[mo] { color: #000000 } /* Literal.Number.Oct */
c-[sb] { color: #a67f59 } /* Literal.String.Backtick */
c-[sc] { color: #a67f59 } /* Literal.String.Char */
c-[sd] { color: #a67f59 } /* Literal.String.Doc */
c-[se] { color: #a67f59 } /* Literal.String.Escape */
c-[sh] { color: #a67f59 } /* Literal.String.Heredoc */
c-[si] { color: #a67f59 } /* Literal.String.Interpol */
c-[sx] { color: #a67f59 } /* Literal.String.Other */
c-[sr] { color: #a67f59 } /* Literal.String.Regex */
c-[ss] { color: #a67f59 } /* Literal.String.Symbol */
c-[vc] { color: #0077aa } /* Name.Variable.Class */
c-[vg] { color: #0077aa } /* Name.Variable.Global */
c-[vi] { color: #0077aa } /* Name.Variable.Instance */
c-[il] { color: #000000 } /* Literal.Number.Integer.Long */
</style>
<style>/* style-darkmode */

@media (prefers-color-scheme: dark) {
    :root {
        --text: #ddd;
        --bg: black;

        --logo-bg: #1a5e9a;
        --logo-active-bg: #c00;
        --logo-text: white;

        --tocnav-normal-text: #999;
        --tocnav-normal-bg: var(--bg);
        --tocnav-hover-text: var(--tocnav-normal-text);
        --tocnav-hover-bg: #080808;
        --tocnav-active-text: #f44;
        --tocnav-active-bg: var(--tocnav-normal-bg);

        --tocsidebar-text: var(--text);
        --tocsidebar-bg: #080808;
        --tocsidebar-shadow: rgba(255,255,255,.1);
        --tocsidebar-heading-text: hsla(203,20%,40%,.7);

        --toclink-text: var(--text);
        --toclink-underline: #6af;
        --toclink-visited-text: var(--toclink-text);
        --toclink-visited-underline: #054572;

        --heading-text: #8af;

        --hr-text: var(--text);

        --algo-border: #456;

        --del-text: #f44;
        --del-bg: transparent;
        --ins-text: #4a4;
        --ins-bg: transparent;

        --a-normal-text: #6af;
        --a-normal-underline: #555;
        --a-visited-text: var(--a-normal-text);
        --a-visited-underline: var(--a-normal-underline);
        --a-hover-bg: rgba(25%, 25%, 25%, .2);
        --a-active-text: #f44;
        --a-active-underline: var(--a-active-text);

        --borderedblock-bg: rgba(255, 255, 255, .05);

        --blockquote-border: silver;
        --blockquote-bg: var(--borderedblock-bg);
        --blockquote-text: currentcolor;

        --issue-border: #e05252;
        --issue-bg: var(--borderedblock-bg);
        --issue-text: var(--text);
        --issueheading-text: hsl(0deg, 70%, 70%);

        --example-border: hsl(50deg, 90%, 60%);
        --example-bg: var(--borderedblock-bg);
        --example-text: var(--text);
        --exampleheading-text: hsl(50deg, 70%, 70%);

        --note-border: hsl(120deg, 100%, 35%);
        --note-bg: var(--borderedblock-bg);
        --note-text: var(--text);
        --noteheading-text: hsl(120, 70%, 70%);
        --notesummary-underline: silver;

        --assertion-border: #444;
        --assertion-bg: var(--borderedblock-bg);
        --assertion-text: var(--text);

        --advisement-border: orange;
        --advisement-bg: #222218;
        --advisement-text: var(--text);
        --advisementheading-text: #f84;

        --warning-border: red;
        --warning-bg: hsla(40,100%,20%,0.95);
        --warning-text: var(--text);

        --def-border: #8ccbf2;
        --def-bg: #080818;
        --def-text: var(--text);
        --defrow-border: #136;

        --datacell-border: silver;

        --indexinfo-text: #aaa;

        --indextable-hover-text: var(--text);
        --indextable-hover-bg: #181818;

        --outdatedspec-bg: rgba(255, 255, 255, .5);
        --outdatedspec-text: black;
        --outdated-bg: maroon;
        --outdated-text: white;
        --outdated-shadow: red;

        --editedrec-bg: darkorange;
    }
    /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
    img { background: white; }
}
@media (prefers-color-scheme: dark) {
    :root {
        --selflink-text: black;
        --selflink-bg: silver;
        --selflink-hover-text: white;
    }
}

@media (prefers-color-scheme: dark) {
    :root {
        --dfnpanel-bg: #222;
        --dfnpanel-text: var(--text);
    }
}
@media (prefers-color-scheme: dark) {
    .highlight:not(.idl) { background: rgba(255, 255, 255, .05); }

    c-[a] { color: #d33682 } /* Keyword.Declaration */
    c-[b] { color: #d33682 } /* Keyword.Type */
    c-[c] { color: #2aa198 } /* Comment */
    c-[d] { color: #2aa198 } /* Comment.Multiline */
    c-[e] { color: #268bd2 } /* Name.Attribute */
    c-[f] { color: #b58900 } /* Name.Tag */
    c-[g] { color: #cb4b16 } /* Name.Variable */
    c-[k] { color: #d33682 } /* Keyword */
    c-[l] { color: #657b83 } /* Literal */
    c-[m] { color: #657b83 } /* Literal.Number */
    c-[n] { color: #268bd2 } /* Name */
    c-[o] { color: #657b83 } /* Operator */
    c-[p] { color: #657b83 } /* Punctuation */
    c-[s] { color: #6c71c4 } /* Literal.String */
    c-[t] { color: #6c71c4 } /* Literal.String.Single */
    c-[u] { color: #6c71c4 } /* Literal.String.Double */
    c-[ch] { color: #2aa198 } /* Comment.Hashbang */
    c-[cp] { color: #2aa198 } /* Comment.Preproc */
    c-[cpf] { color: #2aa198 } /* Comment.PreprocFile */
    c-[c1] { color: #2aa198 } /* Comment.Single */
    c-[cs] { color: #2aa198 } /* Comment.Special */
    c-[kc] { color: #d33682 } /* Keyword.Constant */
    c-[kn] { color: #d33682 } /* Keyword.Namespace */
    c-[kp] { color: #d33682 } /* Keyword.Pseudo */
    c-[kr] { color: #d33682 } /* Keyword.Reserved */
    c-[ld] { color: #657b83 } /* Literal.Date */
    c-[nc] { color: #268bd2 } /* Name.Class */
    c-[no] { color: #268bd2 } /* Name.Constant */
    c-[nd] { color: #268bd2 } /* Name.Decorator */
    c-[ni] { color: #268bd2 } /* Name.Entity */
    c-[ne] { color: #268bd2 } /* Name.Exception */
    c-[nf] { color: #268bd2 } /* Name.Function */
    c-[nl] { color: #268bd2 } /* Name.Label */
    c-[nn] { color: #268bd2 } /* Name.Namespace */
    c-[py] { color: #268bd2 } /* Name.Property */
    c-[ow] { color: #657b83 } /* Operator.Word */
    c-[mb] { color: #657b83 } /* Literal.Number.Bin */
    c-[mf] { color: #657b83 } /* Literal.Number.Float */
    c-[mh] { color: #657b83 } /* Literal.Number.Hex */
    c-[mi] { color: #657b83 } /* Literal.Number.Integer */
    c-[mo] { color: #657b83 } /* Literal.Number.Oct */
    c-[sa] { color: #6c71c4 } /* Literal.String.Affix */
    c-[sb] { color: #6c71c4 } /* Literal.String.Backtick */
    c-[sc] { color: #6c71c4 } /* Literal.String.Char */
    c-[dl] { color: #6c71c4 } /* Literal.String.Delimiter */
    c-[sd] { color: #6c71c4 } /* Literal.String.Doc */
    c-[se] { color: #6c71c4 } /* Literal.String.Escape */
    c-[sh] { color: #6c71c4 } /* Literal.String.Heredoc */
    c-[si] { color: #6c71c4 } /* Literal.String.Interpol */
    c-[sx] { color: #6c71c4 } /* Literal.String.Other */
    c-[sr] { color: #6c71c4 } /* Literal.String.Regex */
    c-[ss] { color: #6c71c4 } /* Literal.String.Symbol */
    c-[fm] { color: #268bd2 } /* Name.Function.Magic */
    c-[vc] { color: #cb4b16 } /* Name.Variable.Class */
    c-[vg] { color: #cb4b16 } /* Name.Variable.Global */
    c-[vi] { color: #cb4b16 } /* Name.Variable.Instance */
    c-[vm] { color: #cb4b16 } /* Name.Variable.Magic */
    c-[il] { color: #657b83 } /* Literal.Number.Integer.Long */
}
</style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"></p>
   <h1 class="p-name no-ref" id="title">Web Platform Design Principles</h1>
   <h2 class="no-num no-toc no-ref heading settled" id="subtitle"><span class="content">Editorâs Draft, <time class="dt-updated" datetime="2020-10-07">7 October 2020</time></span></h2>
   <div data-fill-with="spec-metadata">
    <dl>
     <dt>This version:
     <dd><a class="u-url" href="https://w3ctag.github.io/design-principles/">https://w3ctag.github.io/design-principles/</a>
     <dt class="editor">Editor:
     <dd class="editor p-author h-card vcard"><a class="p-name fn u-url url" href="https://sangwhan.com">Sangwhan Moon</a> (<span class="p-org org">Invited Expert</span>)
     <dt class="editor">Former Editors:
     <dd class="editor p-author h-card vcard"><a class="p-name fn u-url url" href="https://domenic.me/">Domenic Denicola</a> (<a class="p-org org" href="https://www.google.com/">Google</a>) <a class="u-email email" href="mailto:d@domenic.me">d@domenic.me</a>
     <dd class="editor p-author h-card vcard"><a class="p-name fn u-email email" href="mailto:travil@microsoft.com">Travis Leithead</a> (<span class="p-org org">Microsoft</span>)
     <dt>By:
     <dd><a href="https://www.w3.org/2001/tag/">Members of the TAG</a>, past and present
     <dt>Participate:
     <dd><a href="https://github.com/w3ctag/design-principles">GitHub w3ctag/design-principles</a> (<a href="https://github.com/w3ctag/design-principles/issues/new">file an issue</a>; <a href="https://github.com/w3ctag/design-principles/issues?state=open">open issues</a>)
     <dd>
    </dl>
   </div>
   <div data-fill-with="warning"></div>
   <p class="copyright" data-fill-with="copyright"><a href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> Â© 2020 <a href="https://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>Â®</sup> (<a href="https://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>, <a href="https://www.ercim.eu/"><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>, <a href="https://www.keio.ac.jp/">Keio</a>, <a href="https://ev.buaa.edu.cn/">Beihang</a>). <abbr title="World Wide Web Consortium">W3C</abbr> <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>, <a href="https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and <a href="https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document" rel="license">permissive document license</a> rules apply. </p>
   <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
   <p>This document contains a set of design principles to be used when designing Web Platform technologies. These principles have been collected during the Technical Architecture Groupâs discussions in <a href="https://github.com/w3ctag/design-reviews/">reviewing</a> developing specifications. We encourage specification designers to read this document and use it as a resource when making design decisions.</p>
  </div>
  <h2 class="no-num no-toc no-ref heading settled" id="status"><span class="content">Status of this document</span></h2>
  <div data-fill-with="status">
   <p> <em>This section describes the status of this document at the time of its
    publication. Other documents may supersede this document. A list of current <abbr title="World Wide Web Consortium">W3C</abbr> publications and the
    latest revision of this technical report can be found in the <a href="https://www.w3.org/TR/"><abbr title="World Wide Web
    Consortium">W3C</abbr> technical reports index</a>.</em> </p>
   <p> This document was published by the <a href="https://www.w3.org/2001/tag/">W3C Technical Architecture Group
    (TAG)</a> as an Editorâs Draft.
    Publication as an Editorâs Draft does not imply endorsement by the <abbr title="World Wide Web Consortium">W3C</abbr> Membership. This is a
    draft document and may be updated, replaced or obsoleted by other documents
    at any time. It is inappropriate to cite this document as other than work in
    progress. </p>
   <p></p>
   <p> Feedback and comments on this document are welcome. Please <a href="https://github.com/w3ctag/design-principles/issues">file an issue</a> in this documentâs <a href="https://github.com/w3ctag/design-principles/">GitHub repository</a>. </p>
   <p> This document is governed by the <a href="https://www.w3.org/2019/Process-20190301/" id="w3c_process_revision">1 March 2019 W3C Process
    Document</a>. </p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li>
     <a href="#basic-principles"><span class="secno">1</span> <span class="content">Principles behind design of Web APIs</span></a>
     <ol class="toc">
      <li><a href="#priority-of-constituencies"><span class="secno">1.1</span> <span class="content">Put user needs first (Priority of Constituencies)</span></a>
      <li><a href="#safe-to-browse"><span class="secno">1.2</span> <span class="content">It should be safe to visit a web page</span></a>
      <li><a href="#trusted-ui"><span class="secno">1.3</span> <span class="content">Trusted user interface should be trustworthy</span></a>
      <li><a href="#consent"><span class="secno">1.4</span> <span class="content">Ask users for meaningful consent when appropriate</span></a>
      <li><a href="#devices-platforms"><span class="secno">1.5</span> <span class="content">Support the full range of devices and platforms (Media Independence)</span></a>
     </ol>
    <li>
     <a href="#api-across-languages"><span class="secno">2</span> <span class="content">API Design Across Languages</span></a>
     <ol class="toc">
      <li><a href="#simplicity"><span class="secno">2.1</span> <span class="content">Prefer simple solutions</span></a>
      <li><a href="#name-thoughtfully"><span class="secno">2.2</span> <span class="content">Name things thoughtfully</span></a>
      <li><a href="#feature-detect"><span class="secno">2.3</span> <span class="content">New features should be detectable</span></a>
      <li><a href="#secure-context"><span class="secno">2.4</span> <span class="content">Consider limiting new features to secure contexts</span></a>
      <li><a href="#do-not-expose-use-of-private-browsing-mode"><span class="secno">2.5</span> <span class="content">Donât reveal that private browsing mode is engaged</span></a>
      <li><a href="#private-browsing-mode"><span class="secno">2.6</span> <span class="content">Consider how your API should behave in private browsing mode</span></a>
      <li><a href="#do-not-expose-use-of-assistive-tech"><span class="secno">2.7</span> <span class="content">Donât reveal that assistive technologies are being used</span></a>
     </ol>
    <li>
     <a href="#css"><span class="secno">3</span> <span class="content">Cascading Style Sheets (CSS)</span></a>
     <ol class="toc">
      <li><a href="#css-property-separation"><span class="secno">3.1</span> <span class="content">Separate CSS properties based on what should cascade separately</span></a>
      <li><a href="#css-inherited-or-not"><span class="secno">3.2</span> <span class="content">Make appropriate choices for whether CSS properties are inherited</span></a>
      <li><a href="#css-computed-value"><span class="secno">3.3</span> <span class="content">Choose the computed value type based on how the property should inherit</span></a>
      <li><a href="#css-naming"><span class="secno">3.4</span> <span class="content">Naming of CSS properties and values</span></a>
     </ol>
    <li>
     <a href="#js"><span class="secno">4</span> <span class="content">JavaScript Language</span></a>
     <ol class="toc">
      <li><a href="#js-only"><span class="secno">4.1</span> <span class="content">Web APIs are for JavaScript</span></a>
      <li><a href="#js-rtc"><span class="secno">4.2</span> <span class="content">Preserve run-to-completion semantics</span></a>
      <li><a href="#js-gc"><span class="secno">4.3</span> <span class="content">Donât expose garbage collection</span></a>
     </ol>
    <li>
     <a href="#api-surface"><span class="secno">5</span> <span class="content">JavaScript API Surface Concerns</span></a>
     <ol class="toc">
      <li><a href="#attributes-like-data"><span class="secno">5.1</span> <span class="content">Attributes should behave like data properties</span></a>
      <li><a href="#live-vs-static"><span class="secno">5.2</span> <span class="content">Consider whether objects should be live or static</span></a>
      <li><a href="#prefer-dict-to-bool"><span class="secno">5.3</span> <span class="content">Prefer dictionary parameters over boolean parameters or other unreadable parameters</span></a>
      <li><a href="#optional-parameters"><span class="secno">5.4</span> <span class="content">Make non-critical function parameters optional</span></a>
      <li><a href="#constructors"><span class="secno">5.5</span> <span class="content">Classes should have constructors when possible</span></a>
      <li><a href="#promises"><span class="secno">5.6</span> <span class="content">Design asynchronous APIs using Promises</span></a>
      <li><a href="#aborting"><span class="secno">5.7</span> <span class="content">Cancel asynchronous APIs/operations using AbortSignal</span></a>
      <li><a href="#string-constants"><span class="secno">5.8</span> <span class="content">Constants, enums, and bitmasks</span></a>
     </ol>
    <li>
     <a href="#event-design"><span class="secno">6</span> <span class="content">Event Design</span></a>
     <ol class="toc">
      <li><a href="#one-time-events"><span class="secno">6.1</span> <span class="content">Use promises for one time events</span></a>
      <li><a href="#promises-and-events"><span class="secno">6.2</span> <span class="content">Events should fire before Promises resolve</span></a>
      <li><a href="#dont-invent-event-like"><span class="secno">6.3</span> <span class="content">Donât invent your own event listener-like infrastructure</span></a>
      <li><a href="#always-add-event-handlers"><span class="secno">6.4</span> <span class="content">Always add event handler attributes</span></a>
      <li><a href="#events-are-for-notification"><span class="secno">6.5</span> <span class="content">Events are for notification</span></a>
      <li><a href="#guard-against-recursion"><span class="secno">6.6</span> <span class="content">Guard against potential recursion</span></a>
      <li><a href="#state-and-subclassing"><span class="secno">6.7</span> <span class="content">State and <code class="idl"><span>Event</span></code> subclasses</span></a>
      <li><a href="#events-vs-observers"><span class="secno">6.8</span> <span class="content">How to decide between Events and Observers</span></a>
     </ol>
    <li>
     <a href="#types-and-units"><span class="secno">7</span> <span class="content">Web IDL, Types, and Units</span></a>
     <ol class="toc">
      <li><a href="#numeric-types"><span class="secno">7.1</span> <span class="content">Use numeric types appropriately</span></a>
      <li><a href="#idl-string-types"><span class="secno">7.2</span> <span class="content">Represent strings appropriately</span></a>
      <li><a href="#milliseconds"><span class="secno">7.3</span> <span class="content">Use milliseconds for time measurement</span></a>
      <li><a href="#times-and-dates"><span class="secno">7.4</span> <span class="content">Use the appropriate type to represent times and dates</span></a>
      <li><a href="#error-types"><span class="secno">7.5</span> <span class="content">Use Error or DOMException for errors</span></a>
     </ol>
    <li>
     <a href="#device-apis"><span class="secno">8</span> <span class="content">OS and Device Wrapper APIs</span></a>
     <ol class="toc">
      <li><a href="#device-ids"><span class="secno">8.1</span> <span class="content">Use care when exposing identifying information about devices</span></a>
      <li><a href="#device-enumeration"><span class="secno">8.2</span> <span class="content">Use care when exposing APIs for selecting or enumerating devices</span></a>
      <li><a href="#wrapper-apis"><span class="secno">8.3</span> <span class="content">Native APIs donât typically translate well to the web</span></a>
     </ol>
    <li>
     <a href="#other-considerations"><span class="secno">9</span> <span class="content">Other API Design Considerations</span></a>
     <ol class="toc">
      <li><a href="#polyfills"><span class="secno">9.1</span> <span class="content">Polyfills</span></a>
      <li><a href="#extend-manifests"><span class="secno">9.2</span> <span class="content">Extend existing manifest files rather than creating new ones</span></a>
     </ol>
    <li>
     <a href="#spec-writing"><span class="secno">10</span> <span class="content">Writing good specifications</span></a>
     <ol class="toc">
      <li><a href="#requirements-on-authors-and-implementers"><span class="secno">10.1</span> <span class="content">Identify the audience of each requirement in your specification</span></a>
      <li>
       <a href="#avoid-ambiguity"><span class="secno">10.2</span> <span class="content">Specify completely and avoid ambiguity</span></a>
       <ol class="toc">
        <li><a href="#algorithms"><span class="secno">10.2.1</span> <span class="content">Defining algorithms in specifications</span></a>
        <li><a href="#use-flags-for-states"><span class="secno">10.2.2</span> <span class="content">Use explicit flags for state</span></a>
       </ol>
     </ol>
    <li>
     <a href="#naming-is-hard"><span class="secno">11</span> <span class="content">Naming principles</span></a>
     <ol class="toc">
      <li><a href="#naming-common-words"><span class="secno">11.1</span> <span class="content">Use common words</span></a>
      <li><a href="#naming-charset"><span class="secno">11.2</span> <span class="content">Use ASCII names</span></a>
      <li><a href="#naming-consultation"><span class="secno">11.3</span> <span class="content">Consultation</span></a>
      <li><a href="#naming-future-proofing"><span class="secno">11.4</span> <span class="content">Future-proofing</span></a>
      <li><a href="#naming-consistency"><span class="secno">11.5</span> <span class="content">Consistency</span></a>
      <li><a href="#naming-unsafe"><span class="secno">11.6</span> <span class="content">Warning about dangerous features</span></a>
      <li><a href="#writing-resources"><span class="secno">11.7</span> <span class="content">Other resources</span></a>
     </ol>
    <li><a href="#acks"><span class="secno"></span> <span class="content">Acknowledgments</span></a>
    <li><a href="#conformance"><span class="secno"></span> <span class="content"> Conformance</span></a>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
      <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">Terms defined by reference</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
      <li><a href="#informative"><span class="secno"></span> <span class="content">Informative References</span></a>
     </ol>
    <li><a href="#issues-index"><span class="secno"></span> <span class="content">Issues Index</span></a>
   </ol>
  </nav>
  <main>
   <h2 class="heading settled" data-level="1" id="basic-principles"><span class="secno">1. </span><span class="content">Principles behind design of Web APIs</span><a class="self-link" href="#basic-principles"></a></h2>
   <h3 class="heading settled" data-level="1.1" id="priority-of-constituencies"><span class="secno">1.1. </span><span class="content">Put user needs first (Priority of Constituencies)</span><a class="self-link" href="#priority-of-constituencies"></a></h3>
   <p>If a trade-off needs to be made,
always put user needs above all.</p>
   <p>Similarly, when beginning to design an API,
be sure to understand and document the user need that the API aims to address.</p>
   <p><a href="https://tools.ietf.org/html/rfc8890">The internet is for end users</a>:
any change made to the web platform has the potential to affect vast numbers of people,
and may have a profound impact on any personâs life. <a data-link-type="biblio" href="#biblio-rfc8890">[RFC8890]</a></p>
   <p>User needs come before the needs of web page authors,
which come before than the needs of user agent implementors,
which come before than the needs of specification writers,
which come before theoretical purity.</p>
   <p>Like all principles,
this isnât absolute.
Ease of authoring affects how content reaches users.
User agents have to prioritize finite engineering resources,
which affects how features reach authors.
Specification writers also have finite resources,
and theoretical concerns reflect underlying needs of all of these groups.</p>
   <p>See also:</p>
   <ul>
    <li data-md>
     <p><a href="https://www.w3.org/2001/tag/doc/ethical-web-principles/#noharm">The web should not cause harm to society</a></p>
    <li data-md>
     <p><a data-link-type="biblio" href="#biblio-rfc8890">[RFC8890]</a></p>
   </ul>
   <h3 class="heading settled" data-level="1.2" id="safe-to-browse"><span class="secno">1.2. </span><span class="content">It should be safe to visit a web page</span><a class="self-link" href="#safe-to-browse"></a></h3>
   <p>When adding new features,
design them to preserve the user expectation
that visiting a web page is generally safe.</p>
   <p>The Web is named for its hyperlinked structure.
In order for the web to remain vibrant,
users need to be able to expect that merely visiting any given link
wonât have implications for the security of their computer,
or for any essential aspects of their privacy.</p>
   <p>For example, an API which allows any website to <a href="#do-not-expose-use-of-assistive-tech">detect the use of assistive technologies</a> may make users of these technologies feel unsafe visiting unknown web pages,
since any web page may detect this private information.</p>
   <p>If users have a realistic expectation of safety,
they can make informed decisions
between Web-based technologies and other technologies.
For example, users may choose to use a web-based food ordering page,
rather than installing an app,
since installing a native app is riskier than visiting a web page.</p>
   <p>To work towards making sure the reality of safety on the web matches users' expectations,
we can take complementary approaches when adding new features:</p>
   <ul>
    <li data-md>
     <p>We can improve the user interfaces through which the Web is used
to make it clearer what users of the Web should (and should not) expect;</p>
    <li data-md>
     <p>We can change the technical foundations of the Web
so that they match user expectations of privacy;</p>
    <li data-md>
     <p>We can consider the cases where users would be better off
if expectations were higher,
and in those cases
try to change both technical foundations and expectations.</p>
   </ul>
   <p>A new feature which introduces safety risks may still improve user safety overall,
if it allows users to perform a task more safely on a web page
than it would be for them to install a native app to do the same thing.
However, this benefit needs to be weighed against the common goal
of users having a reasonable expectation of safety on web pages.</p>
   <p>See also:</p>
   <ul>
    <li data-md>
     <p><a href="https://www.w3.org/TR/security-privacy-questionnaire/">Security and Privacy Self-Review</a></p>
   </ul>
   <h3 class="heading settled" data-level="1.3" id="trusted-ui"><span class="secno">1.3. </span><span class="content">Trusted user interface should be trustworthy</span><a class="self-link" href="#trusted-ui"></a></h3>
   <p>Consider whether new features impact trusted user interfaces.</p>
   <p>Users depend on trusted user interfaces
such as the address bar, security indicators and permission prompts,
to understand who they are interacting with and how.
These trusted user interfaces must be able to be designed in a way
that enables users to trust
that the information they provide is genuine,
and hasnât been spoofed or hijacked by the website.</p>
   <p>If a new feature allows untrusted user interfaces
to resemble trusted user interfaces,
this makes it more difficult for users to understand what information is trustworthy.</p>
   <p class="example" id="example-59575e9e"><a class="self-link" href="#example-59575e9e"></a> For example, JavaScript <code>alert()</code> allows a page to show a modal dialog which looks like part of the browser.
This is often used to attempt to trick users into visiting scam websites.
If this feature was proposed today, it would probably not proceed. </p>
   <h3 class="heading settled" data-level="1.4" id="consent"><span class="secno">1.4. </span><span class="content">Ask users for meaningful consent when appropriate</span><a class="self-link" href="#consent"></a></h3>
   <p>If a useful feature has the potential to cause harm to users,
make sure that the user can give <em>meaningful consent</em> for that feature to be used,
and that they can refuse consent effectively.</p>
   <p>In order to give <em>meaningful consent</em>, the user must:</p>
   <ul>
    <li data-md>
     <p><strong>understand</strong> what permission they may choose whether to grant the web page</p>
    <li data-md>
     <p>be able to choose to give or refuse that permission <strong>effectively</strong>.</p>
   </ul>
   <p>If a feature is powerful enough to require a user consent,
but itâs impossible to explain to a typical user what they are consenting to,
thatâs a signal that you may need to reconsider the design of the feature.</p>
   <p>If a permission prompt is shown,
and the user doesnât grant permission,
the Web page should not be able to do anything
that the user believes they have refused consent for.</p>
   <p>By asking for consent,
we can inform the user of what capabilities the web page does or doesnât have,
reinforcing their confidence that <a href="#safe-to-browse">the web is safe</a>.
However, the <a href="priority-of-constituencies">user benefit</a> of a new feature must justify the additional burden on users
to decide whether to grant permission for each feature
whenever itâs requested by a Web page.</p>
   <p class="example" id="example-07793d34"><a class="self-link" href="#example-07793d34"></a> For example,
the <a href="https://www.w3.org/TR/geolocation-API/">Geolocation API</a> grants access to a userâs location.
This can help users in some contexts,
like a mapping application,
but may be dangerous to some users in other contexts -
especially if used without the userâs knowledge.
So that the user may decide whether their location may be used by a Web page,
a permission prompt should be shown to the user asking whether to grant location access.
If the user refuses permission,
no location information is available to the Web page. </p>
   <h3 class="heading settled" data-level="1.5" id="devices-platforms"><span class="secno">1.5. </span><span class="content">Support the full range of devices and platforms (Media Independence)</span><a class="self-link" href="#devices-platforms"></a></h3>
   <p>As much as possible,
ensure that features on the web work across different input and output devices,
screen sizes, interaction modes, platforms, and  media.</p>
   <p>One of the main values of the Web is that itâs extremely flexible:
a Web page may be viewed on virtually any consumer computing device
at a very wide range of screen sizes,
may be used to generate printed media,
and may be interacted with in a large number of different ways.
New features should match the existing flexibility of the Web platform.</p>
   <div class="note" role="note">
     This doesnât imply that features which donât work in *everyâ¢ possible context should be excluded.
For example, hyperlinks canât be visited when printed on paper,
and the <span class="css">click</span> event doesnât translate perfectly to touch input devices
where positioning and clicking the pointer occur in the same gesture (a "tap"). 
    <p>These features still work across a wide variety of contexts,
and can be adapted to devices that donât support their original intent -
for example, a tap on a mobile device will fire a <span class="css">click</span> event as a fallback.</p>
   </div>
   <p>Features should also be designed so that the easiest way to use them
maintains flexibility.</p>
   <div class="example" id="example-2dca37cc"><a class="self-link" href="#example-2dca37cc"></a> The <a href="https://www.w3.org/TR/CSS2/visuren.html#block-formatting"><code>display: block</code></a>, <a href="https://drafts.csswg.org/css-flexbox-1/#box-model"><code>display: flex</code></a> and <a href="https://www.w3.org/TR/css-grid-1/#grid-containers"><code>display: grid</code></a> layout models in CSS
all default to placing content within the available space and without overlap,
so that it works across screen sizes,
and allows users to choose their own font and font size without causing text to overflow. </div>
   <h2 class="heading settled" data-level="2" id="api-across-languages"><span class="secno">2. </span><span class="content">API Design Across Languages</span><a class="self-link" href="#api-across-languages"></a></h2>
   <h3 class="heading settled" data-level="2.1" id="simplicity"><span class="secno">2.1. </span><span class="content">Prefer simple solutions</span><a class="self-link" href="#simplicity"></a></h3>
   <p>Look hard for simple solutions to the <a href="#priority-of-constituencies">user needs</a> you intend to address.</p>
   <p>Simple solutions are generally better than complex solutions,
although they may be harder to find.
Simpler features are easier for user agents to implement and test,
more likely to be interoperable,
and easier for authors to understand.</p>
   <p>Make sure that your <a href="#priority-of-constituencies">user needs</a> are well-defined.
This allows you to avoid scope creep,
and make sure that your API does actually meet the needs of all users.</p>
   <p>See also:</p>
   <ul>
    <li data-md>
     <p><a data-link-type="biblio" href="#biblio-least-power">[LEAST-POWER]</a></p>
   </ul>
   <h3 class="heading settled" data-level="2.2" id="name-thoughtfully"><span class="secno">2.2. </span><span class="content">Name things thoughtfully</span><a class="self-link" href="#name-thoughtfully"></a></h3>
   <p>Name APIs with care.
Naming APIs well makes it much easier for authors to use them correctly.</p>
   <p>See the more detailed <a href="#naming-is-hard">Naming principles</a> section
for specific guidance on naming.</p>
   <h3 class="heading settled" data-level="2.3" id="feature-detect"><span class="secno">2.3. </span><span class="content">New features should be detectable</span><a class="self-link" href="#feature-detect"></a></h3>
   <p>Provide a way for authors to programmatically detect
whether your feature is available,
so that web content may gracefully handle the feature not being present.</p>
   <p>An existing feature may not be available on a page for a number of reasons.
Two of the more common reasons are
because it hasnât been implemented yet, or
because itâs only available in <a href="#secure-context">secure contexts</a>.</p>
   <p>Authors shouldnât need to write different code to handle each scenario.
That way, even if an author only knows or cares about one scenario,
the code will handle all of them.</p>
   <p class="note" role="note"> When a feature is available but isnât feasible to use
because a required device isnât present,
itâs better to expose that the feature is available
and have a separate way to detect that the device isnât.
This allows authors to handle a device not being available differently
from the feature not being available,
for example by suggesting the user connect or enable the device. </p>
   <p>See <a href="#device-enumeration">Â§â¯8.2 Use care when exposing APIs for selecting or enumerating devices</a>.</p>
   <p></p>
   <p>Authors should always be able to detect a feature from JavaScript,
and in some cases the feature should also be detectable
in the language where itâs used
(such as <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/css-conditional-3/#at-ruledef-supports" id="ref-for-at-ruledef-supports">@supports</a> in CSS).</p>
   <p>In some cases, it may <strong>not</strong> be appropriate to allow feature detection.
Whether the feature should be detectable or not
should be based on the <a href="#priority-of-constituencies">user need</a> for the feature:
if there is a user need or design principle which would fail
if feature detection were available for the feature,
then you should not support feature detection.</p>
   <p>Also, if a feature is generally not exposed to developers,
it is not appropriate to support feature detection.
For example, private browsing mode is a concept
which is recognised in web specifications,
but not exposed to authors.
For private browsing mode to support the userâs needs,
it must not be feature detected.</p>
   <p>See also:</p>
   <ul>
    <li data-md>
     <p><a href="#do-not-expose-use-of-private-browsing-mode">Â§â¯2.5 Donât reveal that private browsing mode is engaged</a></p>
    <li data-md>
     <p><a href="#do-not-expose-use-of-assistive-tech">Â§â¯2.7 Donât reveal that assistive technologies are being used</a></p>
    <li data-md>
     <p><a href="#secure-context">Â§â¯2.4 Consider limiting new features to secure contexts</a></p>
   </ul>
   <h3 class="heading settled" data-level="2.4" id="secure-context"><span class="secno">2.4. </span><span class="content">Consider limiting new features to secure contexts</span><a class="self-link" href="#secure-context"></a></h3>
   <p>Always limit your feature to secure contexts
if it would pose a risk to the user
without the authentication, integrity, or confidentiality
thatâs present only in secure contexts.</p>
   <div class="example" id="example-ba6f372c"><a class="self-link" href="#example-ba6f372c"></a> One example of a feature that should be limited to secure contexts
is <a href="https://www.w3.org/TR/geolocation-API/">Geolocation</a>,
since it would be a risk to users' privacy to transmit their location in an insecure way. </div>
   <p>For other features, TAG members past and present
havenât reached consensus on general advice.
Some believe that all new features
(other than features which are additions to existing features)
should be limited to secure contexts.
This would help encourage the use of HTTPS,
helping users be more secure in general.</p>
   <p>Others believe that features should only be limited to secure contexts
if they have a known security or privacy impact.
This lowers the barrier to entry for creating web pages
that take advantage of new features which donât impact user security or privacy.</p>
   <div class="note" role="note">
     Specification authors can limit most features defined in <a href="https://heycam.github.io/webidl/">Web IDL</a>,
to secure contexts
by using the <code>[<a href="https://w3c.github.io/webappsec-secure-contexts/#integration-idl">SecureContext</a>]</code> extended attribute
on interfaces, namespaces, or their members (such as methods and attributes). 
    <p>However, for some types of API (e.g., dispatching an event),
limitation to secure contexts should just
be defined in normative prose in the specification.
If this is the case,
consider whether there might be scope for adding a similar mechanism
to <code>[SecureContext]</code> to make this process easier for future API developers.</p>
   </div>
   <div class="note" role="note">
     As described in <a href="#feature-detect">Â§â¯2.3 New features should be detectable</a>,
you should provide a way to programmatically detect whether a feature is available,
including cases where the feature is unavailable because the context isnât secure. 
    <p>However, if, for some reason
there is no way for code to gracefully handle the feature not being present,
limiting the feature to secure contexts might cause problems
for code (such as libraries) that may be used in either secure or non-secure contexts.</p>
   </div>
   <h3 class="heading settled" data-level="2.5" id="do-not-expose-use-of-private-browsing-mode"><span class="secno">2.5. </span><span class="content">Donât reveal that private browsing mode is engaged</span><a class="self-link" href="#do-not-expose-use-of-private-browsing-mode"></a></h3>
   <p>Make sure that your feature doesnât give authors a way to detect private browsing mode.</p>
   <p>Some people use <a href="https://www.w3.org/2001/tag/doc/private-browsing-modes/">private browsing mode</a> to protect their own personal safety.
Because of this, the fact that someone is using private browsing mode
may be <a href="https://www.w3.org/TR/security-privacy-questionnaire/#sensitive-data">sensitive information</a> about them.
This information may <a href="https://www.w3.org/2001/tag/doc/ethical-web-principles/#noharm">harm</a> people
if it is revealed to a web site controlled by others who have power over them
(such as employers, parents, partners,
or <a href="https://www.w3.org/2001/tag/doc/ethical-web-principles/#expression">state actors</a>).</p>
   <p>Given such dangers,
websites should not be able to detect that private browsing mode is engaged.</p>
   <div class="example" id="example-52cad010"><a class="self-link" href="#example-52cad010"></a> User Agents which support <a href="https://www.w3.org/TR/IndexedDB/">IndexedDB</a> should not disable it in private browsing mode,
because that would reveal that private browsing mode is engaged </div>
   <div class="example" id="example-bc7df47d">
    <a class="self-link" href="#example-bc7df47d"></a> The <a href="https://www.w3.org/TR/payment-request/">Payment Request API</a>'s <a href="https://www.w3.org/TR/payment-request/#show-method">show() method</a>,
when called,
allows User Agents <q cite="https://www.w3.org/TR/payment-request/#show-method">to act
as if the user had immediately <a href="https://www.w3.org/TR/payment-request/#dfn-user-aborts-the-payment-request">aborted the payment request</a></q>. 
    <p>This enables User Agents to automatically abort payment requests
in private browsing mode
(thus protecting <a href="https://www.w3.org/TR/security-privacy-questionnaire/#sensitive-data">sensitive information</a> such as the userâs shipping or billing address)
without revealing that private browsing mode is engaged.</p>
   </div>
   <p>See also:</p>
   <ul>
    <li data-md>
     <p><a href="https://www.w3.org/2001/tag/doc/ethical-web-principles/#privacy">Security and privacy are essential</a></p>
    <li data-md>
     <p><a href="https://www.w3.org/TR/security-privacy-questionnaire/#underlying-platform-data">What data does this specification expose to an origin?</a></p>
    <li data-md>
     <p><a href="#private-browsing-mode">Â§â¯2.6 Consider how your API should behave in private browsing mode</a></p>
   </ul>
   <h3 class="heading settled" data-level="2.6" id="private-browsing-mode"><span class="secno">2.6. </span><span class="content">Consider how your API should behave in private browsing mode</span><a class="self-link" href="#private-browsing-mode"></a></h3>
   <p>If necessary, specify how your API should behave differently
in private browsing mode.</p>
   <p>For example, if your API would reveal information
that would allow someone to correlate
a single userâs activity
both in and out of private browsing mode,
consider possible <a href="https://www.w3.org/TR/security-privacy-questionnaire/#mitigations">mitigations</a> such as introducing noise,
or using permission prompts to give the user extra information
to help them meaningfully consent to this tracking (see <a href="#consent">Â§â¯1.4 Ask users for meaningful consent when appropriate</a>).</p>
   <p>Private browsing modes enable users to browse the web
without leaving any trace of their private browsing on their device.
Therefore, APIs which provide client-side storage
should not persist data stored
while private browsing mode is engaged
after itâs disengaged.
This can and should be done
without revealing any detectable API differences to the site.</p>
   <div class="example" id="example-fb11a26c">
    <a class="self-link" href="#example-fb11a26c"></a> User Agents which support <a href="https://html.spec.whatwg.org/multipage/webstorage.html#dom-localstorage">localStorage</a> should not persist storage area changes
made while private browsing mode is engaged. 
    <p>If the User Agent has two simultaneous sessions with a site,
one in private browsing mode and one not,
storage area changes made in the private browsing mode session
should not be revealed to the other browsing session,
and vice versa.
(The <a href="https://html.spec.whatwg.org/multipage/indices.html#event-storage">storage event</a> should not be fired
at the other sessionâs <a href="https://html.spec.whatwg.org/multipage/window-object.html#window" id="termref-for-">window object</a>.)</p>
   </div>
   <p>See also:</p>
   <ul>
    <li data-md>
     <p><a href="#do-not-expose-use-of-private-browsing-mode">Â§â¯2.5 Donât reveal that private browsing mode is engaged</a></p>
    <li data-md>
     <p><a href="https://www.w3.org/TR/security-privacy-questionnaire/#persistent-origin-specific-state">Does this specification introduce new state for an origin that persists across browsing sessions?</a></p>
    <li data-md>
     <p><a href="https://www.w3.org/TR/security-privacy-questionnaire/#private-browsing">Security and privacy self review: Private Browsing</a></p>
   </ul>
   <h3 class="heading settled" data-level="2.7" id="do-not-expose-use-of-assistive-tech"><span class="secno">2.7. </span><span class="content">Donât reveal that assistive technologies are being used</span><a class="self-link" href="#do-not-expose-use-of-assistive-tech"></a></h3>
   <p>Make sure that your API doesnât provide a way
for authors to detect that a user is using assistive technology
without the userâs consent.</p>
   <p><a href="https://www.w3.org/2001/tag/doc/ethical-web-principles/#allpeople">The web platform must be accessible to people with disabilities.</a> If a site can detect that a user is using an assistive technology,
that site can deny or restrict the userâs access to the services it provides.</p>
   <p>People who make use of assistive technologies
are often <a href="https://www.w3.org/2001/tag/doc/ethical-web-principles/#noharm">vulnerable members of society</a>;
their use of assistive technologies is <a href="https://www.w3.org/TR/security-privacy-questionnaire/#sensitive-data">sensitive information</a> about them.
If an API provides access to this information
without the userâs <a href="#consent">consent</a>,
this sensitive information may be revealed to others
(including <a href="https://www.w3.org/2001/tag/doc/ethical-web-principles/#expression">state actors</a>)
who may wish them harm.</p>
   <p>Sometimes people propose features which aim to improve the user experience
for users of assistive technology,
but which would reveal the userâs use of assistive technology as a side effect.
While these are well intentioned,
they violate <a href="#safe-to-browse">Â§â¯1.2 It should be safe to visit a web page</a>,
so alternative solutions must be found.</p>
   <div class="example" id="example-f5a7b3e0">
    <a class="self-link" href="#example-f5a7b3e0"></a> 
    <p>The <a href="https://wicg.github.io/aom/">Accessibility Object Model</a> (AOM)
used to define a set of events which, when fired, <a href="https://github.com/WICG/aom/issues/81">revealed the use of assistive technology</a>.</p>
    <p>AOM has since removed these events and <a href="https://github.com/WICG/aom/blob/gh-pages/explainer.md#user-action-events-from-assistive-technology">replaced them</a> with synthetic DOM events
which donât reveal the use of assistive technology.</p>
   </div>
   <p>See also:</p>
   <ul>
    <li data-md>
     <p><a href="https://w3c.github.io/apa/fast/">Web Technology Accessibility Guidelines</a></p>
    <li data-md>
     <p><a href="https://www.w3.org/2001/tag/doc/ethical-web-principles/#privacy">Security and privacy are essential</a></p>
    <li data-md>
     <p><a href="https://www.w3.org/TR/security-privacy-questionnaire/#underlying-platform-data">What data does this specification expose to an origin?</a></p>
   </ul>
   <h2 class="heading settled" data-level="3" id="css"><span class="secno">3. </span><span class="content">Cascading Style Sheets (CSS)</span><a class="self-link" href="#css"></a></h2>
   <p>This section details design principles for features which are exposed via CSS.</p>
   <h3 class="heading settled" data-level="3.1" id="css-property-separation"><span class="secno">3.1. </span><span class="content">Separate CSS properties based on what should cascade separately</span><a class="self-link" href="#css-property-separation"></a></h3>
   <p>Decide which values should be grouped together as CSS properties
and which should be separate properties
based on what makes sense to set independently.</p>
   <p><a href="https://www.w3.org/TR/2011/REC-CSS2-20110607/cascade.html#cascade">CSS cascading</a> allows <a href="https://www.w3.org/TR/2011/REC-CSS2-20110607/syndata.html#declaration">declarations</a> from different rules or different style sheets
to override one another.
If there is a logical set of attributes which should all be overridden together,
they should be grouped together in a single property so that they cascade together.
Likewise, if there are attributes which should be able to be overridden independently,
they should be separate properties.</p>
   <div class="example" id="example-e15a5479">
    <a class="self-link" href="#example-e15a5479"></a>For example, the "size" and "sink" aspects of the <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-inline-3/#propdef-initial-letter" id="ref-for-propdef-initial-letter">initial-letter</a> property
belong in a single property
because they are part of a single initial letter effect
(e.g., a drop cap, sunken cap, or raised cap). 
    <p>However, the <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-inline-3/#propdef-initial-letter-align" id="ref-for-propdef-initial-letter-align">initial-letter-align</a> property should be separate because it
sets an alignment policy for all of these effects across the document
which is a general stylistic choice
and a function of the script (e.g., Latin, Cyrillic, Arabic) used in the document.</p>
   </div>
   <h3 class="heading settled" data-level="3.2" id="css-inherited-or-not"><span class="secno">3.2. </span><span class="content">Make appropriate choices for whether CSS properties are inherited</span><a class="self-link" href="#css-inherited-or-not"></a></h3>
   <p>Decide whether a property should be <a href="https://www.w3.org/TR/2011/REC-CSS2-20110607/cascade.html#inheritance">inherited</a> based on whether the effect of the property should be overridden or added to
if set on an ancestor as well as a descendant.</p>
   <p>If setting the property on a descendant element needs to override (rather than add to)
the effect of setting it on an ancestor,
then the property should probably be inherited.
A specification of an non-inherited property requiring that the handling of an element
look at the value of that property on its ancestors (which may also be slow)
is a "code smell" that suggests that the property likely should have been inherited.</p>
   <p>If setting the property on a descendant element is a separate effect
that adds to setting it on an ancestor,
then the property should probably <strong>not</strong> be inherited.
A specification of an inherited property requiring that the handling of an element
ignore the value of a property if itâs the same as the value on the parent element
is a "code smell" that suggests that the property likely should not have been inherited.</p>
   <div class="note" role="note"> If a property has an effect on text,
then itâs almost always true that
a descendant element needs to override (rather than add to)
the effect of setting it on an ancestor,
and the property should be inherited.
This is also needed to maintain the design principle that
inserting an unstyled inline element around a piece of text
doesnât change the appearance of that text. </div>
   <div class="example" id="example-58897411">
    <a class="self-link" href="#example-58897411"></a> For example, the <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-backgrounds-3/#propdef-background-image" id="ref-for-propdef-background-image">background-image</a> property is <strong>not</strong> inherited. 
    <p>If the <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-backgrounds-3/#propdef-background-image" id="ref-for-propdef-background-imageâ ">background-image</a> property had been inherited,
then the specification would have had to create a good bit of complexity
to avoid a partially-transparent image
being visibly repeated for each descendant element.
This complexity probably would have involved
behaving differently if the property had the same value on the parent element,
which is the "code smell" mentioned above that suggests
that a property likely should not have been inherited.</p>
   </div>
   <div class="example" id="example-51dea7ed">
    <a class="self-link" href="#example-51dea7ed"></a> Another example is the <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-fonts-3/#propdef-font-size" id="ref-for-propdef-font-size">font-size</a> property, which <strong>is</strong> inherited.
It sets the size of the font used for the text in the element,
and continues to apply to any descendants that donât
have a declaration setting <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-fonts-3/#propdef-font-size" id="ref-for-propdef-font-sizeâ ">font-size</a> to a different value. 
    <p>If the <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-fonts-3/#propdef-font-size" id="ref-for-propdef-font-sizeâ¡">font-size</a> property were not inherited,
then it would probably have to have an initial value
that requires walking up the ancestor chain to find the nearest ancestor
that doesnât have that value.
This is the "code smell" mentioned above that suggests
that a property likely should have been inherited.</p>
   </div>
   <h3 class="heading settled" data-level="3.3" id="css-computed-value"><span class="secno">3.3. </span><span class="content">Choose the computed value type based on how the property should inherit</span><a class="self-link" href="#css-computed-value"></a></h3>
   <p>Choose the <a data-link-type="dfn" href="https://drafts.csswg.org/css-cascade-5/#computed-value" id="ref-for-computed-value">computed value</a> of a CSS property
based on how it will <a data-link-type="dfn" href="https://drafts.csswg.org/css-cascade-5/#inheritance" id="ref-for-inheritance">inherit</a>,
and the other properties which may depend on it,
whether or not it has been inherited.</p>
   <div class="note" role="note"> Note: the <a data-link-type="dfn" href="https://drafts.csswg.org/css-cascade-5/#computed-value" id="ref-for-computed-valueâ ">computed value</a> should not be confused with the <a data-link-type="dfn" href="https://drafts.csswg.org/cssom-1/#resolved-value" id="ref-for-resolved-value">resolved value</a> which is returned from the <code class="idl"><a data-link-type="idl" href="https://drafts.csswg.org/cssom-1/#dom-window-getcomputedstyle" id="ref-for-dom-window-getcomputedstyle">getComputedStyle()</a></code> method. </div>
   <p>Certain CSS properties are calculated with <a href="https://wiki.csswg.org/spec/property-dependencies">dependencies</a> on others:
for example, the <a data-link-type="dfn" href="https://drafts.csswg.org/css-cascade-5/#computed-value" id="ref-for-computed-valueâ¡">computed value</a> of a property specified in <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/css-values-4/#lh" id="ref-for-lh">lh</a> units
depends on the <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-inline-3/#propdef-line-height" id="ref-for-propdef-line-height">line-height</a> property which applies to the element being considered.
The <a data-link-type="dfn" href="https://drafts.csswg.org/css-cascade-5/#computed-value" id="ref-for-computed-valueâ¢">computed value</a> for a property should be chosen
so that the dependent values make sense,
regardless of whether they are inherited.</p>
   <div class="example" id="example-05827ee2">
    <a class="self-link" href="#example-05827ee2"></a> For example, the <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-inline-3/#propdef-line-height" id="ref-for-propdef-line-heightâ ">line-height</a> property may accept a <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-3/#number-value" id="ref-for-number-value">&lt;number></a> value,
such as <a class="css" data-link-type="propdesc" href="https://drafts.csswg.org/css-inline-3/#propdef-line-height" id="ref-for-propdef-line-heightâ¡">line-height: 1.4</a>.
This value represents a multiple of the <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-fonts-3/#propdef-font-size" id="ref-for-propdef-font-sizeâ¢">font-size</a>,
so if the <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-fonts-3/#propdef-font-size" id="ref-for-propdef-font-sizeâ£">font-size</a> is <span class="css">20px</span>,
the <a data-link-type="dfn" href="https://drafts.csswg.org/css-cascade-5/#actual-value" id="ref-for-actual-value">actual value</a> for the line height is <span class="css">28px</span>. 
    <p>However, the <a data-link-type="dfn" href="https://drafts.csswg.org/css-cascade-5/#computed-value" id="ref-for-computed-valueâ£">computed value</a> in this case is the <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-3/#number-value" id="ref-for-number-valueâ ">&lt;number></a> <span class="css">1.4</span>,
not the <a class="production css" data-link-type="type" href="https://drafts.csswg.org/css-values-3/#length-value" id="ref-for-length-value" title="Expands to: advance measure | cap | ch | cm | em | ex | ic | in | lh | mm | pc | pt | px | q | rem | rlh | vb | vh | vi | vmax | vmin | vw">&lt;length></a> <span class="css">28px</span>.</p>
    <p>The <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-inline-3/#propdef-line-height" id="ref-for-propdef-line-heightâ¢">line-height</a> property can be inherited
into elements that have a different <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-fonts-3/#propdef-font-size" id="ref-for-propdef-font-sizeâ¤">font-size</a>,
and any property on those elements which depends on <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-inline-3/#propdef-line-height" id="ref-for-propdef-line-heightâ£">line-height</a> must take the relevant <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-fonts-3/#propdef-font-size" id="ref-for-propdef-font-sizeâ¥">font-size</a> into account,
rather than the <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-fonts-3/#propdef-font-size" id="ref-for-propdef-font-sizeâ¦">font-size</a> for the element from which
the <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-inline-3/#propdef-line-height" id="ref-for-propdef-line-heightâ¤">line-height</a> value was inherited.</p>
<pre class="highlight"><c- p>&lt;</c-><c- f>body</c-> <c- e>style</c-><c- o>=</c-><c- s>"font-size: 20px; line-height: 1.4"</c-><c- p>></c->

  <c- p>&lt;</c-><c- f>p</c-><c- p>></c->This body text has a line height of 28px.<c- p>&lt;/</c-><c- f>p</c-><c- p>></c->

  <c- p>&lt;</c-><c- f>h2</c-> <c- e>style</c-><c- o>=</c-><c- s>"font-size: 200%"</c-><c- p>></c->
    This heading has a line-height of 56px,
    not 28px, even though the line-height was declared on the body.
    This means that the 40px font wonât overflow the line height.
  <c- p>&lt;/</c-><c- f>h2</c-><c- p>></c->
<c- p>&lt;/</c-><c- f>body</c-><c- p>></c->
</pre>
    <p>These number values are generally the preferred values to use for <a class="property" data-link-type="propdesc" href="https://drafts.csswg.org/css-inline-3/#propdef-line-height" id="ref-for-propdef-line-heightâ¥">line-height</a> because they inherit better than length values.</p>
   </div>
   <p>See also:</p>
   <ul>
    <li data-md>
     <p><a href="https://wiki.csswg.org/spec/computed-values">Computed Values Patterns</a></p>
   </ul>
   <h3 class="heading settled" data-level="3.4" id="css-naming"><span class="secno">3.4. </span><span class="content">Naming of CSS properties and values</span><a class="self-link" href="#css-naming"></a></h3>
   <p>The names of CSS properties are usually nouns,
and the names of their values are usually adjectives (although sometimes nouns).</p>
   <p>Words in properties and values are separated by hyphens.
Abbreviations are generally avoided.</p>
   <p>Use the root form of words when possible
rather than a form with a grammatical prefix or suffix
(for example, "size" rather than "sizing").</p>
   <p>The list of values of a property should generally be chosen
so that new values can be added.
Avoid values like <span class="css">yes</span>, <span class="css">no</span>, <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/mediaqueries-5/#valdef-custom-media-true" id="ref-for-valdef-custom-media-true">true</a>, <a class="css" data-link-type="maybe" href="https://drafts.csswg.org/mediaqueries-5/#valdef-custom-media-false" id="ref-for-valdef-custom-media-false">false</a>,
or things with more complex names that are basically equivalent to them.</p>
   <p>Avoid words like "mode" or "state" in the names of properties,
since properties are generally setting a mode or state.</p>
   <p>See <a href="#naming-is-hard">Â§â¯11 Naming principles</a> for general (cross-language) advice on naming.</p>
   <h2 class="heading settled" data-level="4" id="js"><span class="secno">4. </span><span class="content">JavaScript Language</span><a class="self-link" href="#js"></a></h2>
   <h3 class="heading settled" data-level="4.1" id="js-only"><span class="secno">4.1. </span><span class="content">Web APIs are for JavaScript</span><a class="self-link" href="#js-only"></a></h3>
   <p>When designing imperative APIs for the Web,
use JavaScript.
In particular,
you can freely rely upon language-specific semantics and conventions,
with no need to keep things generalized.</p>
   <div class="example" id="example-b9c0357a">
    <a class="self-link" href="#example-b9c0357a"></a> For example,
the <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/custom-elements.html#dom-customelementregistry-define" id="ref-for-dom-customelementregistry-define">CustomElementRegistry.define()</a></code> method takes a reference to
a <a href="https://tc39.es/ecma262/#sec-static-semantics-constructormethod">Constructor Method</a>. 
    <p>This takes advantage of the relatively recent addition of classes to JavaScript,
and the fact that function references are very easy to use in JavaScript.</p>
   </div>
   <div class="note" role="note"> JavaScript is standardized under the name <a data-link-type="biblio" href="#biblio-ecmascript">[ECMASCRIPT]</a>. </div>
   <div class="note" role="note"> <a data-link-type="biblio" href="#biblio-webidl">[WEBIDL]</a> defines a separate "ECMAScript binding" section,
but this doesnât imply that Web IDL is intended
to have bindings in other programming languages. </div>
   <h3 class="heading settled" data-level="4.2" id="js-rtc"><span class="secno">4.2. </span><span class="content">Preserve run-to-completion semantics</span><a class="self-link" href="#js-rtc"></a></h3>
   <p>Donât modify data accessed via JavaScript APIs
while a JavaScript <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-loop" id="ref-for-event-loop">event loop</a> is running.</p>
   <p>A JavaScript Web API is generally a wrapper around
a feature implemented in a lower-level language,
such as C++ or Rust.
Unlike those languages,
when using JavaScript developers can expect
that once a piece of code begins executing,
it will continue executing until it has completed.</p>
   <p>Because of that, JavaScript authors take for granted
that the data available to a function wonât change unexpectedly
while the function is running.</p>
   <p>So if a JavaScript Web API exposes some piece of data,
such as an object property,
the user agent must not update that data
while a JavaScript task is running.
Instead, if the underlying data changes, <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task" id="ref-for-queue-a-task">queue a task</a> to modify the exposed version of the data.</p>
   <div class="example" id="example-3fb93c89"><a class="self-link" href="#example-3fb93c89"></a> If a JavaScript task has accessed the <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/offline.html#dom-navigator-online" id="ref-for-dom-navigator-online">navigator.onLine</a></code> property,
and browserâs online status changes,
the property wonât be updated until the next task runs. </div>
   <h3 class="heading settled" data-level="4.3" id="js-gc"><span class="secno">4.3. </span><span class="content">Donât expose garbage collection</span><a class="self-link" href="#js-gc"></a></h3>
   <p>Ensure your JavaScript Web APIs donât provide a way
for an author to know the timing of garbage collection.</p>
   <p>The timing of garbage collection is different in different user agents,
and may change over time as user agents work on improving performance.
If an API exposes the timing of garbage collection,
it can cause programs to behave differently
in different contexts.
This means that authors need to write extra code to handle these differences.
It may also make it more difficult for user agents
to implement different garbage collection strategies,
if there is enough code which depends on timing working a particular way.</p>
   <p>This means that you shouldnât expose any API that acts as a weak reference,
e.g. with a property that becomes <code class="highlight"><c- kc>null</c-></code> once garbage collection runs.
Object and data lifetimes in JavaScript code should be predictable.</p>
   <div class="example" id="example-fecc1403">
    <a class="self-link" href="#example-fecc1403"></a> <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#ref-for-concept-getelementsbytagname" id="ref-for-ref-for-concept-getelementsbytagname">getElementsByTagName</a></code> returns an <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#htmlcollection" id="ref-for-htmlcollection">HTMLCollection</a></code> object,
which may be re-used if the method is called twice on the same Document object,
with the same tag name.
In practice,
this means that the same object will be returned
if and only if it has not been garbage collected.
This means that the behaviour is different depending on
the timing of garbage collection. 
    <p>If <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#ref-for-concept-getelementsbytagname" id="ref-for-ref-for-concept-getelementsbytagnameâ ">getElementsByTagName</a></code> were designed today,
the advice to the designers would be
to either reliably reuse the output,
or to produce a new <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#htmlcollection" id="ref-for-htmlcollectionâ ">HTMLCollection</a></code> each time itâs invoked.</p>
   </div>
   <p><code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#ref-for-concept-getelementsbytagname" id="ref-for-ref-for-concept-getelementsbytagnameâ¡">getElementsByTagName</a></code> gives no sign that
it may depend on the timing of garbage collection.
In contrast, APIs which are explicitly designed
to depend on garbage collection,
like <code>WeakRef</code> or <code>FinalizationGroup</code>,
set accurate author expectations about
the interaction with garbage collection.</p>
   <h2 class="heading settled" data-level="5" id="api-surface"><span class="secno">5. </span><span class="content">JavaScript API Surface Concerns</span><a class="self-link" href="#api-surface"></a></h2>
   <h3 class="heading settled" data-level="5.1" id="attributes-like-data"><span class="secno">5.1. </span><span class="content">Attributes should behave like data properties</span><a class="self-link" href="#attributes-like-data"></a></h3>
   <p><a data-link-type="biblio" href="#biblio-webidl">[WEBIDL]</a> attributes are reified in JavaScript as accessor properties, i.e. properties with
separate getter and setter functions which can react independently. This is in contrast to the
"default" style of JavaScript properties, data properties, which do not have configurable behavior
but instead can simply be set and retrieved, or optionally marked read-only so that they cannot be
set.</p>
   <p>Data property semantics are what are generally expected by JavaScript developers when interfacing
with objects. As such, although getters and setters allow infinite customizability when defining
your Web IDL attributes, you should endeavor to make the resulting accessor properties behave as
much like a data property as possible. Specific guidance in this regard includes:</p>
   <ul>
    <li data-md>
     <p>Getters must not have any (observable) side effects.</p>
    <li data-md>
     <p>Getters should not perform any expensive operations. (A notable failure of the platform in this
regard is getters like <code class="highlight">offsetTop</code> performing layout; do not repeat this mistake.)</p>
    <li data-md>
     <p>Ensure that your attributeâs getter returns the same object each time it is called, until some
occurrence in another part of the system causes a logical "reset" of the propertyâs value. In
particular, <code class="highlight">obj<c- p>.</c->attribute <c- o>===</c-> obj<c- p>.</c->attribute</code> must always hold, and so returning a
new value from the getter each time is not allowed.</p>
    <li data-md>
     <p>Whenever possible, preserve values given to the setter for return from the getter. That is,
given <code class="highlight">obj<c- p>.</c->attribute <c- o>=</c-> x</code>, a subsequent <code class="highlight">obj<c- p>.</c->attribute <c- o>===</c-> x</code> should be
true. (This will not always be the case, e.g. if a normalization or type conversion step is
necessary, but should be held as a goal for normal code paths.)</p>
   </ul>
   <p>If you were thinking about using an attribute,
but it doesnât behave this way,
you should probably use a method instead.</p>
   <h3 class="heading settled" data-level="5.2" id="live-vs-static"><span class="secno">5.2. </span><span class="content">Consider whether objects should be live or static</span><a class="self-link" href="#live-vs-static"></a></h3>
   <p>Objects returned from functions, attribute getters, etc.,
can either be live or static.
A <dfn data-dfn-type="dfn" data-export id="live-object">live object<a class="self-link" href="#live-object"></a></dfn> is one that continues to reflect
changes made after it was returned to the caller.
A <dfn data-dfn-type="dfn" data-export id="static-object">static object<a class="self-link" href="#static-object"></a></dfn> is one that reflects
the state at the time it was returned.</p>
   <p>Objects that are the way state is mutated are generally live.
For example, DOM nodes are returned as live objects,
since they are the API through which attributes are set and other changes
to the DOM are made.
They also reflect changes to the DOM made in other ways
(such as through user interaction with forms).</p>
   <p>Objects that represent a collection
that might change over time
(and that are not the way state is mutated)
should generally be returned as static objects.
This is because it is confusing to users of the API when
a collection changes while being iterated.
Because of this,
it is generally considered a mistake that methods like <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-document-getelementsbytagname" id="ref-for-dom-document-getelementsbytagname">getElementsByTagName()</a></code> return live objects; <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-parentnode-queryselectorall" id="ref-for-dom-parentnode-queryselectorall">querySelectorAll()</a></code> was made to return static objects
as a result of this experience.
On the other hand, even though <code class="idl"><a data-link-type="idl" href="https://url.spec.whatwg.org/#urlsearchparams" id="ref-for-urlsearchparams">URLSearchParams</a></code> represents a collection,
it should be live because the collection is mutated through that object.</p>
   <p class="note" role="note"><span>Note:</span> Itâs possible that some of this advice should be reconsidered
for <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-maplike" id="ref-for-dfn-maplike">maplike</a> and <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-setlike" id="ref-for-dfn-setlike">setlike</a> types,
where iterators have reasonable behavior
for mutation that happens during iteration.
This point likely needs further discussion,
and perhaps further experience of use of these types.</p>
   <p>Itâs also worth considering the implications of having
live versus static objects for the speed of implementations of the API.
When the data needed by an object are expensive to compute up-front,
there is an advantage for that object to be live so that the results
can be computed lazily, such as for <code class="idl"><a data-link-type="idl" href="https://drafts.csswg.org/cssom-1/#dom-window-getcomputedstyle" id="ref-for-dom-window-getcomputedstyleâ ">getComputedStyle()</a></code>.
On the other hand,
if the data needed by an object are expensive to keep up-to-date,
such as for the <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#nodelist" id="ref-for-nodelist">NodeList</a></code> returned from <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-parentnode-queryselectorall" id="ref-for-dom-parentnode-queryselectorallâ ">querySelectorAll()</a></code>,
then providing a static object avoids
having to keep the object updated until it is garbage collected
(which may be substantially after its last use).</p>
   <p>Likewise, the choice of live versus static objects
can influence the memory use of an API.
If each call of a method returns a new static object,
and the objects are large,
then substantial amounts of memory can be wasted
until the next garbage collection.</p>
   <p>The choice of whether an object is live or static may also
influence whether it should be returned
from an attribute getter or from a method.
See <a href="#attributes-like-data">Â§â¯5.1 Attributes should behave like data properties</a>.
In particular,
if a result that changes frequently is returned as a static object,
it should probably be returned from a method rather than an attribute getter.</p>
   <h3 class="heading settled" data-level="5.3" id="prefer-dict-to-bool"><span class="secno">5.3. </span><span class="content">Prefer dictionary parameters over boolean parameters or other unreadable parameters</span><a class="self-link" href="#prefer-dict-to-bool"></a></h3>
   <p>APIs should generally prefer dictionary parameters
(with named booleans in the dictionary)
over boolean parameters.
This makes the code that calls the API <a href="https://ariya.io/2011/08/hall-of-api-shame-boolean-trap">much more readable</a>.
It also makes the API more extensible in the future,
particularly if multiple booleans are needed.</p>
   <p class="example" id="example-44c12439"><a class="self-link" href="#example-44c12439"></a>For example, <code class="highlight"><c- k>new</c-> Event<c- p>(</c-><c- u>"exampleevent"</c-><c- p>,</c-> <c- p>{</c-> bubbles<c- o>:</c-> <c- kc>true</c-><c- p>,</c-> cancelable<c- o>:</c-> <c- kc>false</c-><c- p>})</c-></code> is much more readable than <code class="highlight"><c- k>new</c-> Event<c- p>(</c-><c- u>"exampleevent"</c-><c- p>,</c-> <c- kc>true</c-><c- p>,</c-> <c- kc>false</c-><c- p>)</c-></code>. </p>
   <p>Furthermore,
the booleans in dictionaries need to be designed so that they all default to false.
If booleans default to true, then <a href="https://lists.w3.org/Archives/Public/public-script-coord/2013OctDec/0302.html">users of the API will find unexpected JavaScript behavior</a> since <code class="highlight"><c- p>{</c-> passive<c- o>:</c-> <c- kc>false</c-> <c- p>}</c-></code> and <code class="highlight"><c- p>{</c-> passive<c- o>:</c-> <c- kc>undefined</c-> <c- p>}</c-></code> will produce different results.
But at the same time, itâs important to avoid naming booleans in negative ways,
because then code will have confusing double-negatives.
These pieces of advice may sometimes conflict,
but the conflict can be avoided by using opposite words without negatives,
such as ârepeatâ versus âonceâ,
âisolateâ versus âconnectâ,
or âprivateâ versus âpublicâ.</p>
   <p>Likewise, APIs should use dictionary parameters to avoid other cases
of difficult to understand sequences of parameters.
For example, <code class="highlight">window<c- p>.</c->scrollBy<c- p>({</c-> left<c- o>:</c-> <c- mi>50</c-><c- p>,</c-> top<c- o>:</c-> <c- mi>0</c-> <c- p>})</c-></code> is more readable than <code class="highlight">window<c- p>.</c->scrollBy<c- p>(</c-><c- mi>50</c-><c- p>,</c-> <c- mi>0</c-><c- p>)</c-></code>.</p>
   <h3 class="heading settled" data-level="5.4" id="optional-parameters"><span class="secno">5.4. </span><span class="content">Make non-critical function parameters optional</span><a class="self-link" href="#optional-parameters"></a></h3>
   <p>Parameters that are not strictly necessary should be made optional.
Making arguments optional with reasonable defaults
reduces overhead when the function is used,
and increases user-friendliness.</p>
   <p>Optional parameters should be consolidated into a dictionary,
and empty parameters should be treated identically to when the parameter is omitted.</p>
   <p class="example" id="example-8813fc13"><a class="self-link" href="#example-8813fc13"></a>For example, <code class="highlight">element<c- p>.</c->scrollIntoView<c- p>(</c-><c- kc>false</c-><c- p>,</c-> <c- p>{});</c-></code> is equivalent to <code class="highlight">element<c- p>.</c->scrollIntoView<c- p>(</c-><c- kc>false</c-><c- p>);</c-></code>,
and <code class="highlight">element<c- p>.</c->addEventListener<c- p>(</c-><c- u>"click"</c-><c- p>,</c-> onClick<c- p>,</c-> <c- kc>undefined</c-><c- p>);</c-></code> is equivalent to <code class="highlight">element<c- p>.</c->addEventListener<c- p>(</c-><c- u>"click"</c-><c- p>,</c-> onClick<c- p>)</c-></code>. </p>
   <p>Exceptions have been made for legacy interoperability reasons
(such as XMLHttpRequest),
but this should be considered a design mistake rather than recommended practice.</p>
   <h3 class="heading settled" data-level="5.5" id="constructors"><span class="secno">5.5. </span><span class="content">Classes should have constructors when possible</span><a class="self-link" href="#constructors"></a></h3>
   <p>By default, <a data-link-type="biblio" href="#biblio-webidl">[WEBIDL]</a> interfaces are reified in JavaScript as "non-constructible" classes: trying
to create instances of them using the normal pattern in JavaScript, <code>new X()</code>, will throw a <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror">TypeError</a></code>. This is a poor experience for JavaScript developers, and doesnât match the design of
most of the JavaScript standard library or of the classes JavaScript developers themselves create.</p>
   <p>From a naive perspective, itâs not even coherent: how can instances of this thing ever exist, if
they canât be constructed? The answer is that the platform has magic powers: it can create instances
of Web IDL-derived classes without ever actually calling their constructor.</p>
   <p>You should strive to reduce such magic in designing your own APIs, and give them constructors which
allow JavaScript developers to create them, just like the platform does. This means adding an
appropriate <a data-link-type="dfn" href="https://heycam.github.io/webidl/#idl-constructors" id="ref-for-idl-constructors">constructor operation</a> to your interface, and defining the algorithm for
creating new instances of your class.</p>
   <p>Apart from reducing the magic in the platform, adding constructors allows JavaScript developers to
create instances of the class for their own purposes, such as testing, mocking, or interfacing with
third-party libraries which accept instances of that class. Additionally, because of how
JavaScriptâs class design works, it is only possible to create a subclass of the class if it is
constructible.</p>
   <p>Sometimes this isnât the right answer: for example, some objects essentially wrap handles to
privileged resources, and it isnât reasonable to create some representation of that privileged
resource in JavaScript so that you can pass it to the constructor. Or the objectâs lifecycle needs
to be very carefully controlled, so that creating new ones is only possible through privileged
operations. Or the interface represents an abstract base class for which it doesnât make sense to
construct an instance, or create an author-defined subclass. But cases like these should be the
exception, not the norm.</p>
   <p class="example" id="example-6f8cdca8"><a class="self-link" href="#example-6f8cdca8"></a>The <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#event" id="ref-for-event">Event</a></code> class, and all its derived interfaces, are constructible. This
allows JavaScript developers to synthesize instances of them, which can be useful in testing or
shimming scenarios. For example, a library designed for <code class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/uievents/#mouseevent" id="ref-for-mouseevent">MouseEvent</a></code> instances can still be used
by another library that accepts as input <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/touch-events/#idl-def-touchevent" id="ref-for-idl-def-touchevent">TouchEvent</a></code> instances, by writing a small bit of adapter
code that creates synthetic <code class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/uievents/#mouseevent" id="ref-for-mouseeventâ ">MouseEvent</a></code>s.</p>
   <p class="example" id="example-520732fa"><a class="self-link" href="#example-520732fa"></a>The <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#domtokenlist" id="ref-for-domtokenlist">DOMTokenList</a></code> class is, very unfortunately, <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=27114">not constructible</a>. This prevents the
creation of <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/custom-elements.html#custom-element" id="ref-for-custom-element">custom elements</a> that expose their token list attributes as <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#domtokenlist" id="ref-for-domtokenlistâ ">DOMTokenList</a></code>s.</p>
   <p class="example" id="example-de08c31c"><a class="self-link" href="#example-de08c31c"></a>No HTML elements are constructible. This is largely due to some unfortunate
design decisions that <a href="https://github.com/whatwg/html/issues/896">would take some effort to
work around</a>. In the meantime, for the purposes of the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/custom-elements.html#customized-built-in-element" id="ref-for-customized-built-in-element">customized built-in elements</a> feature, they have been made subclassable through a specifically-designed one-off solution: the
[<code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/dom.html#htmlconstructor" id="ref-for-htmlconstructor">HTMLConstructor</a></code>] extended attribute.</p>
   <p class="example" id="example-4d1db045"><a class="self-link" href="#example-4d1db045"></a>The <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/window-object.html#window" id="ref-for-window">Window</a></code> class is not constructible, because creating a new window is a
privileged operation with significant side effects. Instead, the <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/window-object.html#dom-open" id="ref-for-dom-open">window.open()</a></code> method is used to create new windows.</p>
   <p class="example" id="example-38c742ca"><a class="self-link" href="#example-38c742ca"></a>The <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/imagebitmap-and-animations.html#imagebitmap" id="ref-for-imagebitmap">ImageBitmap</a></code> class is not constructible, as it represents an immutable,
ready-to-paint bitmap image, and the process of getting it ready to paint must be done
asynchronously. Instead, the <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/imagebitmap-and-animations.html#dom-createimagebitmap" id="ref-for-dom-createimagebitmap">createImageBitmap()</a></code> method is used to create it.</p>
   <p class="example" id="example-09c8f087"><a class="self-link" href="#example-09c8f087"></a>Several non-constructible classes, like <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/system-state.html#navigator" id="ref-for-navigator">Navigator</a></code>, <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/history.html#history-3" id="ref-for-history-3">History</a></code>, or <code class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/WebCryptoAPI/#dfn-Crypto" id="ref-for-dfn-Crypto">Crypto</a></code>, are non-constructible because they are singletons representing access to per-window
information. In these cases, the Web IDL <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-namespace" id="ref-for-dfn-namespace">namespace</a> feature or some evolution of it might have
been a better fit, but they were designed before namespaces existed, and somewhat exceed the current
capabilities of namespaces. If youâre designing a new singleton, strongly consider using a <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-namespace" id="ref-for-dfn-namespaceâ ">namespace</a> instead of a non-constructible class; if namespaces donât yet have enough
capabilities, <a href="https://github.com/heycam/webidl/issues/new">file an issue on Web IDL</a> to
discuss.</p>
   <div class="note" role="note">
    <p>For any JavaScript developers still incredulous that it is possible to create an instance of
    a non-constructible class, we provide the following code example:</p>
<pre class="highlight"><c- kr>const</c-> secret <c- o>=</c-> <c- p>{};</c->

<c- kr>class</c-> NonConstructible <c- p>{</c->
    constructor<c- p>(</c->theSecret <c- o>=</c-> <c- kc>undefined</c-><c- p>)</c-> <c- p>{</c->
        <c- k>if</c-> <c- p>(</c->theSecret <c- o>!==</c-> secret<c- p>)</c-> <c- p>{</c->
            <c- k>throw</c-> <c- k>new</c-> TypeError<c- p>(</c-><c- u>"Illegal constructor."</c-><c- p>);</c->
        <c- p>}</c->

        <c- c1>// Set up the object.</c->
    <c- p>}</c->
<c- p>}</c->
</pre>
    <p>If the author of this code never exposes the <code>secret</code> variable to the outside world, they can
    reserve the ability to create instances of <code>NonConstructible</code> for themself: they can always do <code class="highlight"><c- kr>const</c-> instance <c- o>=</c-> <c- k>new</c-> NonConstructible<c- p>(</c->secret<c- p>)</c-></code>. But the outside world
    can never successfully "guess" the secret, and thus will always receive a <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerrorâ ">TypeError</a></code> when
    trying to construct an instance of <code>NonConstructible</code>.</p>
    <p>From this perspective, what browsers are doing when they create non-constructible classes
    isnât magic: itâs just very tricky. The above section is aimed at urging browsers to avoid such
    tricks (or their equivalents in C++/Rust/etc.) whenever reasonable.</p>
   </div>
   <h3 class="heading settled" data-level="5.6" id="promises"><span class="secno">5.6. </span><span class="content">Design asynchronous APIs using Promises</span><a class="self-link" href="#promises"></a></h3>
   <p>Asynchronous APIs should generally be designed using promises
rather than callback functions.
This is the pattern that weâve settled on for the Web platform,
and having APIs consistently use promises means that the APIs are
easier to use together (such as by chaining promises).
This pattern also tends to produce cleaner code than the use
of APIs with callback functions.</p>
   <p>Furthermore, you should carefully consider whether an API might need
to be asynchronous before making it a synchronous API.
An API might need to be asynchronous if:</p>
   <ul>
    <li data-md>
     <p>some implementations may (in at least some cases) wish to prompt the user
or ask the user for permission before allowing use of the API,</p>
    <li data-md>
     <p>implementations may need to consider information that might be stored
on disk in order to compute the result,</p>
    <li data-md>
     <p>implementations may need to interact with the network before returning
the result, or</p>
    <li data-md>
     <p>implementations may wish to do work on another thread or in another
process before returning the result.</p>
   </ul>
   <p>For more information on how to design APIs using promises,
and on when to use promises and when not to use promises,
see <strong><a href="https://www.w3.org/2001/tag/doc/promises-guide">Writing
Promise-Using Specifications</a></strong>.</p>
   <h3 class="heading settled" data-level="5.7" id="aborting"><span class="secno">5.7. </span><span class="content">Cancel asynchronous APIs/operations using AbortSignal</span><a class="self-link" href="#aborting"></a></h3>
   <p>Async functions that need cancellation should take an <code>AbortSignal</code> as part
of an options dictionary.</p>
   <p>Example:</p>
<pre class="language-js highlight"><c- kr>const</c-> controller <c- o>=</c-> <c- k>new</c-> AbortController<c- p>();</c->
<c- kr>const</c-> signal <c- o>=</c-> controller<c- p>.</c->signal<c- p>;</c->
geolocation<c- p>.</c->read<c- p>({</c-> signal <c- p>});</c->
</pre>
   <p>Reusing the same primitive everywhere has multiplicative effects throughout
the platform. In particular, thereâs a common pattern of using a single <code>AbortSignal</code> for a bunch of ongoing operations, and then aborting them
(with the corresponding <code>AbortController</code>) when e.g. the user presses cancel,
or a single-page-app navigation occurs, or similar. So the minor extra
complexity for an individual API leads to a large reduction in complexity
when used with multiple APIs together.</p>
   <p>There might be cases where cancellation cannot be guaranteed. In these cases,
the <code>AbortController</code> can still be used because a call to <code>abort()</code> on <code>AbortController</code> is a request to abort. How you react to it depends on your spec.
Note, requestAbort() was considered in the AbortController design instead
of abort(), but the latter was chosen for brevity.</p>
   <h3 class="heading settled" data-level="5.8" id="string-constants"><span class="secno">5.8. </span><span class="content">Constants, enums, and bitmasks</span><a class="self-link" href="#string-constants"></a></h3>
   <p>In many other platforms and programming languages, constants and enums are
commonly expressed using a integer constant, sometimes in conjunction with
a bitmask mechanism.</p>
   <p>However on the Web platform, it is more common to use a string constant for
the cases where a constant is needed. This is much more inspection friendly
for both development and expressing the constant codes through a user facing
interface, and in JavaScript engines, using integers offers no significant
performance benefit over strings.</p>
   <p>Strings do not directly address the use case for bitmasks. For these cases,
you should use an object dictionary which contains the state that the
bitmask is attempting to express, as object dictionaries can then be passed
around from method to method as needed as easily as the state in a single
bitmask value.</p>
   <h2 class="heading settled" data-level="6" id="event-design"><span class="secno">6. </span><span class="content">Event Design</span><a class="self-link" href="#event-design"></a></h2>
   <h3 class="heading settled" data-level="6.1" id="one-time-events"><span class="secno">6.1. </span><span class="content">Use promises for one time events</span><a class="self-link" href="#one-time-events"></a></h3>
   <p>Follow the <a href="https://www.w3.org/2001/tag/doc/promises-guide#one-time-events">advice</a> in the <strong><a href="https://www.w3.org/2001/tag/doc/promises-guide">Writing
Promise-Using Specifications</a></strong> guideline.</p>
   <h3 class="heading settled" data-level="6.2" id="promises-and-events"><span class="secno">6.2. </span><span class="content">Events should fire before Promises resolve</span><a class="self-link" href="#promises-and-events"></a></h3>
   <p>If a Promise-based asynchronous algorithm dispatches events,
it should dispatch them before the Promise resolves,
rather than after.</p>
   <p>This guarantees that once the Promise resolves,
all effects of the algorithm have been applied.
For example, if an author changes some state
in reaction to an event which the Promise dispatches,
they can be sure that all of the state is consistentif the Promise is resolved.</p>
   <h3 class="heading settled" data-level="6.3" id="dont-invent-event-like"><span class="secno">6.3. </span><span class="content">Donât invent your own event listener-like infrastructure</span><a class="self-link" href="#dont-invent-event-like"></a></h3>
   <p>When creating an API which allows authors to start and stop a process which generates notifications,
use the existing event infrastructure to allow listening for the notifications.
Create separate API controls to start/stop the underlying process.</p>
   <div class="example" id="example-7b5eb345">
    <a class="self-link" href="#example-7b5eb345"></a> For example, the Web Bluetooth API provides a <code>startNotifications()</code> method
on the <code>BluetoothRemoteGATTCharacteristic</code> global object,
which adds the object to the "active notification context set". 
    <p>When the User Agent receives a notification from the Bluetooth device,
it fires an event at the <code>BluetoothRemoteGATTCharacteristic</code> objects
in the active notification context set.</p>
   </div>
   <p>See:</p>
   <ul>
    <li data-md>
     <p><a href="#events-are-for-notification">Â§â¯6.5 Events are for notification</a></p>
    <li data-md>
     <p><a href="#events-vs-observers">Â§â¯6.8 How to decide between Events and Observers</a></p>
    <li data-md>
     <p><a href="#state-and-subclassing">Â§â¯6.7 State and Event subclasses</a></p>
   </ul>
   <h3 class="heading settled" data-level="6.4" id="always-add-event-handlers"><span class="secno">6.4. </span><span class="content">Always add event handler attributes</span><a class="self-link" href="#always-add-event-handlers"></a></h3>
   <p>If your API adds a new event type,
add a corresponding <code>on<em>yourevent</em></code> <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes" id="ref-for-event-handler-idl-attributes">event handler IDL attribute</a> to the interface of any <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler" id="ref-for-eventhandler">EventHandler</a></code> which may handle the new event.</p>
   <p>itâs important to continue to define event handler IDL attributes because:</p>
   <ul>
    <li data-md>
     <p>they preserve consistency in the platform</p>
    <li data-md>
     <p>they enable feature-detection for the supported events (see <a href="#feature-detect">Â§â¯2.3 New features should be detectable</a>)</p>
   </ul>
   <p class="note" role="note"> For consistency, if the event needs to be handled by HTML and SVG elements,
add the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes" id="ref-for-event-handler-idl-attributesâ ">event handler IDL attributes</a> on the <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/webappapis.html#globaleventhandlers" id="ref-for-globaleventhandlers">GlobalEventHandlers</a></code> interface mixin,
instead of directly on the relevant element interface(s).
Similarly, add <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes" id="ref-for-event-handler-idl-attributesâ¡">event handler IDL attributes</a> to <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/webappapis.html#windoweventhandlers" id="ref-for-windoweventhandlers">WindowEventHandlers</a></code> rather than <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/window-object.html#window" id="ref-for-windowâ ">Window</a></code>. </p>
   <h3 class="heading settled" data-level="6.5" id="events-are-for-notification"><span class="secno">6.5. </span><span class="content">Events are for notification</span><a class="self-link" href="#events-are-for-notification"></a></h3>
   <p>Events shouldnât be used to trigger changes,
only to deliver a notification that a change has already finished happening.</p>
   <div class="example" id="example-a13474fb">
    <a class="self-link" href="#example-a13474fb"></a> When a window is resized,
an event named <code><a href="https://drafts.csswg.org/cssom-view/#eventdef-window-resize">resize</a></code> is fired at the <code>Window</code> object. 
    <p>Itâs not possible to stop the resize from happening by intercepting the event.
Nor is it possible to fire a constructed <code>resize</code> event
to cause the window to change size.
The event can only notify the author that the resize has already happened.</p>
   </div>
   <h3 class="heading settled" data-level="6.6" id="guard-against-recursion"><span class="secno">6.6. </span><span class="content">Guard against potential recursion</span><a class="self-link" href="#guard-against-recursion"></a></h3>
   <p>If your API includes a long-running or complicated algorithm,
prevent calling into the algorithm if itâs already running.</p>
   <p>If an API method causes a long-running algorithm to begin,
you should use <a href="#events-are-for-notification">events</a> to notify user code of the progress of the algorithm.
However, the user code which handles the event may call the same API method,
causing the complex algorithm to run recursively.
The same event may be fired again,
causing the same event handler to be fired, and so on.</p>
   <p>To prevent this, make sure that any "recursive" call into the API method
simply returns immediately. This technique is "guarding" the algorithm.</p>
   <div class="example" id="example-32d23c03">
    <a class="self-link" href="#example-32d23c03"></a> <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#abortsignal" id="ref-for-abortsignal">AbortSignal</a></code>'s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-add" id="ref-for-abortsignal-add">add</a>, <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-remove" id="ref-for-abortsignal-remove">remove</a> and <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-signal-abort" id="ref-for-abortsignal-signal-abort">signal abort</a> each begin with a check
of the signalâs <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-aborted-flag" id="ref-for-abortsignal-aborted-flag">aborted flag</a>.
If the flag is set, the rest of the algorithm doesnât run. 
    <p>In this case, a lot of the important complexity is
in the algorithms run during the <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-signal-abort" id="ref-for-abortsignal-signal-abortâ ">signal abort</a> steps.
These steps iterate through a collection of algorithms
which are managed by the <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-add" id="ref-for-abortsignal-addâ ">add</a> and <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-remove" id="ref-for-abortsignal-removeâ ">remove</a> methods.</p>
    <p>For example, the <a href="https://streams.spec.whatwg.org/#readable-stream-pipe-to">ReadableStreamPipeTo</a> definition <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-add" id="ref-for-abortsignal-addâ¡">add</a>s an algorithm
into the <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#abortsignal" id="ref-for-abortsignalâ ">AbortSignal</a></code>'s set of algorithms to be run
when the <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-signal-abort" id="ref-for-abortsignal-signal-abortâ¡">signal abort</a> steps are triggered,
by calling <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-abortcontroller-abort" id="ref-for-dom-abortcontroller-abort">abort()</a></code> on the <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#abortcontroller" id="ref-for-abortcontroller">AbortController</a></code> associated with the signal.</p>
    <p>This algorithm is likely to resolve promises causing code to run,
which may include attempting to call any of the methods on <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#abortsignal" id="ref-for-abortsignalâ¡">AbortSignal</a></code>.
Since <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-signal-abort" id="ref-for-abortsignal-signal-abortâ¢">signal abort</a> involves iterating through the collection of algorithms,
it should not be possible to modify that collection while itâs running.</p>
    <p>And since <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-signal-abort" id="ref-for-abortsignal-signal-abortâ£">signal abort</a> would have triggered the code which caused
the recursive call back in to <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-signal-abort" id="ref-for-abortsignal-signal-abortâ¤">signal abort</a>,
itâs important to avoid running these steps again
if the signal is already in the process of the <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#abortsignal-signal-abort" id="ref-for-abortsignal-signal-abortâ¥">signal abort</a> steps,
to avoid recursion.</p>
   </div>
   <p class="note" role="note"><span>Note:</span> A caution about early termination:
if the algorithm being terminated
would go on to ensure some critical state consistency,
be sure to also make the relevant adjustments in state
before early termination of the algorithm.
Not doing so can lead to inconsistent state
and end-user-visible bugs when implemented as-specified.</p>
   <p class="note" role="note"><span>Note:</span> Be cautious about throwing exceptions in early termination.
Keep in mind the scenario in which developers will be invoking the algorithm,
and whether they would reasonably expect to handle an exception
in this [perhaps rare] case.
For example, will this be the only exception in the algorithm?</p>
   <p>You wonât always be able to "guard" in this way.
For example, an algorithm may have too many entry-points to reliably check all of them.
If thatâs the case,
another option is to defer calling the author code
to a later task or microtask.
This avoids a stack of recursion,
but canât avoid the risk of an endless loop of follow-up tasks.</p>
   <p>Deferring an event is often specified as "<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task" id="ref-for-queue-a-taskâ ">queue a task</a> to <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire" id="ref-for-concept-event-fire">fire an event</a>...".</p>
   <p>You should always defer events
if the algorithm that triggers the event could be running
on a different thread or process.
In this case, deferral ensures the events
can be processed on the correct task in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#task-queue" id="ref-for-task-queue">task queue</a>.</p>
   <p>Both the "guarding" and the "deferring" approach have trade-offs.</p>
   <p>"Guarding" an algorithm guarantees:</p>
   <ul>
    <li data-md>
     <p>at the time events are fired,
there is no chance that the state may have changed
between the guarded algorithm ending and the event firing.</p>
    <li data-md>
     <p>events fired during the algorithm,
such as events to notify user code of a state change made as part of the algorithm,
can be fired immediately,
notifying code of the change without needing to wait for the next task.</p>
    <li data-md>
     <p>user code running in the event handler can observe relevant state directly
on the instance object they were fired on,
rather than needing to be given a copy of the relevant state with the event.</p>
   </ul>
   <p>If the events are deferred instead:</p>
   <ul>
    <li data-md>
     <p>there is no guarantee that they will be first in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#task-queue" id="ref-for-task-queueâ ">task queue</a> once the algorithm completes.</p>
    <li data-md>
     <p>any other task may change the objectâs state
you should include any state relevant to the event with the deferred event.</p>
     <ul>
      <li data-md>
       <p>This usually involves a new subclass of <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#event" id="ref-for-eventâ ">Event</a></code>,
with new attributes to hold the state.</p>
       <p>For example, the <code class="idl"><a data-link-type="idl" href="https://xhr.spec.whatwg.org/#progressevent" id="ref-for-progressevent">ProgressEvent</a></code> adds <code class="idl"><a data-link-type="idl" href="https://xhr.spec.whatwg.org/#dom-progressevent-loaded" id="ref-for-dom-progressevent-loaded">loaded</a></code>, <code class="idl"><a data-link-type="idl" href="https://xhr.spec.whatwg.org/#dom-progressevent-total" id="ref-for-dom-progressevent-total">total</a></code>, etc. attributes to hold the state.</p>
     </ul>
    <li data-md>
     <p>if different parts of an algorithm need to coordinate,
you may need to define an explicit state machine (well-defined state transitions)
to ensure that when a deferred event fires,
the behavior of inspecting or changing state is well-defined.</p>
     <p>For example, in <a data-link-type="biblio" href="#biblio-payment-request">[payment-request]</a>,
the <code class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#dom-paymentrequest" id="ref-for-dom-paymentrequest">PaymentRequest</a></code>'s <a data-link-type="dfn" href="https://www.w3.org/TR/payment-request/#dfn-state" id="ref-for-dfn-state">[[state]]</a> internal slot
explicitly tracks the objectâs state
through its well-defined transitions.</p>
     <ul>
      <li data-md>
       <p>These state transitions often use the guarding technique themselves,
 to ensure the state transitions happen appropriately.</p>
       <p>For example, in <a data-link-type="biblio" href="#biblio-payment-request">[payment-request]</a> note the guards used around the <a data-link-type="dfn" href="https://www.w3.org/TR/payment-request/#dfn-state" id="ref-for-dfn-stateâ ">[[state]]</a> internal slot,
 such as in the <code class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/payment-request/#dom-merchantvalidationevent-complete" id="ref-for-dom-merchantvalidationevent-complete">complete()</a></code> algorithm.</p>
     </ul>
    <li data-md>
     <p>if the deferred event doesnât need extra state,
or a state machine,
this probably means that the event is just signalling the completion of the algorithm.
If this is true, the API should probably return a <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-promise" id="ref-for-idl-promise">Promise</a></code> instead of firint the event.
See <a href="#one-time-events">Â§â¯6.1 Use promises for one time events</a>.</p>
   </ul>
   <p class="note" role="note"><span>Note:</span> events that expose the possibility of recursion as described in this section
were sometimes called "synchronous events".
This terminology is discouraged
as it implies that itâs possible to dispatch an event asynchronously.
All events are dispatched synchronously.
What is more often implied by "asynchronous event" is to defer firing an event.</p>
   <h3 class="heading settled" data-level="6.7" id="state-and-subclassing"><span class="secno">6.7. </span><span class="content">State and <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#event" id="ref-for-eventâ¡">Event</a></code> subclasses</span><a class="self-link" href="#state-and-subclassing"></a></h3>
   <p>Where possible, use a plain <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#event" id="ref-for-eventâ¢">Event</a></code> with a specified <code>type</code>,
and capture any state information in the <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-target" id="ref-for-dom-event-target">target</a></code> object.</p>
   <p>Itâs usually not necessary to create new subclasses of <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#event" id="ref-for-eventâ£">Event</a></code>.</p>
   <h3 class="heading settled" data-level="6.8" id="events-vs-observers"><span class="secno">6.8. </span><span class="content">How to decide between Events and Observers</span><a class="self-link" href="#events-vs-observers"></a></h3>
   <p>In general, use <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#eventtarget" id="ref-for-eventtarget">EventTarget</a></code> and notification <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#event" id="ref-for-eventâ¤">Event</a></code>s,
rather than an Observer pattern,
unless an <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#eventtarget" id="ref-for-eventtargetâ ">EventTarget</a></code> canât work well for your feature.</p>
   <p>Using an <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#eventtarget" id="ref-for-eventtargetâ¡">EventTarget</a></code> ensures your feature benefits from
improvements to the shared base class,
such as the addition of the <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-addeventlisteneroptions-once" id="ref-for-dom-addeventlisteneroptions-once">once</a></code>.</p>
   <p>If using events causes problems,
such as unavoidable <a href="#guard-against-recursion">recursion</a>,
consider using an Observer pattern instead.</p>
   <p><code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#mutationobserver" id="ref-for-mutationobserver">MutationObserver</a></code>, <a href="https://w3c.github.io/IntersectionObserver">Intersection Observer</a>, <a href="https://drafts.csswg.org/resize-observer/#resize-observer-interface">Resize Observers</a>,
and <a href="https://github.com/WICG/indexed-db-observers">IndexedDB Observers</a> are all examples of an Observer pattern.</p>
   <div class="example" id="example-5d14c000">
    <a class="self-link" href="#example-5d14c000"></a> <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#mutationobserver" id="ref-for-mutationobserverâ ">MutationObserver</a></code> replaced the deprecated <a href="https://www.w3.org/TR/DOM-Level-3-Events/#events-mutationevents">DOM Mutation Events</a> after developers <a href="https://lists.w3.org/Archives/Public/public-webapps/2011JulSep/0779.html">noticed</a> that DOM Mutation Events 
    <ul>
     <li data-md>
      <p>fire too often</p>
     <li data-md>
      <p>donât benefit from event propagation, which makes them too slow to be useful</p>
     <li data-md>
      <p>cause <a href="#guard-against-recursion">recursion</a> which is too difficult to guard against.</p>
    </ul>
    <p>Mutation Observers:</p>
    <ul>
     <li data-md>
      <p>can batch up mutations to be sent to observers
after mutations have finished being applied;</p>
     <li data-md>
      <p>donât need to go through event capture and bubbling phases;</p>
     <li data-md>
      <p>provide a richer API for expressing what mutations have occurred.</p>
    </ul>
    <p class="note" role="note"><span>Note:</span> Events can also batch up notifications,
but DOM Mutation Events were not designed to do this.
Events donât always need to participate in event propagation,
but events on DOM Nodes usually do.</p>
   </div>
   <p>The Observer pattern works like this:</p>
   <ul>
    <li data-md>
     <p>Each instance of the Observer class
is constructed with a callback,
and optionally with some options to customize what should be observed.</p>
    <li data-md>
     <p>Instances begin observing specific targets,
using a method named <code>observe()</code>,
which takes a reference to the target to be observed.
The options to customize what should be observed
may be provided here instead of to the constructor.
The callback provided in the constructor is invoked
when something interesting happens to those targets.</p>
    <li data-md>
     <p>Callbacks receive <em>change records</em> as arguments.
These records contain the details
about the interesting thing that happened.
Multiple records can be delivered at once.</p>
    <li data-md>
     <p>The author may stop observing by calling a method called <code>unobserve()</code> or <code>disconnect()</code> on the Observer instance.</p>
    <li data-md>
     <p>Optionally, a method may be provided to immediately return records
for all observed-but-not-yet-delivered occurrences.</p>
   </ul>
   <div class="example" id="example-f8835767">
    <a class="self-link" href="#example-f8835767"></a> <a href="https://w3c.github.io/IntersectionObserver"><code>IntersectionObserver</code></a> may be used like this: 
<pre class="highlight"><c- a>function</c-> checkElementStillVisible<c- p>(</c->element<c- p>,</c-> observer<c- p>)</c-> <c- p>{</c->
    <c- k>delete</c-> element<c- p>.</c->visibleTimeout<c- p>;</c->

    <c- c1>// Process any observations which may still be on the task queue</c->
    processChanges<c- p>(</c->observer<c- p>.</c->takeRecords<c- p>());</c->

    <c- k>if</c-> <c- p>(</c-><c- t>'isVisible'</c-> <c- k>in</c-> element<c- p>)</c-> <c- p>{</c->
        <c- k>delete</c-> element<c- p>.</c->isVisible<c- p>;</c->
        logAdImpressionToServer<c- p>();</c->

        <c- c1>// Stop observing this element</c->
        observer<c- p>.</c->unobserve<c- p>(</c->element<c- p>);</c->
    <c- p>}</c->
<c- p>}</c->

<c- a>function</c-> processChanges<c- p>(</c->changes<c- p>)</c-> <c- p>{</c->
    changes<c- p>.</c->forEach<c- p>(</c-><c- a>function</c-><c- p>(</c->changeRecord<c- p>)</c-> <c- p>{</c->
        <c- a>var</c-> element <c- o>=</c-> changeRecord<c- p>.</c->target<c- p>;</c->
        element<c- p>.</c->isVisible <c- o>=</c-> isVisible<c- p>(</c->changeRecord<c- p>.</c->boundingClientRect<c- p>,</c->
                                      changeRecord<c- p>.</c->intersectionRect<c- p>);</c->
        <c- k>if</c-> <c- p>(</c-><c- t>'isVisible'</c-> <c- k>in</c-> element<c- p>)</c-> <c- p>{</c->
            <c- c1>// Element became visible</c->
            element<c- p>.</c->visibleTimeout <c- o>=</c-> setTimeout<c- p>(()</c-> <c- p>=></c-> <c- p>{</c->
                checkElementStillVisible<c- p>(</c->element<c- p>,</c-> observer<c- p>);</c->
            <c- p>},</c-> <c- mi>1000</c-><c- p>);</c->
        <c- p>}</c-> <c- k>else</c-> <c- p>{</c->
            <c- c1>// Element became hidden</c->
            <c- k>if</c-> <c- p>(</c-><c- t>'visibleTimeout'</c-> <c- k>in</c-> element<c- p>)</c-> <c- p>{</c->
                clearTimeout<c- p>(</c->element<c- p>.</c->visibleTimeout<c- p>);</c->
                <c- k>delete</c-> element<c- p>.</c->visibleTimeout<c- p>;</c->
            <c- p>}</c->
        <c- p>}</c->
    <c- p>});</c->
<c- p>}</c->

<c- c1>// Create IntersectionObserver with callback and options</c->
<c- a>var</c-> observer <c- o>=</c-> <c- k>new</c-> IntersectionObserver<c- p>(</c->processChanges<c- p>,</c->
                                        <c- p>{</c-> threshold<c- o>:</c-> <c- p>[</c-><c- mf>0.5</c-><c- p>]</c-> <c- p>});</c->

<c- c1>// Begin observing "ad" element</c->
<c- a>var</c-> ad <c- o>=</c-> document<c- p>.</c->querySelector<c- p>(</c-><c- t>'#ad'</c-><c- p>);</c->
observer<c- p>.</c->observe<c- p>(</c->ad<c- p>);</c->
</pre>
    <p>(Example code adapted from <a href="https://github.com/w3c/IntersectionObserver/blob/master/explainer.md">the <code>IntersectionObserver</code> explainer</a>.)</p>
   </div>
   <p>To use the Observer pattern, you need to define:</p>
   <ol>
    <li data-md>
     <p>the new Observer object type,</p>
    <li data-md>
     <p>an object type for observation options, and</p>
    <li data-md>
     <p>an object type for the records to be observed.</p>
   </ol>
   <p>The trade-off for this extra work is the following advantages:</p>
   <ul>
    <li data-md>
     <p>Instances can be customized at observation time, or at creation time.
The constructor for an <code>Observer</code>,
or its <code>observe()</code> method,
can take options allowing authors to customize what is observered for each callback.
This isnât possible with <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-eventtarget-addeventlistener" id="ref-for-dom-eventtarget-addeventlistener">addEventListener()</a></code>.</p>
    <li data-md>
     <p>Itâs easy to stop listening on multiple callbacks using the <code>disconnect()</code> or <code>unobserve()</code> method on the <code>Observer</code> object.</p>
    <li data-md>
     <p>You have the option to provide a method like <code>takeRecords()</code>,
which immediately fetches the relevant data,
instead of waiting for an event to fire.</p>
    <li data-md>
     <p>Because Observers are single-purpose, you donât need to specify an event type.</p>
   </ul>
   <p><code>Observer</code>s and <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#eventtarget" id="ref-for-eventtargetâ¢">EventTarget</a></code>s have these things in common:</p>
   <ul>
    <li data-md>
     <p>Both can be customized at creation time.</p>
    <li data-md>
     <p>Both can batch occurrences and deliver them at any time. <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#eventtarget" id="ref-for-eventtargetâ£">EventTarget</a></code>s donât need to be synchronous;
they can use microtask timing, idle timing, animation-frame timing, etc.
You donât need an <code>Observer</code> to get special timing or batching.</p>
    <li data-md>
     <p>Neither <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#eventtarget" id="ref-for-eventtargetâ¤">EventTarget</a></code>s nor <code>Observer</code>s need to participate in a DOM tree
(bubbling/capture and cancellation).
Most prominent <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#eventtarget" id="ref-for-eventtargetâ¥">EventTarget</a></code>s are <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#node" id="ref-for-node">Node</a></code>s in the DOM tree,
but many other events are standalone;
for example, <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/IndexedDB/#idbdatabase" id="ref-for-idbdatabase">IDBDatabase</a></code> and <code class="idl"><a data-link-type="idl" href="https://xhr.spec.whatwg.org/#xmlhttprequesteventtarget" id="ref-for-xmlhttprequesteventtarget">XMLHttpRequestEventTarget</a></code>.
Even when using <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#node" id="ref-for-nodeâ ">Node</a></code>s,
your events may be designed to be non-bubbling and non-cancelable.</p>
   </ul>
   <div class="example" id="example-211011c7">
    <a class="self-link" href="#example-211011c7"></a> Here is an example of using a hypothetical version of <code class="idl"><a data-link-type="idl" href="#https://w3c.github.io/IntersectionObserver/" id="ref-for-https://w3c.github.io/IntersectionObserver/">IntersectionObserver</a></code> thatâs an <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#eventtarget" id="ref-for-eventtargetâ¦">EventTarget</a></code> subclass: 
<pre class="highlight"><c- kr>const</c-> io <c- o>=</c-> <c- k>new</c-> ETIntersectionObserver<c- p>(</c->element<c- p>,</c-> <c- p>{</c-> root<c- p>,</c-> rootMargin<c- p>,</c-> threshold <c- p>});</c->

<c- a>function</c-> listener<c- p>(</c->e<c- p>)</c-> <c- p>{</c->
    <c- k>for</c-> <c- p>(</c-><c- kr>const</c-> change <c- k>of</c-> e<c- p>.</c->changes<c- p>)</c-> <c- p>{</c->
        <c- c1>// ...</c->
    <c- p>}</c->
<c- p>}</c->

io<c- p>.</c->addEventListener<c- p>(</c-><c- u>"intersect"</c-><c- p>,</c-> listener<c- p>);</c->
io<c- p>.</c->removeEventListener<c- p>(</c-><c- u>"intersect"</c-><c- p>,</c-> listener<c- p>);</c->
</pre>
    <p>Compared to the <code>Observer</code> version:</p>
    <ul>
     <li data-md>
      <p>itâs more difficult to observe multiple elements with the same options;</p>
     <li data-md>
      <p>there is no way to request data immediately;</p>
     <li data-md>
      <p>itâs more work to remove multiple event listeners for the same event;</p>
     <li data-md>
      <p>the author has to provide a redundant <code>"intersect"</code> event type.</p>
    </ul>
    <p>In common with the <code>Observer</code> version:</p>
    <ul>
     <li data-md>
      <p>it can still do batching;</p>
     <li data-md>
      <p>it has the same timing (based on the JavaScript event queue);</p>
     <li data-md>
      <p>authors can still customize what to listen for; and</p>
     <li data-md>
      <p>events donât go through capture or bubbling.</p>
    </ul>
    <p>These aspects can be achieved with either design.</p>
   </div>
   <p>See also:</p>
   <ul>
    <li data-md>
     <p><a href="#events-are-for-notification">Â§â¯6.5 Events are for notification</a></p>
    <li data-md>
     <p><a href="#state-and-subclassing">Â§â¯6.7 State and Event subclasses</a></p>
   </ul>
   <h2 class="heading settled" data-level="7" id="types-and-units"><span class="secno">7. </span><span class="content">Web IDL, Types, and Units</span><a class="self-link" href="#types-and-units"></a></h2>
   <h3 class="heading settled" data-level="7.1" id="numeric-types"><span class="secno">7.1. </span><span class="content">Use numeric types appropriately</span><a class="self-link" href="#numeric-types"></a></h3>
   <p>If an API youâre designing uses numbers,
use one of the following <a data-link-type="biblio" href="#biblio-webidl">[WEBIDL]</a> numeric types,
unless there is a specific reason not to:</p>
   <dl>
    <dt data-md><code>unrestricted double</code>
    <dd data-md>
     <p>Any JavaScript number, including infinities and NaN</p>
    <dt data-md><code>double</code>
    <dd data-md>
     <p>Any JavaScript number, excluding infinities and NaN</p>
    <dt data-md><code>[EnforceRange] long long</code>
    <dd data-md>
     <p>Any JavaScript number from -2<sup>63</sup> to 2<sup>63</sup>,
 rounded to the nearest integer.
 If a number outside this range is given,
 the generated bindings will throw a <code class="highlight">TypeError</code>.</p>
    <dt data-md><code>[EnforceRange] unsigned long long</code>
    <dd data-md>
     <p>Any JavaScript number from 0 to 2<sup>64</sup>,
 rounded to the nearest integer.
 If a number outside this range is given,
 the generated bindings will throw a <code class="highlight">TypeError</code>.</p>
   </dl>
   <p>JavaScript has only one numeric type, <code>Number</code>:
IEEE 754 double-precision floating point, including Â±0, Â±Infinity, and NaN. <a data-link-type="biblio" href="#biblio-webidl">[WEBIDL]</a> numeric types represent
rules for modifying any JavaScript number
to belong to a subset with particular properties.
These rules are run when a number is passed to the interface defined in IDL,
whether a method or a property setter.</p>
   <p>If you have extra rules which need to be applied to the number,
you can specify those in your algorithm.</p>
   <div class="note" role="note">
     The <a href="https://heycam.github.io/webidl/#es-integer-types">WEBIDL rules</a> for converting a JavaScript number to a number with fewer bits,
such as an <code>octet</code> (8 bits, in the range [0, 255]),
involves taking the modulo of the JavaScript number.
For example, to convert a JavaScript number value of 300
to an <code>octet</code>,
the bindings will first compute 300 modulo 255,
so the resulting number will be 45,
which might be surprising. 
    <p>Instead, you can use <code><a href="https://heycam.github.io/webidl/#EnforceRange">[EnforceRange]</a> octet</code> to throw a <code>TypeError</code> for values outside of the <code>octet</code> range,
or <code><a href="https://heycam.github.io/webidl/#Clamp">[Clamp]</a> octet</code> to clamp values to the octet range (for example, converting 300 to 255).</p>
    <p>This also works for the other shorter types, such as <code>short</code> or <code>long</code>.</p>
   </div>
   <p><code>bigint</code> should be used only when values greater than 2<sup>53</sup> or less than -2<sup>53</sup> are expected.</p>
   <p>An API should not support both <code>BigInt</code> and <code>Number</code> simultaneously,
either by supporting both types via polymorphism,
or by adding separate, otherwise identical APIs which take <code>BigInt</code> and <code>Number</code>.
This risks losing precision through implicit conversions,
which defeats the purpose of <code>BigInt</code>.</p>
   <h3 class="heading settled" data-level="7.2" id="idl-string-types"><span class="secno">7.2. </span><span class="content">Represent strings appropriately</span><a class="self-link" href="#idl-string-types"></a></h3>
   <p>When designing a web platform feature which operates on <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string">strings</a>,
use <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-DOMString" id="ref-for-idl-DOMString">DOMString</a></code> unless you have a specific reason not to.</p>
   <p>Most string operations donât need
to interpret the <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#code-unit" id="ref-for-code-unit">code units</a> inside of the string,
so <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-DOMString" id="ref-for-idl-DOMStringâ ">DOMString</a></code> is the best choice.
In the specific cases explained below, it might be appropriate to use either <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString">USVString</a></code> or <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-ByteString" id="ref-for-idl-ByteString">ByteString</a></code> instead. <a data-link-type="biblio" href="#biblio-infra">[INFRA]</a> <a data-link-type="biblio" href="#biblio-webidl">[WEBIDL]</a></p>
   <p><code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVStringâ ">USVString</a></code> is the Web IDL type that represents <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#scalar-value-string" id="ref-for-scalar-value-string">scalar value strings</a>.
For strings whose most common algorithms operate on <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#scalar-value" id="ref-for-scalar-value">scalar values</a> (such as <a data-link-type="abstract-op" href="https://url.spec.whatwg.org/#percent-encode" id="ref-for-percent-encode">percent-encoding</a>),
or for operations which canât handle <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#surrogate" id="ref-for-surrogate">surrogates</a> in input
(such as APIs that pass strings through to native platform APIs), <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVStringâ¡">USVString</a></code> should be used.</p>
   <p class="example" id="example-fe96b598"><a class="self-link" href="#example-fe96b598"></a> <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/common-dom-interfaces.html#reflect" id="ref-for-reflect">Reflecting IDL attributes</a> whose content attribute is defined to contain a <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url" id="ref-for-concept-url">URL</a> (such as <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/links.html#attr-hyperlink-href" id="ref-for-attr-hyperlink-href">href</a></code>)
should use <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVStringâ¢">USVString</a></code>. <a data-link-type="biblio" href="#biblio-html">[HTML]</a> </p>
   <p><code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-ByteString" id="ref-for-idl-ByteStringâ ">ByteString</a></code> should only be used for representing
data from protocols like HTTP
which donât distinguish between bytes and strings.
It isnât a general-purpose string type.
If you need to represent a <a data-link-type="dfn" href="https://heycam.github.io/webidl/#sequence-type" id="ref-for-sequence-type">sequence</a> of <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-byte" id="ref-for-idl-byte">bytes</a></code>,
use <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-Uint8Array" id="ref-for-idl-Uint8Array">Uint8Array</a></code>.</p>
   <h3 class="heading settled" data-level="7.3" id="milliseconds"><span class="secno">7.3. </span><span class="content">Use milliseconds for time measurement</span><a class="self-link" href="#milliseconds"></a></h3>
   <p>If you are designing an API that accepts a time measurement,
express the time measurement in milliseconds.</p>
   <p>Even if seconds (or some other time unit) are more natural in the domain of an API,
sticking with milliseconds ensures that APIs
are interoperable with one another.
This means that authors donât need to convert values used in one API
to be used in another API,
or keep track of which time unit is needed where.</p>
   <p>This convention began with <code class="highlight">setTimeout</code> and the <code class="highlight">Date</code> API,
and has been used since then.</p>
   <p class="note" role="note"><span>Note:</span> high-resolution time is usually represented as fractional milliseconds
using a floating point value,
not as an integer value of a smaller time unit like nanoseconds.</p>
   <h3 class="heading settled" data-level="7.4" id="times-and-dates"><span class="secno">7.4. </span><span class="content">Use the appropriate type to represent times and dates</span><a class="self-link" href="#times-and-dates"></a></h3>
   <p>When representing date-times on the platform, use the <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#DOMTimeStamp" id="ref-for-DOMTimeStamp">DOMTimeStamp</a></code> type.
Use <code class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/hr-time-2/#dom-domhighrestimestamp" id="ref-for-dom-domhighrestimestamp">DOMHighResTimeStamp</a></code> if authors
must always be able to compare timestamps,
regardless of the userâs time settings.</p>
   <p>Donât use the JavaScript <code class="highlight">Date</code> class for representing
specific date-time values. <code class="highlight">Date</code> objects are mutable (may have their value changed),
and there is no way to make them immutable.</p>
   <div class="note" role="note">
     For more background on why <code class="highlight">Date</code> must not be used,
    see the following: 
    <ul>
     <li data-md>
      <p><a href="https://esdiscuss.org/topic/frozen-date-objects">Frozen date objects?</a> on
es-discuss</p>
     <li data-md>
      <p><a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=22824">Remove Date from Web IDL</a> on the Web IDL Bugzilla</p>
    </ul>
   </div>
   <p><code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#DOMTimeStamp" id="ref-for-DOMTimeStampâ ">DOMTimeStamp</a></code> values represent
the number of milliseconds since 1970-01-01T00:00:00Z.
They are derived from the systemâs clock,
which may be changed by the user,
or automatically for things like time zone updates
or daylight savings.
This means that, in practice, a <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#DOMTimeStamp" id="ref-for-DOMTimeStampâ¡">DOMTimeStamp</a></code> created later in real time
may have a lower value than a <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#DOMTimeStamp" id="ref-for-DOMTimeStampâ¢">DOMTimeStamp</a></code> created earlier.
Also, if two <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#DOMTimeStamp" id="ref-for-DOMTimeStampâ£">DOMTimeStamp</a></code>s are created within the same millisecond,
thereâs no way to know which was created earlier.</p>
   <p>So, if a date-time is only used to compare timing of events,
and not to show a formatted date-time value to the user,
consider using <code class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/hr-time-2/#dom-domhighrestimestamp" id="ref-for-dom-domhighrestimestampâ ">DOMHighResTimeStamp</a></code> instead.
See <a data-link-type="biblio" href="#biblio-highres-time">[HIGHRES-TIME]</a> for more details.</p>
   <h3 class="heading settled" data-level="7.5" id="error-types"><span class="secno">7.5. </span><span class="content">Use Error or DOMException for errors</span><a class="self-link" href="#error-types"></a></h3>
   <p>Represent errors in web APIs as ECMAScript error objects (e.g., <code class="idl"><a data-link-type="idl" href="https://tc39.github.io/ecma262/#sec-error-objects" id="ref-for-sec-error-objects">Error</a></code>)
or as <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-DOMException" id="ref-for-idl-DOMException">DOMException</a></code>.
whether they are exceptions, promise rejection values, or properties.</p>
   <h2 class="heading settled" data-level="8" id="device-apis"><span class="secno">8. </span><span class="content">OS and Device Wrapper APIs</span><a class="self-link" href="#device-apis"></a></h2>
   <p>New APIs are now being developed in the web platform for interacting with devices.
For example, authors wish to be able to use the web to connect with their <a href="https://www.w3.org/TR/mediacapture-streams/">microphones and cameras</a>, <a href="https://www.w3.org/TR/generic-sensor/">generic sensors</a> (such as gyroscope and
accelerometer), <a href="https://www.w3.org/community/web-bluetooth/">Bluetooth</a> and <a href="https://wicg.github.io/webusb/">USB</a>-connected peripherals, <a href="https://www.w3.org/community/autowebplatform/">automobiles</a>, etc.</p>
   <p>These can be functionality provided by the underlying operating system,
or provided by a native third-party library
to interact with a device.
These are an abstraction which "wrap" the native functionality
without introducing significant complexity,
while securing the API surface to the browser.
So, these are called wrapper APIs.</p>
   <p>This section contains principles for consideration when designing APIs for devices.</p>
   <h3 class="heading settled" data-level="8.1" id="device-ids"><span class="secno">8.1. </span><span class="content">Use care when exposing identifying information about devices</span><a class="self-link" href="#device-ids"></a></h3>
   <p>If you need to give web sites access to information about a device,
use the guidelines below to decide what information to expose.</p>
   <p>Firstly, think carefully about whether it is really necessary
to expose identifying information about the device at all.
Consider whether your <a href="#priority-of-constituencies">user needs</a> could be satisfied
by a less powerful API.</p>
   <p>Exposing the presence of a device,
additional information about a device,
or device identifiers,
each increase the risk of harming the userâs privacy.</p>
   <p>One risk is that as more specific information is shared,
the set of <a href="https://www.w3.org/TR/fingerprinting-guidance/">fingerprinting data</a> available to sites gets larger.
There are also <a href="https://w3cping.github.io/privacy-threat-model/">other potential risks</a> to user privacy.</p>
   <p class="issue" id="issue-70c97a29"><a class="self-link" href="#issue-70c97a29"></a> Privacy Threat Model is not ready for prime time.</p>
   <p>If there is no way to design a less powerful API,
use these guidelines when exposing device information:</p>
   <dl>
    <dt data-md>Limit information in the id
    <dd data-md>
     <p>Include as little identifiable information as possible
in device ids exposed to the web plaform.
Identifiable information includes
branding, make and model numbers, etc
You can usually use a random number
or a unique id instead.
Make sure that your ids arenât guessable,
and arenât re-used.</p>
    <dt data-md>Keep the user in control
    <dd data-md>
     <p>When the user chooses to clear browsing data,
make sure any stored device ids are cleared.</p>
    <dt data-md>Hide sensitive ids behind a user permission
    <dd data-md>
     <p>If you canât create a device id in an anonymous way,
limit access to it.
Make sure the user can provide <a href="#consent">meaningful consent</a> to a Web page accessing this information.</p>
    <dt data-md>Tie ids to the same-origin model
    <dd data-md>
     <p>Create distinct unique ids for the same physical device
for each origin that has has access to it.</p>
    <dd data-md>
     <p>If the same device is requested more than once
by the same origin, return the same id for it
(unless the user has cleared their browsing data).
This allows authors to avoid having
several copies of the same device.</p>
    <dt data-md>Persistable when necessary
    <dd data-md>
     <p>If a device id is time consuming to obtain,
make sure authors can store an id generated in one session
for use in a later session.
You can do this by making sure that
the procedure to generate the id
consistently produces the same id
for the same device,
for each origin.</p>
   </dl>
   <p>See also:</p>
   <ul>
    <li data-md>
     <p><a data-link-type="biblio" href="#biblio-least-power">[LEAST-POWER]</a></p>
    <li data-md>
     <p><a data-link-type="biblio" href="#biblio-fingerprinting-guidance">[FINGERPRINTING-GUIDANCE]</a></p>
    <li data-md>
     <p><a data-link-type="biblio" href="#biblio-unsanctioned-tracking">[UNSANCTIONED-TRACKING]</a></p>
   </ul>
   <h3 class="heading settled" data-level="8.2" id="device-enumeration"><span class="secno">8.2. </span><span class="content">Use care when exposing APIs for selecting or enumerating devices</span><a class="self-link" href="#device-enumeration"></a></h3>
   <p>Look for ways to avoid enumerating devices.
If you canât avoid it, expose the least information possible.</p>
   <p>If an API exposes the the existence, capabilities, or identifiers of more than one device,
all of the risks in <a href="#device-ids">Â§â¯8.1 Use care when exposing identifying information about devices</a> are multiplied by the number of devices.
For the same reasons,
consider whether your <a href="#priority-of-constituencies">user needs</a> could be satisfied
by a less powerful API. <a data-link-type="biblio" href="#biblio-least-power">[LEAST-POWER]</a></p>
   <p>If the purpose of the API
is to enable the user <strong>to select a device</strong> from the set of available devices of a particular kind,
you may not need to expose a list to script at all.
An API which invokes a User-Agent-provided device picker could suffice.
Such an API:</p>
   <ul>
    <li data-md>
     <p>keeps the user in control,</p>
    <li data-md>
     <p>doesnât expose any device information without the userâs <a href="#consent">consent</a>,</p>
    <li data-md>
     <p>doesnât expose any fingerprinting data about the userâs environment by default, and</p>
    <li data-md>
     <p>only exposes information about one device at a time.</p>
   </ul>
   <p>When designing API which allows users to select a device,
it may be necessary to also expose
the fact that there are devices are available to be picked.
This does expose one bit of fingerprinting data about the userâs environment
to websites,
so it isnât quite as safe as an API which doesnât have such a feature.</p>
   <div class="example" id="example-e2381236">
    <a class="self-link" href="#example-e2381236"></a> The <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/remote-playback/#remoteplayback-interface" id="ref-for-remoteplayback-interface">RemotePlayback</a></code> interface
doesnât expose a list of available <a data-link-type="dfn" href="https://w3c.github.io/remote-playback/#dfn-remote-playback-devices" id="ref-for-dfn-remote-playback-devices">remote playback devices</a>.
Instead, it allows the user to choose one device
from a device picker provided by the User Agent. 
    <p>It does enable websites to detect whether or not
any <a data-link-type="dfn" href="https://w3c.github.io/remote-playback/#dfn-remote-playback-devices" id="ref-for-dfn-remote-playback-devicesâ ">remote playback device</a> is available,
so the website can show or hide a control
the user can use to show the device picker.</p>
    <p>The trade-off is that by allowing websites
this extra bit of information,
the API lets authors make their user interface less confusing.
They can choose to show a button to trigger the picker
only if at least one device is available.</p>
   </div>
   <p>If you must expose a list of devices,
try to <strong>expose the smallest subset</strong> that satisfies your user needs.</p>
   <p>For example, an API which allows the website
to request <strong>a filtered or constrained list</strong> of devices
is one option to keep the number of devices smaller.
However, if authors are allowed to make multiple requests with different constraints,
they may still be able to access the full list.</p>
   <p>Finally, if you must expose the full list of devices of a particular kind,
please rigorously <strong>define the order</strong> in which devices will be listed.
This can reduce interoperability issues,
and helps to mitigate fingerprinting.
(Sort order could reveal other information:
see <a href="https://w3c.github.io/fingerprinting-guidance/#a_standardized_profile">Fingerprinting Guidance Â§5.2 Standardization</a> for more.)</p>
   <p class="note" role="note"><span>Note:</span> While APIs should not
expose a full list of devices in an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#implementation-defined" id="ref-for-implementation-defined">implementation-defined</a> order,
they may need to for web compatibility reasons.</p>
   <h3 class="heading settled" data-level="8.3" id="wrapper-apis"><span class="secno">8.3. </span><span class="content">Native APIs donât typically translate well to the web</span><a class="self-link" href="#wrapper-apis"></a></h3>
   <p>When adapting native operating system APIs for the web,
make sure the new web APIs are designed with web platform principles in mind.</p>
   <dl>
    <dt data-md>Design based on functionality, not based on the existing API
    <dd data-md>
     <p>You will probably not be able to directly translate
an API available to native applications
to be a web API.</p>
     <p>Instead, consider the functionality available from the native API,
and the user needs it addresses,
and design an API which meets those user needs,
even if the implmentation depends on the existing native API.</p>
     <p>Be particularly careful about exposing
the exact lifecycle and data structures of the underlying native APIs.</p>
    <dt data-md>Make sure the web API can be implemented on more than one platform
    <dd data-md>
     <p>When designing a wrapper API,
consider how different platforms provide its functionality.</p>
     <p>Ideally, all implementations should work exactly the same,
but in some cases you may have a reason to expose options
which only work on some platforms.
If this happens, be sure to explain
how authors should write code which works on all platforms.
See <a href="#feature-detect">Â§â¯2.3 New features should be detectable</a>.</p>
    <dt data-md>Underlying protocols should be open
    <dd data-md>
     <p>APIs which require exchange with external hardware or services
should not depend on closed or proprietary protocols.
Depending on non-open protocols undermines the open nature of the web.</p>
    <dt data-md>Design APIs to handle the user being off-line
    <dd data-md>
     <p>If an API depends on some service which is provided by a remote server,
make sure that the API functions well when the user canât access the remote server
for any reason.</p>
    <dt data-md>Avoid additional fingerprinting surfaces
    <dd data-md>
     <p>Wrapper APIs can unintentionally expose the user to
a wider fingerprinting surface.
Please read the TAGâs finding on <a href="http://www.w3.org/2001/tag/doc/unsanctioned-tracking/">unsanctioned tracking</a> for additional details.</p>
   </dl>
   <h2 class="heading settled" data-level="9" id="other-considerations"><span class="secno">9. </span><span class="content">Other API Design Considerations</span><a class="self-link" href="#other-considerations"></a></h2>
   <h3 class="heading settled" data-level="9.1" id="polyfills"><span class="secno">9.1. </span><span class="content">Polyfills</span><a class="self-link" href="#polyfills"></a></h3>
   <p>Polyfills can be hugely beneficial
in helping to roll out new features to the web platform.
The Technical Architecture Group <a href="https://www.w3.org/2001/tag/doc/polyfills/">finding on Polyfills and the Evolution of the Web</a> offers guidance that should be considered in the development of new features, notably:</p>
   <ul>
    <li data-md>
     <p>Being "polyfillable" isnât essential but <strong>is</strong> beneficial</p>
    <li data-md>
     <p><a href="#feature-detect">Â§â¯2.3 New features should be detectable</a></p>
    <li data-md>
     <p>Polyfill development should be encouraged</p>
   </ul>
   <h3 class="heading settled" data-level="9.2" id="extend-manifests"><span class="secno">9.2. </span><span class="content">Extend existing manifest files rather than creating new ones</span><a class="self-link" href="#extend-manifests"></a></h3>
   <p>If your feature requires a manifest,
investigate whether you can extend an existing manifest schema.</p>
   <p>New web features should be self-contained and self-describing and ideally should not require an additional manifest file.
Some of the existing manifest files include</p>
   <ul>
    <li data-md>
     <p><a href="https://www.w3.org/TR/appmanifest/">Web App Manifest</a> which contains features related to web applications.</p>
    <li data-md>
     <p><a href="https://www.w3.org/TR/payment-method-manifest/">Payment Method Manifest</a> which is used for payment methods in the context of the web payment API</p>
    <li data-md>
     <p><a href="https://www.w3.org/TR/pub-manifest/">Publication Manifest</a> which is used by some web publications working group standards</p>
    <li data-md>
     <p><a href="https://wicg.github.io/origin-policy/">Origin Policy</a> which is used to set security policies.</p>
   </ul>
   <p>We encourage people to extend existing manifest files.
Always try to get the changes into the original spec,
or at least discuss the extension with the spec editors.
Having this discussion is more likely to result in a better design
and lead to something that better integrates with the platform.</p>
   <p>When designing new keys and values for a manifest, make sure they are needed (that is, they enable well-thought-out use-cases).
Also, please check if a similar key exists. If an existing key/value pair does more or less what is needed,
work with the existing spec to extend it to your use-case if possible.</p>
   <div class="note" role="note">
     There are certain times the original spec authors might not want
to integrate changes to their manifest format immediately.
This may be due to process (like going to CR),
or due to the addition having a different scope,
like extensions to Web App Manifest only affecting store or payment use-cases.
In that case, it is acceptable to monkey-patch
as long as that is agreed with the original spec editors. 
    <p class="issue" id="issue-05c58ddf"><a class="self-link" href="#issue-05c58ddf"></a> when we write up a principle on monkey patching,
be sure to take this nuance into account. <a href="https://github.com/w3ctag/design-principles/issues/184">&lt;https://github.com/w3ctag/design-principles/issues/184></a></p>
    <p>An example of something that was done as a monkey patch
that is scheduled to be integrated into the web app manifest in a future level (post-CR):</p>
    <ul>
     <li data-md>
      <p>https://wicg.github.io/web-share-target/#extension-to-the-web-app-manifest</p>
    </ul>
   </div>
   <p>However, if your feature requires a complex set of metadata specific to a functional domain,
the creation of a new manifest may be justified.</p>
   <p>You may need to make a new manifest file if the domain of the manifest file is different from the existing manifest files.
For example, if the fetch timing is different, or if the complexity of the manifest warrants it.  Application metadata should be added
to the Web App Manifest or be an extension of it.
Manifests designated to be used for specific applications or which require interoperability with non-browsers may need to take a different approach.
Payment Method Manifest, Publication Manifest, and Origin Policy are examples of these cases.</p>
   <p>For example, if you have a single piece of metadata, even if the fetch timing is different than an existing manifest,
it is probably best to use an existing manifest (or ideally design the feature in such a way that a manifest is not required).
However, if your feature requires a complex set of metadata specific to a functional domain, the creation of a new manifest may be justified.</p>
   <p>Note that in all cases, the naming conventions should be harmonized (see <a href="#naming-is-hard">Â§â¯11 Naming principles</a>).</p>
   <p class="note" role="note"><span>Note:</span> By principle, existing manifests use lowercase, underscore-delimited names.
There have been times where it was useful to re-use dictionaries from a manifest in DOM APIs as well,
which meant converting the names to camel-cased version.
One such example is the <a href="https://w3c.github.io/image-resource/">image resource</a>.
For this reason, if a key can clearly be expressed as a single word, that is recommended.</p>
   <h2 class="heading settled" data-level="10" id="spec-writing"><span class="secno">10. </span><span class="content">Writing good specifications</span><a class="self-link" href="#spec-writing"></a></h2>
   <p>This document mostly covers API design for the Web,
but those who design APIs are hopefully also writing specifications
for the APIs that they design.</p>
   <h3 class="heading settled" data-level="10.1" id="requirements-on-authors-and-implementers"><span class="secno">10.1. </span><span class="content">Identify the audience of each requirement in your specification</span><a class="self-link" href="#requirements-on-authors-and-implementers"></a></h3>
   <p>The web platform is,
unusually,
designed to be robust in accepting poorly-formed markup.</p>
   <p>When writing specifications for the web,
be sure to note authoring requirements
for well-formed markup (the "conforming language"),
and also
implementation requirements
for handling poorly-formed markup (the "supported language").</p>
   <p>This allows us to
have a relatively clean and understandable language for authors,
while at the same time supporting existing documents
that make use of older or nonstandard constructs,
and enabling better interoperability in error handling.</p>
   <h3 class="heading settled" data-level="10.2" id="avoid-ambiguity"><span class="secno">10.2. </span><span class="content">Specify completely and avoid ambiguity</span><a class="self-link" href="#avoid-ambiguity"></a></h3>
   <p>If the specification leaves room for implementations to make different choices
which mean authors need to write different markup for different implementations,
this adds a maintenance burden for authors.</p>
   <p>The specification should be complete enough
for implementations to be interoperable,
without depending on or referring to the details of other implementations.
When there isnât a good reason to allow variation between implementations,
it is important that things be specified unambiguously,
so that implementations interoperate
and web content doesnât end up
depending on the <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#implementation-defined" id="ref-for-implementation-definedâ ">implementation-defined</a> behavior
in one implementation and failing in another
(which can cause higher development costs to fix the content for all browsers,
or costs to users of broken content if it wasnât detected).
This way,
it is easier to author content
that works in a variety of user agents.
However,
implementations should still be free
to make improvements
in areas such as user interface
and quality of rendering.</p>
   <h4 class="heading settled" data-level="10.2.1" id="algorithms"><span class="secno">10.2.1. </span><span class="content">Defining algorithms in specifications</span><a class="self-link" href="#algorithms"></a></h4>
   <p>Specification text is often more precise
when it is written using an explicit sequence of steps.
Using an ordered sequence of steps makes it clear how the required behaviors interact.
For example, if there are multiple error conditions present,
a specification that describes the behavior using a sequence of steps
will make it clear which error will be reported,
since the different errors would be checked and reported in different steps.</p>
   <p>However, sequences of steps
are not the only way to make a specification precise enough.
When there are particular characteristics
that specification editors want to ensure the specification always satisfies,
it may be better to use a less algorithmic way of formal specification
that ensures these characteristics are always true.
Developing these other ways of specifying behavior formally
is more important when the algorithms would be more repetitive.
These formal specification techniques can include dependencies on
languages such as <a data-link-type="biblio" href="#biblio-webidl">[WEBIDL]</a>, on grammar productions,
or the development of new languages for defining pieces of the specification.
Merely having a formal syntax is not sufficient, though;
the requirements that the formal definitions place on implementations must still be clearly defined,
which generally requires specifying some algorithms (or, sometimes, another layer of formal syntax) that define what the formal syntax means,
and then using the more-readable formal syntax to avoid
excessive repetition of the less-readable algorithms.
There are also possibilities in-between, for example,
if it is desirable to ensure that an algorithm can be implemented with a state machine,
it may be preferable to specify it in an algorithmic way that incorporates explicit states
so that the specification authors avoid accidentally creating more states than intended.</p>
   <p>When specifying in an algorithmic way,
it is generally good to match the algorithms that implementations would use,
even if this is somewhat less convenient for specification authors,
as long as doing so would not significantly increase the specificationâs complexity.
For example, it is better to specify CSS selector matching
by moving right to left across <a data-link-type="dfn" href="https://drafts.csswg.org/selectors-4/#selector-combinator" id="ref-for-selector-combinator">combinators</a>,
since that is what implementations do.
This avoids the risk of future problems caused by new features
that would be slightly different (in unimportant ways)
between implementations based on one algorithm and implementations based on a different one.
Thus, it avoids small future divergence in behavior between specification and implementations.
It also helps to keep the costs of specifying features aligned with implementing them,
since the complexity of adding a feature to the specification is more likely to be related
to the cost of adding it to implementations.</p>
   <p>Algorithms in specifications should also reflect best practices in programming.
For example, they should explicitly describe the inputs and outputs of the algorithm,
rather than relying on "stack introspection" or handwaving.
They should also avoid side-effects when possible.</p>
   <p><a data-link-type="biblio" href="#biblio-infra">[INFRA]</a> offers <a href="https://infra.spec.whatwg.org/#algorithms">some useful definitions
and terminology</a> for defining algorithms.</p>
   <p>Specifications that define things using step-by-step algorithms should still be readable.
Partly, this is through good practices that also apply to writing code,
such as avoiding unneeded extra steps, and by using good naming.
However, itâs often useful to explain the purpose of the algorithm in prose
(e.g., "take the following steps, which ensure that there is at most one pending X
callback per toplevel browsing context")
so that readers can quickly decide whether they need to read the steps in detail.</p>
   <h4 class="heading settled" data-level="10.2.2" id="use-flags-for-states"><span class="secno">10.2.2. </span><span class="content">Use explicit flags for state</span><a class="self-link" href="#use-flags-for-states"></a></h4>
   <p>Describing state using explicit flags makes behavior clearer.
Using explicit flags makes it clear
whether or not the state changes in different error conditions,
and makes it clear when the state described by the flags is reset.</p>
   <h2 class="heading settled" data-level="11" id="naming-is-hard"><span class="secno">11. </span><span class="content">Naming principles</span><a class="self-link" href="#naming-is-hard"></a></h2>
   <p>Names take meaning from:</p>
   <ul>
    <li data-md>
     <p>signposting (the name itself)</p>
    <li data-md>
     <p>use (how people come to understand the name over time)</p>
    <li data-md>
     <p>context (the object on the left-hand side, for example)</p>
   </ul>
   <h3 class="heading settled" data-level="11.1" id="naming-common-words"><span class="secno">11.1. </span><span class="content">Use common words</span><a class="self-link" href="#naming-common-words"></a></h3>
   <p>API naming <em>must</em> be done in easily readable US English.
Keep in mind that most web developers arenât native English speakers.
Whenever possible, names should be chosen that use common vocabulary
a majority of English speakers are likely to understand when first encountering the name.</p>
   <div class="example" id="example-d0367763">
    <a class="self-link" href="#example-d0367763"></a> 
    <p>For example <code>setSize</code> is
a more English-readable name
than <code>cardinality</code>.</p>
   </div>
   <p>Value readability over brevity.
Keep in mind, however, that sometimes
the shorter name is the clearer one.
For instance,
it may be appropriate to use technical language or well-known terms of art
in the specification where the API is defined.</p>
   <div class="example" id="example-3cd78f17">
    <a class="self-link" href="#example-3cd78f17"></a> 
    <p>For example,
the Fetch APIâs <code class="idl"><a data-link-type="idl" href="https://fetch.spec.whatwg.org/#body" id="ref-for-body">Body</a></code> mixinâs <code class="idl"><a data-link-type="idl" href="https://fetch.spec.whatwg.org/#dom-body-json" id="ref-for-dom-body-json">json()</a></code> method
is named for the kind of object it returns.
JSON is a well-known term of art
among web developers likely to use the Fetch API.
It would harm comprehension
to name this API less directly connected to its return type. <a data-link-type="biblio" href="#biblio-fetch">[FETCH]</a></p>
   </div>
   <h3 class="heading settled" data-level="11.2" id="naming-charset"><span class="secno">11.2. </span><span class="content">Use ASCII names</span><a class="self-link" href="#naming-charset"></a></h3>
   <p>Names must adhere to the local language restrictions, for example CSS ident rules etc.
and <em>should</em> be in the <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ascii-code-point" id="ref-for-ascii-code-point">ASCII range</a>.</p>
   <h3 class="heading settled" data-level="11.3" id="naming-consultation"><span class="secno">11.3. </span><span class="content">Consultation</span><a class="self-link" href="#naming-consultation"></a></h3>
   <p>Please consult widely on names in your APIs.</p>
   <p>You may find good names or inspiration in surprising places.</p>
   <ul>
    <li data-md>
     <p>What are similar APIs named on other platforms,
or in popular libraries in various programming languages?</p>
    <li data-md>
     <p>Ask end users and developers what they call
things that your API works with or manipulates.</p>
    <li data-md>
     <p>Look at other web platform specifications,
and seek advice from others working in related areas of the platform.</p>
   </ul>
   <p>Pay particular attention to advice you receive
with clearly-stated rationale based on underlying principles.</p>
   <div class="example" id="example-1f37c106">
    <a class="self-link" href="#example-1f37c106"></a> 
    <p>Tantek Ãelik <a href="https://tantek.com/2011/238/b1/many-ways-slice-url-name-pieces">extensively researched</a> how to name the various pieces of a URL.
The editors of the <a href="https://url.spec.whatwg.org">URL spec</a> have relied on this research
when editing that document. <a data-link-type="biblio" href="#biblio-url">[URL]</a></p>
   </div>
   <h4 class="no-num no-toc heading settled" id="naming-web-considtency"><span class="content">Use Web consistent names</span><a class="self-link" href="#naming-web-considtency"></a></h4>
    When choosing a name for feature or API that has exposure in other technology stacks,
the preference should be towards the Web ecosystem naming convention rather than other
communities. 
   <div class="example" id="example-2ef86e6f">
    <a class="self-link" href="#example-2ef86e6f"></a> 
    <p>The NFC standard uses the term <code>media</code> to refer to what the Web calls <a href="https://mimesniff.spec.whatwg.org/#mime-type-representation">MIME type</a>.
In such cases, the naming of features or API for the purposes of Web NFC must prefer
naming consistent with <code>MIME type</code>.</p>
   </div>
   <h3 class="heading settled" data-level="11.4" id="naming-future-proofing"><span class="secno">11.4. </span><span class="content">Future-proofing</span><a class="self-link" href="#naming-future-proofing"></a></h3>
   <p>Naming should be generic and future-proof whenever possible.</p>
   <p>The name should not be directly associated with a brand or specific revision of
the underlying technology whenever possible; technology becomes obsolete, and
removing APIs from the web is difficult.</p>
   <div class="example" id="example-fd8a196a">
    <a class="self-link" href="#example-fd8a196a"></a> 
    <p>The Remote Playback API was not named
after one of the pre-existing, proprietary systems it was inspired by
(such as Chromecast or AirPlay).
Instead, general terms that describe what the API does were chosen. <a data-link-type="biblio" href="#biblio-remote-playback">[REMOTE-PLAYBACK]</a></p>
   </div>
   <div class="example" id="example-c1204afc">
    <a class="self-link" href="#example-c1204afc"></a> 
    <p>The <code>keydown</code> and <code>keyup</code> <code class="idl"><a data-link-type="idl" href="https://www.w3.org/TR/uievents/#keyboardevent" id="ref-for-keyboardevent">KeyboardEvent</a></code>s were not named
for the specific hardware bus that keyboards used at the time.
Instead, generic names were chosen
that are as applicable to todayâs Bluetooth and USB keyboards
as they were to PS/2 and ADB keyboards back then. <a data-link-type="biblio" href="#biblio-uievents">[UIEVENTS]</a></p>
   </div>
   <h3 class="heading settled" data-level="11.5" id="naming-consistency"><span class="secno">11.5. </span><span class="content">Consistency</span><a class="self-link" href="#naming-consistency"></a></h3>
    Naming schemes should aim for consistency, to avoid confusion. 
   <p>Sets of related names should agree with each other in:</p>
   <ul>
    <li data-md>
     <p>part of speech  - noun, verb, etc.</p>
    <li data-md>
     <p>negation, for example all of the names in a set should either describe what is allowed
or they should all describe what is denied</p>
   </ul>
   <h4 class="no-num no-toc heading settled" id="naming-booleans"><span class="content">Boolean properties vs.
  boolean-returning methods</span><a class="self-link" href="#naming-booleans"></a></h4>
   <p>Boolean properties, options, or API parameters which are asking a question about
their argument <em>should not</em> be prefixed with <code>is</code>, while methods
that serve the same purpose, given that it has no side effects, <em>should</em> be
prefixed with <code>is</code> to be consistent with the rest of the platform.</p>
   <h4 class="no-num no-toc heading settled" id="casing-rules"><span class="content">Use casing rules consistent with existing APIs</span><a class="self-link" href="#casing-rules"></a></h4>
   <p>Although they havenât always been uniformly followed, through the history of web platform API
design, the following rules have emerged:</p>
   <table class="data complex">
    <thead>
     <tr>
      <th>
      <th>Casing rule
      <th>Examples
    <tbody>
     <tr>
      <th>Methods and properties<br>(Web IDL attributes, operations, and dictionary keys)
      <td>Camel case
      <td><code class="highlight">document<c- p>.</c->createAttribute<c- p>()</c-></code><br> <code class="highlight">document<c- p>.</c->compatMode</code>
     <tr>
      <th>Classes and mixins<br>(Web IDL interfaces)
      <td>Pascal case
      <td><code class="highlight">NamedNodeMap</code><br> <code class="highlight">NonElementParentNode</code>
     <tr>
      <th>Initialisms in APIs
      <td>All caps, except when the first word in a method or property
      <td><code class="highlight">HTMLCollection</code><br> <code class="highlight">element<c- p>.</c->innerHTML</code><br> <code class="highlight">document<c- p>.</c->bgColor</code>
     <tr>
      <th>Repeated initialisms in APIs
      <td>Follow the same rule
      <td><code class="highlight">HTMLHRElement</code><br> <code class="highlight">RTCDTMFSender</code><br> 
     <tr>
      <th>The abbreviation of "identity"
      <td><code class="highlight">Id</code>, except when the first word in a method or property
      <td><code class="highlight">node<c- p>.</c->getElementById<c- p>()</c-></code><br> <code class="highlight">event<c- p>.</c->pointerId</code><br> <code class="highlight">credential<c- p>.</c->id</code>
     <tr>
      <th>Enumeration values
      <td>Lowercase, dash-delimited
      <td><code class="highlight"><c- u>"no-referrer-when-downgrade"</c-></code>
     <tr>
      <th>Events
      <td>Lowercase, concatenated
      <td><code>autocompleteerror</code><br> <code>languagechange</code>
     <tr>
      <th>HTML elements and attributes
      <td>Lowercase, concatenated
      <td><code class="highlight"><c- p>&lt;</c-><c- f>figcaption</c-><c- p>></c-></code><br> <code class="highlight"><c- p>&lt;</c-><c- f>textarea</c-> <c- e>maxlength</c-><c- p>></c-></code>
     <tr>
      <th>JSON keys
      <td>Lowercase, underscore-delimited
      <td><code class="highlight">manifest<c- p>.</c->short_name</code>
   </table>
   <div class="non-normative">
     Note that in particular, when a HTML attribute is <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/common-dom-interfaces.html#reflect" id="ref-for-reflectâ ">reflected</a> as a property, the attribute
and propertyâs casings wonât necessarily match. For example, the HTML attribute <code><a data-link-type="element-sub" href="https://html.spec.whatwg.org/multipage/embedded-content.html#attr-img-ismap" id="ref-for-attr-img-ismap">ismap</a></code> on <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/embedded-content.html#the-img-element" id="ref-for-the-img-element">img</a></code> elements is <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/common-dom-interfaces.html#reflect" id="ref-for-reflectâ¡">reflected</a> as the <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/embedded-content.html#dom-img-ismap" id="ref-for-dom-img-ismap">isMap</a></code> property on <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/embedded-content.html#htmlimageelement" id="ref-for-htmlimageelement">HTMLImageElement</a></code>. 
    <p>The rules for JSON keys are meant to apply to specific JSON file formats sent over HTTP
or stored on disk, and donât apply to the general notion of JavaScript object keys.</p>
    <p>Repeated initialisms are particularly non-uniform throughout the platform. Infamous historical
examples that violate the above rules are <code class="idl"><a data-link-type="idl" href="https://xhr.spec.whatwg.org/#xmlhttprequest" id="ref-for-xmlhttprequest">XMLHttpRequest</a></code> and <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/semantics.html#htmlhtmlelement" id="ref-for-htmlhtmlelement">HTMLHtmlElement</a></code>. Donât follow their example; instead always capitalize your
initialisms, even if they are repeated.</p>
   </div>
   <h3 class="heading settled" data-level="11.6" id="naming-unsafe"><span class="secno">11.6. </span><span class="content">Warning about dangerous features</span><a class="self-link" href="#naming-unsafe"></a></h3>
   <p>Where possible, mark features that weaken
the guarantees provided to developers
by making their names start with "unsafe" so that this is more noticeable.</p>
   <p>For example, <a href="https://w3c.github.io/webappsec-csp/">Content Security Policy (CSP)</a> provides protection against certain types of content injection vulnerabilities.
CSP also provides features that weaken this guarantee,
such as the <code>unsafe-inline</code> keyword,
which reduces CSPâs own protections by allowing inline scripts.</p>
   <h3 class="heading settled" data-level="11.7" id="writing-resources"><span class="secno">11.7. </span><span class="content">Other resources</span><a class="self-link" href="#writing-resources"></a></h3>
   <p>Some useful advice on how to write specifications is available elsewhere:</p>
   <ul>
    <li data-md>
     <p><a href="https://ln.hixie.ch/?start=1140242962&amp;count=1">Writing
specifications: Kinds of statements</a> (Ian Hickson, 2006)</p>
    <li data-md>
     <p><a href="https://www.w3.org/TR/qaframe-spec/">QA Framework:
Specification Guidelines</a> (W3C QA Working Group, 2005)</p>
    <li data-md>
     <p><a href="https://w3c.github.io/privacy-considerations/">Privacy Considerations for Web Protocols</a></p>
    <li data-md>
     <p><a href="https://www.w3.org/TR/security-privacy-questionnaire/">Self-Review Questionnaire: Security and Privacy</a></p>
    <li data-md>
     <p><a href="https://w3c.github.io/apa/fast/">Web Technology Accessibility Guidelines</a></p>
    <li data-md>
     <p><a href="https://w3c.github.io/bp-i18n-specdev/">Internationalization Best Practices for Spec Developers</a></p>
   </ul>
   <h2 class="no-num heading settled" id="acks"><span class="content">Acknowledgments</span><a class="self-link" href="#acks"></a></h2>
   <p>This document consists of
principles which have been collected
by TAG members past and present
during TAG <a href="https://github.com/w3ctag/design-reviews/">design reviews</a>.
We are indebted to everyone who has requested a design review from us.</p>
   <p>The TAG would like to thank
Adrian Hope-Bailie,
Alan Stearns,
Aleksandar Totic,
Alex Russell,
Andreas StÃ¶ckel,
Andrew Betts,
Anne van Kesteren,
Benjamin C. Wiley Sittler,
Boris Zbarsky,
Brian Kardell,
Charles McCathieNevile,
Chris Wilson,
Dan Connolly,
Daniel Ehrenberg,
Daniel Murphy,
Domenic Denicola,
Eiji Kitamura,
Eric Shepherd,
Ethan Resnick,
fantasai,
FranÃ§ois Daoust,
Henri Sivonen,
HE Shi-Jun,
Ian Hickson,
Irene Knapp,
Jake Archibald,
Jeffrey Yasskin,
Jeremy Roman,
Jirka Kosek,
Kevin Marks,
Lachlan Hunt,
LÃ©onie Watson,
L. Le Meur,
Lukasz Olejnik,
Maciej Stachowiak,
Marcos CÃ¡ceres,
Mark Nottingham,
Martin Thomson,
Matt Giuca,
Matt Wolenetz,
Michael[tm] Smith,
Mike West,
Nick Doty,
Nigel Megitt,
Nik Thierry,
Ojan Vafai,
Olli Pettay,
Pete Snyder,
Philip JÃ¤genstedt,
Philip Taylor,
Reilly Grant,
Richard Ishida,
Rick Byers,
Ryan Sleevi,
Sergey Konstantinov,
Stefan Zager,
Stephen Stewart,
Steven Faulkner,
Surma,
Tab Atkins-Bittner,
Tantek Ãelik,
Tobie Langel,
Travis Leithead,
and
Yoav Weiss
for their contributions to this &amp; the <a href="https://www.w3.org/TR/html-design-principles/">HTML Design Principles</a> document which preceded it.</p>
   <p>Special thanks to
Anne van Kesteren
and
Maciej Stachowiak,
who edited the <a href="https://www.w3.org/TR/html-design-principles/">HTML Design Principles</a> document.</p>
   <p>If you contributed to this document
but your name is not listed above,
please let the editors know
so they can correct this omission.</p>
  </main>
  <div data-fill-with="conformance">
   <h2 class="no-ref no-num heading settled" id="conformance"><span class="content"> Conformance</span><a class="self-link" href="#conformance"></a></h2>
   <p> Conformance requirements are expressed with a combination of descriptive assertions and RFC 2119 terminology.
            The key words âMUSTâ, âMUST NOTâ, âREQUIREDâ, âSHALLâ, âSHALL NOTâ, âSHOULDâ, âSHOULD NOTâ, âRECOMMENDEDâ, âMAYâ, and âOPTIONALâ
            in the normative parts of this document
            are to be interpreted as described in RFC 2119.
            However, for readability,
            these words do not appear in all uppercase letters in this specification. </p>
   <p> All of the text of this specification is normative
            except sections explicitly marked as non-normative, examples, and notes. <a data-link-type="biblio" href="#biblio-rfc2119">[RFC2119]</a> </p>
   <p> Examples in this specification are introduced with the words âfor exampleâ
            or are set apart from the normative text with <code>class="example"</code>, like this: </p>
   <div class="example" id="example-example"><a class="self-link" href="#example-example"></a> This is an example of an informative example. </div>
   <p> Informative notes begin with the word âNoteâ
            and are set apart from the normative text with <code>class="note"</code>, like this: </p>
   <p class="note" role="note"> Note, this is an informative note. </p>
  </div>
<script>
(function() {
  "use strict";
  var collapseSidebarText = '<span aria-hidden="true">â</span> '
                          + '<span>Collapse Sidebar</span>';
  var expandSidebarText   = '<span aria-hidden="true">â</span> '
                          + '<span>Pop Out Sidebar</span>';
  var tocJumpText         = '<span aria-hidden="true">â</span> '
                          + '<span>Jump to Table of Contents</span>';

  var sidebarMedia = window.matchMedia('screen and (min-width: 78em)');
  var autoToggle   = function(e){ toggleSidebar(e.matches) };
  if(sidebarMedia.addListener) {
    sidebarMedia.addListener(autoToggle);
  }

  function toggleSidebar(on) {
    if (on == undefined) {
      on = !document.body.classList.contains('toc-sidebar');
    }

    /* Donât scroll to compensate for the ToC if weâre above it already. */
    var headY = 0;
    var head = document.querySelector('.head');
    if (head) {
      // terrible approx of "top of ToC"
      headY += head.offsetTop + head.offsetHeight;
    }
    var skipScroll = window.scrollY < headY;

    var toggle = document.getElementById('toc-toggle');
    var tocNav = document.getElementById('toc');
    if (on) {
      var tocHeight = tocNav.offsetHeight;
      document.body.classList.add('toc-sidebar');
      document.body.classList.remove('toc-inline');
      toggle.innerHTML = collapseSidebarText;
      if (!skipScroll) {
        window.scrollBy(0, 0 - tocHeight);
      }
      tocNav.focus();
      sidebarMedia.addListener(autoToggle); // auto-collapse when out of room
    }
    else {
      document.body.classList.add('toc-inline');
      document.body.classList.remove('toc-sidebar');
      toggle.innerHTML = expandSidebarText;
      if (!skipScroll) {
        window.scrollBy(0, tocNav.offsetHeight);
      }
      if (toggle.matches(':hover')) {
        /* Unfocus button when not using keyboard navigation,
           because I donât know where else to send the focus. */
        toggle.blur();
      }
    }
  }

  function createSidebarToggle() {
    /* Create the sidebar toggle in JS; it shouldnât exist when JS is off. */
    var toggle = document.createElement('a');
      /* This should probably be a button, but appearance isnât standards-track.*/
    toggle.id = 'toc-toggle';
    toggle.class = 'toc-toggle';
    toggle.href = '#toc';
    toggle.innerHTML = collapseSidebarText;

    sidebarMedia.addListener(autoToggle);
    var toggler = function(e) {
      e.preventDefault();
      sidebarMedia.removeListener(autoToggle); // persist explicit off states
      toggleSidebar();
      return false;
    }
    toggle.addEventListener('click', toggler, false);


    /* Get <nav id=toc-nav>, or make it if we donât have one. */
    var tocNav = document.getElementById('toc-nav');
    if (!tocNav) {
      tocNav = document.createElement('p');
      tocNav.id = 'toc-nav';
      /* Prepend for better keyboard navigation */
      document.body.insertBefore(tocNav, document.body.firstChild);
    }
    /* While weâre at it, make sure we have a Jump to Toc link. */
    var tocJump = document.getElementById('toc-jump');
    if (!tocJump) {
      tocJump = document.createElement('a');
      tocJump.id = 'toc-jump';
      tocJump.href = '#toc';
      tocJump.innerHTML = tocJumpText;
      tocNav.appendChild(tocJump);
    }

    tocNav.appendChild(toggle);
  }

  var toc = document.getElementById('toc');
  if (toc) {
    createSidebarToggle();
    toggleSidebar(sidebarMedia.matches);

    /* If the sidebar has been manually opened and is currently overlaying the text
       (window too small for the MQ to add the margin to body),
       then auto-close the sidebar once you click on something in there. */
    toc.addEventListener('click', function(e) {
      if(e.target.tagName.toLowerCase() == "a" && document.body.classList.contains('toc-sidebar') && !sidebarMedia.matches) {
        toggleSidebar(false);
      }
    }, false);
  }
  else {
    console.warn("Canât find Table of Contents. Please use <nav id='toc'> around the ToC.");
  }

  /* Wrap tables in case they overflow */
  var tables = document.querySelectorAll(':not(.overlarge) > table.data, :not(.overlarge) > table.index');
  var numTables = tables.length;
  for (var i = 0; i < numTables; i++) {
    var table = tables[i];
    var wrapper = document.createElement('div');
    wrapper.className = 'overlarge';
    table.parentNode.insertBefore(wrapper, table);
    wrapper.appendChild(table);
  }

})();
</script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li><a href="#live-object">live object</a><span>, in Â§5.2</span>
   <li><a href="#static-object">static object</a><span>, in Â§5.2</span>
  </ul>
  <aside class="dfn-panel" data-for="term-for-propdef-background-image">
   <a href="https://drafts.csswg.org/css-backgrounds-3/#propdef-background-image">https://drafts.csswg.org/css-backgrounds-3/#propdef-background-image</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-propdef-background-image">3.2. Make appropriate choices for whether CSS properties are inherited</a> <a href="#ref-for-propdef-background-imageâ ">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-actual-value">
   <a href="https://drafts.csswg.org/css-cascade-5/#actual-value">https://drafts.csswg.org/css-cascade-5/#actual-value</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-actual-value">3.3. Choose the computed value type based on how the property should inherit</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-computed-value">
   <a href="https://drafts.csswg.org/css-cascade-5/#computed-value">https://drafts.csswg.org/css-cascade-5/#computed-value</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-computed-value">3.3. Choose the computed value type based on how the property should inherit</a> <a href="#ref-for-computed-valueâ ">(2)</a> <a href="#ref-for-computed-valueâ¡">(3)</a> <a href="#ref-for-computed-valueâ¢">(4)</a> <a href="#ref-for-computed-valueâ£">(5)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-inheritance">
   <a href="https://drafts.csswg.org/css-cascade-5/#inheritance">https://drafts.csswg.org/css-cascade-5/#inheritance</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-inheritance">3.3. Choose the computed value type based on how the property should inherit</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-at-ruledef-supports">
   <a href="https://drafts.csswg.org/css-conditional-3/#at-ruledef-supports">https://drafts.csswg.org/css-conditional-3/#at-ruledef-supports</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-at-ruledef-supports">2.3. New features should be detectable</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-propdef-font-size">
   <a href="https://drafts.csswg.org/css-fonts-3/#propdef-font-size">https://drafts.csswg.org/css-fonts-3/#propdef-font-size</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-propdef-font-size">3.2. Make appropriate choices for whether CSS properties are inherited</a> <a href="#ref-for-propdef-font-sizeâ ">(2)</a> <a href="#ref-for-propdef-font-sizeâ¡">(3)</a>
    <li><a href="#ref-for-propdef-font-sizeâ¢">3.3. Choose the computed value type based on how the property should inherit</a> <a href="#ref-for-propdef-font-sizeâ£">(2)</a> <a href="#ref-for-propdef-font-sizeâ¤">(3)</a> <a href="#ref-for-propdef-font-sizeâ¥">(4)</a> <a href="#ref-for-propdef-font-sizeâ¦">(5)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-propdef-initial-letter">
   <a href="https://drafts.csswg.org/css-inline-3/#propdef-initial-letter">https://drafts.csswg.org/css-inline-3/#propdef-initial-letter</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-propdef-initial-letter">3.1. Separate CSS properties based on what should cascade separately</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-propdef-initial-letter-align">
   <a href="https://drafts.csswg.org/css-inline-3/#propdef-initial-letter-align">https://drafts.csswg.org/css-inline-3/#propdef-initial-letter-align</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-propdef-initial-letter-align">3.1. Separate CSS properties based on what should cascade separately</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-propdef-line-height">
   <a href="https://drafts.csswg.org/css-inline-3/#propdef-line-height">https://drafts.csswg.org/css-inline-3/#propdef-line-height</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-propdef-line-height">3.3. Choose the computed value type based on how the property should inherit</a> <a href="#ref-for-propdef-line-heightâ ">(2)</a> <a href="#ref-for-propdef-line-heightâ¡">(3)</a> <a href="#ref-for-propdef-line-heightâ¢">(4)</a> <a href="#ref-for-propdef-line-heightâ£">(5)</a> <a href="#ref-for-propdef-line-heightâ¤">(6)</a> <a href="#ref-for-propdef-line-heightâ¥">(7)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-length-value">
   <a href="https://drafts.csswg.org/css-values-3/#length-value">https://drafts.csswg.org/css-values-3/#length-value</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-length-value">3.3. Choose the computed value type based on how the property should inherit</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-number-value">
   <a href="https://drafts.csswg.org/css-values-3/#number-value">https://drafts.csswg.org/css-values-3/#number-value</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-number-value">3.3. Choose the computed value type based on how the property should inherit</a> <a href="#ref-for-number-valueâ ">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-lh">
   <a href="https://drafts.csswg.org/css-values-4/#lh">https://drafts.csswg.org/css-values-4/#lh</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-lh">3.3. Choose the computed value type based on how the property should inherit</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-window-getcomputedstyle">
   <a href="https://drafts.csswg.org/cssom-1/#dom-window-getcomputedstyle">https://drafts.csswg.org/cssom-1/#dom-window-getcomputedstyle</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-window-getcomputedstyle">3.3. Choose the computed value type based on how the property should inherit</a>
    <li><a href="#ref-for-dom-window-getcomputedstyleâ ">5.2. Consider whether objects should be live or static</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-resolved-value">
   <a href="https://drafts.csswg.org/cssom-1/#resolved-value">https://drafts.csswg.org/cssom-1/#resolved-value</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-resolved-value">3.3. Choose the computed value type based on how the property should inherit</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-abortcontroller">
   <a href="https://dom.spec.whatwg.org/#abortcontroller">https://dom.spec.whatwg.org/#abortcontroller</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-abortcontroller">6.6. Guard against potential recursion</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-abortsignal">
   <a href="https://dom.spec.whatwg.org/#abortsignal">https://dom.spec.whatwg.org/#abortsignal</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-abortsignal">6.6. Guard against potential recursion</a> <a href="#ref-for-abortsignalâ ">(2)</a> <a href="#ref-for-abortsignalâ¡">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-domtokenlist">
   <a href="https://dom.spec.whatwg.org/#domtokenlist">https://dom.spec.whatwg.org/#domtokenlist</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-domtokenlist">5.5. Classes should have constructors when possible</a> <a href="#ref-for-domtokenlistâ ">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-event">
   <a href="https://dom.spec.whatwg.org/#event">https://dom.spec.whatwg.org/#event</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-event">5.5. Classes should have constructors when possible</a>
    <li><a href="#ref-for-eventâ ">6.6. Guard against potential recursion</a>
    <li><a href="#ref-for-eventâ¡">6.7. State and Event subclasses</a> <a href="#ref-for-eventâ¢">(2)</a> <a href="#ref-for-eventâ£">(3)</a>
    <li><a href="#ref-for-eventâ¤">6.8. How to decide between Events and Observers</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-eventtarget">
   <a href="https://dom.spec.whatwg.org/#eventtarget">https://dom.spec.whatwg.org/#eventtarget</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-eventtarget">6.8. How to decide between Events and Observers</a> <a href="#ref-for-eventtargetâ ">(2)</a> <a href="#ref-for-eventtargetâ¡">(3)</a> <a href="#ref-for-eventtargetâ¢">(4)</a> <a href="#ref-for-eventtargetâ£">(5)</a> <a href="#ref-for-eventtargetâ¤">(6)</a> <a href="#ref-for-eventtargetâ¥">(7)</a> <a href="#ref-for-eventtargetâ¦">(8)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-htmlcollection">
   <a href="https://dom.spec.whatwg.org/#htmlcollection">https://dom.spec.whatwg.org/#htmlcollection</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-htmlcollection">4.3. Donât expose garbage collection</a> <a href="#ref-for-htmlcollectionâ ">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-mutationobserver">
   <a href="https://dom.spec.whatwg.org/#mutationobserver">https://dom.spec.whatwg.org/#mutationobserver</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-mutationobserver">6.8. How to decide between Events and Observers</a> <a href="#ref-for-mutationobserverâ ">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-node">
   <a href="https://dom.spec.whatwg.org/#node">https://dom.spec.whatwg.org/#node</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-node">6.8. How to decide between Events and Observers</a> <a href="#ref-for-nodeâ ">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-nodelist">
   <a href="https://dom.spec.whatwg.org/#nodelist">https://dom.spec.whatwg.org/#nodelist</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-nodelist">5.2. Consider whether objects should be live or static</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-abortcontroller-abort">
   <a href="https://dom.spec.whatwg.org/#dom-abortcontroller-abort">https://dom.spec.whatwg.org/#dom-abortcontroller-abort</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-abortcontroller-abort">6.6. Guard against potential recursion</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-abortsignal-aborted-flag">
   <a href="https://dom.spec.whatwg.org/#abortsignal-aborted-flag">https://dom.spec.whatwg.org/#abortsignal-aborted-flag</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-abortsignal-aborted-flag">6.6. Guard against potential recursion</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-abortsignal-add">
   <a href="https://dom.spec.whatwg.org/#abortsignal-add">https://dom.spec.whatwg.org/#abortsignal-add</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-abortsignal-add">6.6. Guard against potential recursion</a> <a href="#ref-for-abortsignal-addâ ">(2)</a> <a href="#ref-for-abortsignal-addâ¡">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-eventtarget-addeventlistener">
   <a href="https://dom.spec.whatwg.org/#dom-eventtarget-addeventlistener">https://dom.spec.whatwg.org/#dom-eventtarget-addeventlistener</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-eventtarget-addeventlistener">6.8. How to decide between Events and Observers</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-event-fire">
   <a href="https://dom.spec.whatwg.org/#concept-event-fire">https://dom.spec.whatwg.org/#concept-event-fire</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-event-fire">6.6. Guard against potential recursion</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-document-getelementsbytagname">
   <a href="https://dom.spec.whatwg.org/#dom-document-getelementsbytagname">https://dom.spec.whatwg.org/#dom-document-getelementsbytagname</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-document-getelementsbytagname">5.2. Consider whether objects should be live or static</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-addeventlisteneroptions-once">
   <a href="https://dom.spec.whatwg.org/#dom-addeventlisteneroptions-once">https://dom.spec.whatwg.org/#dom-addeventlisteneroptions-once</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-addeventlisteneroptions-once">6.8. How to decide between Events and Observers</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-parentnode-queryselectorall">
   <a href="https://dom.spec.whatwg.org/#dom-parentnode-queryselectorall">https://dom.spec.whatwg.org/#dom-parentnode-queryselectorall</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-parentnode-queryselectorall">5.2. Consider whether objects should be live or static</a> <a href="#ref-for-dom-parentnode-queryselectorallâ ">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-abortsignal-remove">
   <a href="https://dom.spec.whatwg.org/#abortsignal-remove">https://dom.spec.whatwg.org/#abortsignal-remove</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-abortsignal-remove">6.6. Guard against potential recursion</a> <a href="#ref-for-abortsignal-removeâ ">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-abortsignal-signal-abort">
   <a href="https://dom.spec.whatwg.org/#abortsignal-signal-abort">https://dom.spec.whatwg.org/#abortsignal-signal-abort</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-abortsignal-signal-abort">6.6. Guard against potential recursion</a> <a href="#ref-for-abortsignal-signal-abortâ ">(2)</a> <a href="#ref-for-abortsignal-signal-abortâ¡">(3)</a> <a href="#ref-for-abortsignal-signal-abortâ¢">(4)</a> <a href="#ref-for-abortsignal-signal-abortâ£">(5)</a> <a href="#ref-for-abortsignal-signal-abortâ¤">(6)</a> <a href="#ref-for-abortsignal-signal-abortâ¥">(7)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-event-target">
   <a href="https://dom.spec.whatwg.org/#dom-event-target">https://dom.spec.whatwg.org/#dom-event-target</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-event-target">6.7. State and Event subclasses</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-body">
   <a href="https://fetch.spec.whatwg.org/#body">https://fetch.spec.whatwg.org/#body</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-body">11.1. Use common words</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-body-json">
   <a href="https://fetch.spec.whatwg.org/#dom-body-json">https://fetch.spec.whatwg.org/#dom-body-json</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-body-json">11.1. Use common words</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-domhighrestimestamp">
   <a href="https://www.w3.org/TR/hr-time-2/#dom-domhighrestimestamp">https://www.w3.org/TR/hr-time-2/#dom-domhighrestimestamp</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-domhighrestimestamp">7.4. Use the appropriate type to represent times and dates</a> <a href="#ref-for-dom-domhighrestimestampâ ">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-eventhandler">
   <a href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-eventhandler">6.4. Always add event handler attributes</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-globaleventhandlers">
   <a href="https://html.spec.whatwg.org/multipage/webappapis.html#globaleventhandlers">https://html.spec.whatwg.org/multipage/webappapis.html#globaleventhandlers</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-globaleventhandlers">6.4. Always add event handler attributes</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-htmlconstructor">
   <a href="https://html.spec.whatwg.org/multipage/dom.html#htmlconstructor">https://html.spec.whatwg.org/multipage/dom.html#htmlconstructor</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-htmlconstructor">5.5. Classes should have constructors when possible</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-htmlhtmlelement">
   <a href="https://html.spec.whatwg.org/multipage/semantics.html#htmlhtmlelement">https://html.spec.whatwg.org/multipage/semantics.html#htmlhtmlelement</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-htmlhtmlelement">Use casing rules consistent with existing APIs</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-htmlimageelement">
   <a href="https://html.spec.whatwg.org/multipage/embedded-content.html#htmlimageelement">https://html.spec.whatwg.org/multipage/embedded-content.html#htmlimageelement</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-htmlimageelement">Use casing rules consistent with existing APIs</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-history-3">
   <a href="https://html.spec.whatwg.org/multipage/history.html#history-3">https://html.spec.whatwg.org/multipage/history.html#history-3</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-history-3">5.5. Classes should have constructors when possible</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-imagebitmap">
   <a href="https://html.spec.whatwg.org/multipage/imagebitmap-and-animations.html#imagebitmap">https://html.spec.whatwg.org/multipage/imagebitmap-and-animations.html#imagebitmap</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-imagebitmap">5.5. Classes should have constructors when possible</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-navigator">
   <a href="https://html.spec.whatwg.org/multipage/system-state.html#navigator">https://html.spec.whatwg.org/multipage/system-state.html#navigator</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-navigator">5.5. Classes should have constructors when possible</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-window">
   <a href="https://html.spec.whatwg.org/multipage/window-object.html#window">https://html.spec.whatwg.org/multipage/window-object.html#window</a><b>Referenced in:</b>
   <ul>
    <li><a href="#termref-for-">2.6. Consider how your API should behave in private browsing mode</a>
    <li><a href="#ref-for-window">5.5. Classes should have constructors when possible</a>
    <li><a href="#ref-for-windowâ ">6.4. Always add event handler attributes</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-windoweventhandlers">
   <a href="https://html.spec.whatwg.org/multipage/webappapis.html#windoweventhandlers">https://html.spec.whatwg.org/multipage/webappapis.html#windoweventhandlers</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-windoweventhandlers">6.4. Always add event handler attributes</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-createimagebitmap">
   <a href="https://html.spec.whatwg.org/multipage/imagebitmap-and-animations.html#dom-createimagebitmap">https://html.spec.whatwg.org/multipage/imagebitmap-and-animations.html#dom-createimagebitmap</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-createimagebitmap">5.5. Classes should have constructors when possible</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-custom-element">
   <a href="https://html.spec.whatwg.org/multipage/custom-elements.html#custom-element">https://html.spec.whatwg.org/multipage/custom-elements.html#custom-element</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-custom-element">5.5. Classes should have constructors when possible</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-customized-built-in-element">
   <a href="https://html.spec.whatwg.org/multipage/custom-elements.html#customized-built-in-element">https://html.spec.whatwg.org/multipage/custom-elements.html#customized-built-in-element</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-customized-built-in-element">5.5. Classes should have constructors when possible</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-customelementregistry-define">
   <a href="https://html.spec.whatwg.org/multipage/custom-elements.html#dom-customelementregistry-define">https://html.spec.whatwg.org/multipage/custom-elements.html#dom-customelementregistry-define</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-customelementregistry-define">4.1. Web APIs are for JavaScript</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-event-handler-idl-attributes">
   <a href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes">https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-idl-attributes</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-event-handler-idl-attributes">6.4. Always add event handler attributes</a> <a href="#ref-for-event-handler-idl-attributesâ ">(2)</a> <a href="#ref-for-event-handler-idl-attributesâ¡">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-event-loop">
   <a href="https://html.spec.whatwg.org/multipage/webappapis.html#event-loop">https://html.spec.whatwg.org/multipage/webappapis.html#event-loop</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-event-loop">4.2. Preserve run-to-completion semantics</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-attr-hyperlink-href">
   <a href="https://html.spec.whatwg.org/multipage/links.html#attr-hyperlink-href">https://html.spec.whatwg.org/multipage/links.html#attr-hyperlink-href</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-attr-hyperlink-href">7.2. Represent strings appropriately</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-the-img-element">
   <a href="https://html.spec.whatwg.org/multipage/embedded-content.html#the-img-element">https://html.spec.whatwg.org/multipage/embedded-content.html#the-img-element</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-the-img-element">Use casing rules consistent with existing APIs</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-img-ismap">
   <a href="https://html.spec.whatwg.org/multipage/embedded-content.html#dom-img-ismap">https://html.spec.whatwg.org/multipage/embedded-content.html#dom-img-ismap</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-img-ismap">Use casing rules consistent with existing APIs</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-attr-img-ismap">
   <a href="https://html.spec.whatwg.org/multipage/embedded-content.html#attr-img-ismap">https://html.spec.whatwg.org/multipage/embedded-content.html#attr-img-ismap</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-attr-img-ismap">Use casing rules consistent with existing APIs</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-open">
   <a href="https://html.spec.whatwg.org/multipage/window-object.html#dom-open">https://html.spec.whatwg.org/multipage/window-object.html#dom-open</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-open">5.5. Classes should have constructors when possible</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-queue-a-task">
   <a href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-queue-a-task">4.2. Preserve run-to-completion semantics</a>
    <li><a href="#ref-for-queue-a-taskâ ">6.6. Guard against potential recursion</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-reflect">
   <a href="https://html.spec.whatwg.org/multipage/common-dom-interfaces.html#reflect">https://html.spec.whatwg.org/multipage/common-dom-interfaces.html#reflect</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-reflect">7.2. Represent strings appropriately</a>
    <li><a href="#ref-for-reflectâ ">Use casing rules consistent with existing APIs</a> <a href="#ref-for-reflectâ¡">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-task-queue">
   <a href="https://html.spec.whatwg.org/multipage/webappapis.html#task-queue">https://html.spec.whatwg.org/multipage/webappapis.html#task-queue</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-task-queue">6.6. Guard against potential recursion</a> <a href="#ref-for-task-queueâ ">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-idbdatabase">
   <a href="https://w3c.github.io/IndexedDB/#idbdatabase">https://w3c.github.io/IndexedDB/#idbdatabase</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-idbdatabase">6.8. How to decide between Events and Observers</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-ascii-code-point">
   <a href="https://infra.spec.whatwg.org/#ascii-code-point">https://infra.spec.whatwg.org/#ascii-code-point</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-ascii-code-point">11.2. Use ASCII names</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-code-unit">
   <a href="https://infra.spec.whatwg.org/#code-unit">https://infra.spec.whatwg.org/#code-unit</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-code-unit">7.2. Represent strings appropriately</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-implementation-defined">
   <a href="https://infra.spec.whatwg.org/#implementation-defined">https://infra.spec.whatwg.org/#implementation-defined</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-implementation-defined">8.2. Use care when exposing APIs for selecting or enumerating devices</a>
    <li><a href="#ref-for-implementation-definedâ ">10.2. Specify completely and avoid ambiguity</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-scalar-value">
   <a href="https://infra.spec.whatwg.org/#scalar-value">https://infra.spec.whatwg.org/#scalar-value</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-scalar-value">7.2. Represent strings appropriately</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-scalar-value-string">
   <a href="https://infra.spec.whatwg.org/#scalar-value-string">https://infra.spec.whatwg.org/#scalar-value-string</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-scalar-value-string">7.2. Represent strings appropriately</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-string">
   <a href="https://infra.spec.whatwg.org/#string">https://infra.spec.whatwg.org/#string</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-string">7.2. Represent strings appropriately</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-surrogate">
   <a href="https://infra.spec.whatwg.org/#surrogate">https://infra.spec.whatwg.org/#surrogate</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-surrogate">7.2. Represent strings appropriately</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-valdef-custom-media-false">
   <a href="https://drafts.csswg.org/mediaqueries-5/#valdef-custom-media-false">https://drafts.csswg.org/mediaqueries-5/#valdef-custom-media-false</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-valdef-custom-media-false">3.4. Naming of CSS properties and values</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-valdef-custom-media-true">
   <a href="https://drafts.csswg.org/mediaqueries-5/#valdef-custom-media-true">https://drafts.csswg.org/mediaqueries-5/#valdef-custom-media-true</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-valdef-custom-media-true">3.4. Naming of CSS properties and values</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-paymentrequest">
   <a href="https://www.w3.org/TR/payment-request/#dom-paymentrequest">https://www.w3.org/TR/payment-request/#dom-paymentrequest</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-paymentrequest">6.6. Guard against potential recursion</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dfn-state">
   <a href="https://www.w3.org/TR/payment-request/#dfn-state">https://www.w3.org/TR/payment-request/#dfn-state</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dfn-state">6.6. Guard against potential recursion</a> <a href="#ref-for-dfn-stateâ ">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-merchantvalidationevent-complete">
   <a href="https://www.w3.org/TR/payment-request/#dom-merchantvalidationevent-complete">https://www.w3.org/TR/payment-request/#dom-merchantvalidationevent-complete</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-merchantvalidationevent-complete">6.6. Guard against potential recursion</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-remoteplayback-interface">
   <a href="https://w3c.github.io/remote-playback/#remoteplayback-interface">https://w3c.github.io/remote-playback/#remoteplayback-interface</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-remoteplayback-interface">8.2. Use care when exposing APIs for selecting or enumerating devices</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dfn-remote-playback-devices">
   <a href="https://w3c.github.io/remote-playback/#dfn-remote-playback-devices">https://w3c.github.io/remote-playback/#dfn-remote-playback-devices</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dfn-remote-playback-devices">8.2. Use care when exposing APIs for selecting or enumerating devices</a> <a href="#ref-for-dfn-remote-playback-devicesâ ">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-selector-combinator">
   <a href="https://drafts.csswg.org/selectors-4/#selector-combinator">https://drafts.csswg.org/selectors-4/#selector-combinator</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-selector-combinator">10.2.1. Defining algorithms in specifications</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-keyboardevent">
   <a href="https://www.w3.org/TR/uievents/#keyboardevent">https://www.w3.org/TR/uievents/#keyboardevent</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-keyboardevent">11.4. Future-proofing</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-mouseevent">
   <a href="https://www.w3.org/TR/uievents/#mouseevent">https://www.w3.org/TR/uievents/#mouseevent</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-mouseevent">5.5. Classes should have constructors when possible</a> <a href="#ref-for-mouseeventâ ">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-urlsearchparams">
   <a href="https://url.spec.whatwg.org/#urlsearchparams">https://url.spec.whatwg.org/#urlsearchparams</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-urlsearchparams">5.2. Consider whether objects should be live or static</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-percent-encode">
   <a href="https://url.spec.whatwg.org/#percent-encode">https://url.spec.whatwg.org/#percent-encode</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-percent-encode">7.2. Represent strings appropriately</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-url">
   <a href="https://url.spec.whatwg.org/#concept-url">https://url.spec.whatwg.org/#concept-url</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-url">7.2. Represent strings appropriately</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-idl-ByteString">
   <a href="https://heycam.github.io/webidl/#idl-ByteString">https://heycam.github.io/webidl/#idl-ByteString</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-idl-ByteString">7.2. Represent strings appropriately</a> <a href="#ref-for-idl-ByteStringâ ">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-idl-DOMException">
   <a href="https://heycam.github.io/webidl/#idl-DOMException">https://heycam.github.io/webidl/#idl-DOMException</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-idl-DOMException">7.5. Use Error or DOMException for errors</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-idl-DOMString">
   <a href="https://heycam.github.io/webidl/#idl-DOMString">https://heycam.github.io/webidl/#idl-DOMString</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-idl-DOMString">7.2. Represent strings appropriately</a> <a href="#ref-for-idl-DOMStringâ ">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-DOMTimeStamp">
   <a href="https://heycam.github.io/webidl/#DOMTimeStamp">https://heycam.github.io/webidl/#DOMTimeStamp</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-DOMTimeStamp">7.4. Use the appropriate type to represent times and dates</a> <a href="#ref-for-DOMTimeStampâ ">(2)</a> <a href="#ref-for-DOMTimeStampâ¡">(3)</a> <a href="#ref-for-DOMTimeStampâ¢">(4)</a> <a href="#ref-for-DOMTimeStampâ£">(5)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-idl-promise">
   <a href="https://heycam.github.io/webidl/#idl-promise">https://heycam.github.io/webidl/#idl-promise</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-idl-promise">6.6. Guard against potential recursion</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-exceptiondef-typeerror">
   <a href="https://heycam.github.io/webidl/#exceptiondef-typeerror">https://heycam.github.io/webidl/#exceptiondef-typeerror</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-exceptiondef-typeerror">5.5. Classes should have constructors when possible</a> <a href="#ref-for-exceptiondef-typeerrorâ ">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-idl-USVString">
   <a href="https://heycam.github.io/webidl/#idl-USVString">https://heycam.github.io/webidl/#idl-USVString</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-idl-USVString">7.2. Represent strings appropriately</a> <a href="#ref-for-idl-USVStringâ ">(2)</a> <a href="#ref-for-idl-USVStringâ¡">(3)</a> <a href="#ref-for-idl-USVStringâ¢">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-idl-Uint8Array">
   <a href="https://heycam.github.io/webidl/#idl-Uint8Array">https://heycam.github.io/webidl/#idl-Uint8Array</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-idl-Uint8Array">7.2. Represent strings appropriately</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-idl-byte">
   <a href="https://heycam.github.io/webidl/#idl-byte">https://heycam.github.io/webidl/#idl-byte</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-idl-byte">7.2. Represent strings appropriately</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-idl-constructors">
   <a href="https://heycam.github.io/webidl/#idl-constructors">https://heycam.github.io/webidl/#idl-constructors</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-idl-constructors">5.5. Classes should have constructors when possible</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dfn-maplike">
   <a href="https://heycam.github.io/webidl/#dfn-maplike">https://heycam.github.io/webidl/#dfn-maplike</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dfn-maplike">5.2. Consider whether objects should be live or static</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dfn-namespace">
   <a href="https://heycam.github.io/webidl/#dfn-namespace">https://heycam.github.io/webidl/#dfn-namespace</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dfn-namespace">5.5. Classes should have constructors when possible</a> <a href="#ref-for-dfn-namespaceâ ">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-sequence-type">
   <a href="https://heycam.github.io/webidl/#sequence-type">https://heycam.github.io/webidl/#sequence-type</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-sequence-type">7.2. Represent strings appropriately</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dfn-setlike">
   <a href="https://heycam.github.io/webidl/#dfn-setlike">https://heycam.github.io/webidl/#dfn-setlike</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dfn-setlike">5.2. Consider whether objects should be live or static</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-progressevent">
   <a href="https://xhr.spec.whatwg.org/#progressevent">https://xhr.spec.whatwg.org/#progressevent</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-progressevent">6.6. Guard against potential recursion</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-xmlhttprequest">
   <a href="https://xhr.spec.whatwg.org/#xmlhttprequest">https://xhr.spec.whatwg.org/#xmlhttprequest</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-xmlhttprequest">Use casing rules consistent with existing APIs</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-xmlhttprequesteventtarget">
   <a href="https://xhr.spec.whatwg.org/#xmlhttprequesteventtarget">https://xhr.spec.whatwg.org/#xmlhttprequesteventtarget</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-xmlhttprequesteventtarget">6.8. How to decide between Events and Observers</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-progressevent-loaded">
   <a href="https://xhr.spec.whatwg.org/#dom-progressevent-loaded">https://xhr.spec.whatwg.org/#dom-progressevent-loaded</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-progressevent-loaded">6.6. Guard against potential recursion</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-progressevent-total">
   <a href="https://xhr.spec.whatwg.org/#dom-progressevent-total">https://xhr.spec.whatwg.org/#dom-progressevent-total</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-progressevent-total">6.6. Guard against potential recursion</a>
   </ul>
  </aside>
  <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="index">
   <li>
    <a data-link-type="biblio">[css-backgrounds-3]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-propdef-background-image" style="color:initial">background-image</span>
    </ul>
   <li>
    <a data-link-type="biblio">[css-cascade-5]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-actual-value" style="color:initial">actual value</span>
     <li><span class="dfn-paneled" id="term-for-computed-value" style="color:initial">computed value</span>
     <li><span class="dfn-paneled" id="term-for-inheritance" style="color:initial">inherit</span>
    </ul>
   <li>
    <a data-link-type="biblio">[css-conditional-3]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-at-ruledef-supports" style="color:initial">@supports</span>
    </ul>
   <li>
    <a data-link-type="biblio">[css-fonts-3]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-propdef-font-size" style="color:initial">font-size</span>
    </ul>
   <li>
    <a data-link-type="biblio">[css-inline-3]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-propdef-initial-letter" style="color:initial">initial-letter</span>
     <li><span class="dfn-paneled" id="term-for-propdef-initial-letter-align" style="color:initial">initial-letter-align</span>
     <li><span class="dfn-paneled" id="term-for-propdef-line-height" style="color:initial">line-height</span>
    </ul>
   <li>
    <a data-link-type="biblio">[css-values-3]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-length-value" style="color:initial">&lt;length></span>
     <li><span class="dfn-paneled" id="term-for-number-value" style="color:initial">&lt;number></span>
    </ul>
   <li>
    <a data-link-type="biblio">[css-values-4]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-lh" style="color:initial">lh</span>
    </ul>
   <li>
    <a data-link-type="biblio">[cssom-1]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-dom-window-getcomputedstyle" style="color:initial">getComputedStyle(elt)</span>
     <li><span class="dfn-paneled" id="term-for-resolved-value" style="color:initial">resolved value</span>
    </ul>
   <li>
    <a data-link-type="biblio">[DOM]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-abortcontroller" style="color:initial">AbortController</span>
     <li><span class="dfn-paneled" id="term-for-abortsignal" style="color:initial">AbortSignal</span>
     <li><span class="dfn-paneled" id="term-for-domtokenlist" style="color:initial">DOMTokenList</span>
     <li><span class="dfn-paneled" id="term-for-event" style="color:initial">Event</span>
     <li><span class="dfn-paneled" id="term-for-eventtarget" style="color:initial">EventTarget</span>
     <li><span class="dfn-paneled" id="term-for-htmlcollection" style="color:initial">HTMLCollection</span>
     <li><span class="dfn-paneled" id="term-for-mutationobserver" style="color:initial">MutationObserver</span>
     <li><span class="dfn-paneled" id="term-for-node" style="color:initial">Node</span>
     <li><span class="dfn-paneled" id="term-for-nodelist" style="color:initial">NodeList</span>
     <li><span class="dfn-paneled" id="term-for-dom-abortcontroller-abort" style="color:initial">abort()</span>
     <li><span class="dfn-paneled" id="term-for-abortsignal-aborted-flag" style="color:initial">aborted flag</span>
     <li><span class="dfn-paneled" id="term-for-abortsignal-add" style="color:initial">add</span>
     <li><span class="dfn-paneled" id="term-for-dom-eventtarget-addeventlistener" style="color:initial">addEventListener(type, callback)</span>
     <li><span class="dfn-paneled" id="term-for-concept-event-fire" style="color:initial">fire an event</span>
     <li><span class="dfn-paneled" id="term-for-dom-document-getelementsbytagname" style="color:initial">getElementsByTagName(qualifiedName)</span>
     <li><span class="dfn-paneled" id="term-for-dom-addeventlisteneroptions-once" style="color:initial">once</span>
     <li><span class="dfn-paneled" id="term-for-dom-parentnode-queryselectorall" style="color:initial">querySelectorAll(selectors)</span>
     <li><span class="dfn-paneled" id="term-for-abortsignal-remove" style="color:initial">remove</span>
     <li><span class="dfn-paneled" id="term-for-abortsignal-signal-abort" style="color:initial">signal abort</span>
     <li><span class="dfn-paneled" id="term-for-dom-event-target" style="color:initial">target</span>
    </ul>
   <li>
    <a data-link-type="biblio">[FETCH]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-body" style="color:initial">Body</span>
     <li><span class="dfn-paneled" id="term-for-dom-body-json" style="color:initial">json()</span>
    </ul>
   <li>
    <a data-link-type="biblio">[HIGHRES-TIME]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-dom-domhighrestimestamp" style="color:initial">DOMHighResTimeStamp</span>
    </ul>
   <li>
    <a data-link-type="biblio">[HTML]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-eventhandler" style="color:initial">EventHandler</span>
     <li><span class="dfn-paneled" id="term-for-globaleventhandlers" style="color:initial">GlobalEventHandlers</span>
     <li><span class="dfn-paneled" id="term-for-htmlconstructor" style="color:initial">HTMLConstructor</span>
     <li><span class="dfn-paneled" id="term-for-htmlhtmlelement" style="color:initial">HTMLHtmlElement</span>
     <li><span class="dfn-paneled" id="term-for-htmlimageelement" style="color:initial">HTMLImageElement</span>
     <li><span class="dfn-paneled" id="term-for-history-3" style="color:initial">History</span>
     <li><span class="dfn-paneled" id="term-for-imagebitmap" style="color:initial">ImageBitmap</span>
     <li><span class="dfn-paneled" id="term-for-navigator" style="color:initial">Navigator</span>
     <li><span class="dfn-paneled" id="term-for-window" style="color:initial">Window</span>
     <li><span class="dfn-paneled" id="term-for-windoweventhandlers" style="color:initial">WindowEventHandlers</span>
     <li><span class="dfn-paneled" id="term-for-dom-createimagebitmap" style="color:initial">createImageBitmap(image)</span>
     <li><span class="dfn-paneled" id="term-for-custom-element" style="color:initial">custom element</span>
     <li><span class="dfn-paneled" id="term-for-customized-built-in-element" style="color:initial">customized built-in element</span>
     <li><span class="dfn-paneled" id="term-for-dom-customelementregistry-define" style="color:initial">define(name, constructor)</span>
     <li><span class="dfn-paneled" id="term-for-event-handler-idl-attributes" style="color:initial">event handler idl attribute</span>
     <li><span class="dfn-paneled" id="term-for-event-loop" style="color:initial">event loop</span>
     <li><span class="dfn-paneled" id="term-for-attr-hyperlink-href" style="color:initial">href</span>
     <li><span class="dfn-paneled" id="term-for-the-img-element" style="color:initial">img</span>
     <li><span class="dfn-paneled" id="term-for-dom-img-ismap" style="color:initial">isMap</span>
     <li><span class="dfn-paneled" id="term-for-attr-img-ismap" style="color:initial">ismap</span>
     <li><span class="dfn-paneled" id="term-for-dom-open" style="color:initial">open(url, target, features)</span>
     <li><span class="dfn-paneled" id="term-for-queue-a-task" style="color:initial">queue a task</span>
     <li><span class="dfn-paneled" id="term-for-reflect" style="color:initial">reflect</span>
     <li><span class="dfn-paneled" id="term-for-task-queue" style="color:initial">task queues</span>
    </ul>
   <li>
    <a data-link-type="biblio">[IndexedDB-2]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-idbdatabase" style="color:initial">IDBDatabase</span>
    </ul>
   <li>
    <a data-link-type="biblio">[INFRA]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-ascii-code-point" style="color:initial">ascii code point</span>
     <li><span class="dfn-paneled" id="term-for-code-unit" style="color:initial">code unit</span>
     <li><span class="dfn-paneled" id="term-for-implementation-defined" style="color:initial">implementation-defined</span>
     <li><span class="dfn-paneled" id="term-for-scalar-value" style="color:initial">scalar value</span>
     <li><span class="dfn-paneled" id="term-for-scalar-value-string" style="color:initial">scalar value string</span>
     <li><span class="dfn-paneled" id="term-for-string" style="color:initial">string</span>
     <li><span class="dfn-paneled" id="term-for-surrogate" style="color:initial">surrogate</span>
    </ul>
   <li>
    <a data-link-type="biblio">[mediaqueries-5]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-valdef-custom-media-false" style="color:initial">false</span>
     <li><span class="dfn-paneled" id="term-for-valdef-custom-media-true" style="color:initial">true</span>
    </ul>
   <li>
    <a data-link-type="biblio">[payment-request]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-dom-paymentrequest" style="color:initial">PaymentRequest</span>
     <li><span class="dfn-paneled" id="term-for-dfn-state" style="color:initial">[[state]]</span>
     <li><span class="dfn-paneled" id="term-for-dom-merchantvalidationevent-complete" style="color:initial">complete()</span>
    </ul>
   <li>
    <a data-link-type="biblio">[REMOTE-PLAYBACK]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-remoteplayback-interface" style="color:initial">RemotePlayback</span>
     <li><span class="dfn-paneled" id="term-for-dfn-remote-playback-devices" style="color:initial">remote playback device</span>
    </ul>
   <li>
    <a data-link-type="biblio">[selectors-4]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-selector-combinator" style="color:initial">combinator</span>
    </ul>
   <li>
    <a data-link-type="biblio">[UIEVENTS]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-keyboardevent" style="color:initial">KeyboardEvent</span>
     <li><span class="dfn-paneled" id="term-for-mouseevent" style="color:initial">MouseEvent</span>
    </ul>
   <li>
    <a data-link-type="biblio">[URL]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-urlsearchparams" style="color:initial">URLSearchParams</span>
     <li><span class="dfn-paneled" id="term-for-percent-encode" style="color:initial">percent-encode</span>
     <li><span class="dfn-paneled" id="term-for-concept-url" style="color:initial">url</span>
    </ul>
   <li>
    <a data-link-type="biblio">[WEBIDL]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-idl-ByteString" style="color:initial">ByteString</span>
     <li><span class="dfn-paneled" id="term-for-idl-DOMException" style="color:initial">DOMException</span>
     <li><span class="dfn-paneled" id="term-for-idl-DOMString" style="color:initial">DOMString</span>
     <li><span class="dfn-paneled" id="term-for-DOMTimeStamp" style="color:initial">DOMTimeStamp</span>
     <li><span class="dfn-paneled" id="term-for-idl-promise" style="color:initial">Promise</span>
     <li><span class="dfn-paneled" id="term-for-exceptiondef-typeerror" style="color:initial">TypeError</span>
     <li><span class="dfn-paneled" id="term-for-idl-USVString" style="color:initial">USVString</span>
     <li><span class="dfn-paneled" id="term-for-idl-Uint8Array" style="color:initial">Uint8Array</span>
     <li><span class="dfn-paneled" id="term-for-idl-byte" style="color:initial">byte</span>
     <li><span class="dfn-paneled" id="term-for-idl-constructors" style="color:initial">constructor operations</span>
     <li><span class="dfn-paneled" id="term-for-dfn-maplike" style="color:initial">maplike</span>
     <li><span class="dfn-paneled" id="term-for-dfn-namespace" style="color:initial">namespace</span>
     <li><span class="dfn-paneled" id="term-for-sequence-type" style="color:initial">sequence type</span>
     <li><span class="dfn-paneled" id="term-for-dfn-setlike" style="color:initial">setlike</span>
    </ul>
   <li>
    <a data-link-type="biblio">[XHR]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-progressevent" style="color:initial">ProgressEvent</span>
     <li><span class="dfn-paneled" id="term-for-xmlhttprequest" style="color:initial">XMLHttpRequest</span>
     <li><span class="dfn-paneled" id="term-for-xmlhttprequesteventtarget" style="color:initial">XMLHttpRequestEventTarget</span>
     <li><span class="dfn-paneled" id="term-for-dom-progressevent-loaded" style="color:initial">loaded</span>
     <li><span class="dfn-paneled" id="term-for-dom-progressevent-total" style="color:initial">total</span>
    </ul>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-css-cascade-5">[CSS-CASCADE-5]
   <dd>CSS Cascading and Inheritance Level 5 URL: <a href="https://drafts.csswg.org/css-cascade-5/">https://drafts.csswg.org/css-cascade-5/</a>
   <dt id="biblio-css-conditional-3">[CSS-CONDITIONAL-3]
   <dd>CSS Conditional Rules Module Level 3 URL: <a href="https://drafts.csswg.org/css-conditional-3/">https://drafts.csswg.org/css-conditional-3/</a>
   <dt id="biblio-css-inline-3">[CSS-INLINE-3]
   <dd>Dave Cramer; Elika Etemad; Steve Zilles. <a href="https://drafts.csswg.org/css-inline-3/">CSS Inline Layout Module Level 3</a>. URL: <a href="https://drafts.csswg.org/css-inline-3/">https://drafts.csswg.org/css-inline-3/</a>
   <dt id="biblio-css-values-4">[CSS-VALUES-4]
   <dd>Tab Atkins Jr.; Elika Etemad. <a href="https://drafts.csswg.org/css-values-4/">CSS Values and Units Module Level 4</a>. URL: <a href="https://drafts.csswg.org/css-values-4/">https://drafts.csswg.org/css-values-4/</a>
   <dt id="biblio-cssom-1">[CSSOM-1]
   <dd>Simon Pieters; Glenn Adams. <a href="https://drafts.csswg.org/cssom/">CSS Object Model (CSSOM)</a>. URL: <a href="https://drafts.csswg.org/cssom/">https://drafts.csswg.org/cssom/</a>
   <dt id="biblio-dom">[DOM]
   <dd>Anne van Kesteren. <a href="https://dom.spec.whatwg.org/">DOM Standard</a>. Living Standard. URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
   <dt id="biblio-ecmascript">[ECMASCRIPT]
   <dd><a href="https://tc39.es/ecma262/">ECMAScript Language Specification</a>. URL: <a href="https://tc39.es/ecma262/">https://tc39.es/ecma262/</a>
   <dt id="biblio-highres-time">[HIGHRES-TIME]
   <dd>Ilya Grigorik. <a href="https://w3c.github.io/hr-time/">High Resolution Time Level 2</a>. URL: <a href="https://w3c.github.io/hr-time/">https://w3c.github.io/hr-time/</a>
   <dt id="biblio-html">[HTML]
   <dd>Anne van Kesteren; et al. <a href="https://html.spec.whatwg.org/multipage/">HTML Standard</a>. Living Standard. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
   <dt id="biblio-indexeddb-2">[IndexedDB-2]
   <dd>Ali Alabbas; Joshua Bell. <a href="https://w3c.github.io/IndexedDB/">Indexed Database API 2.0</a>. URL: <a href="https://w3c.github.io/IndexedDB/">https://w3c.github.io/IndexedDB/</a>
   <dt id="biblio-infra">[INFRA]
   <dd>Anne van Kesteren; Domenic Denicola. <a href="https://infra.spec.whatwg.org/">Infra Standard</a>. Living Standard. URL: <a href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
   <dt id="biblio-mediaqueries-5">[MEDIAQUERIES-5]
   <dd>Dean Jackson; Florian Rivoal; Tab Atkins Jr.. <a href="https://drafts.csswg.org/mediaqueries-5/">Media Queries Level 5</a>. URL: <a href="https://drafts.csswg.org/mediaqueries-5/">https://drafts.csswg.org/mediaqueries-5/</a>
   <dt id="biblio-payment-request">[PAYMENT-REQUEST]
   <dd>Marcos Caceres; et al. <a href="https://w3c.github.io/payment-request/">Payment Request API</a>. URL: <a href="https://w3c.github.io/payment-request/">https://w3c.github.io/payment-request/</a>
   <dt id="biblio-rfc2119">[RFC2119]
   <dd>S. Bradner. <a href="https://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>. March 1997. Best Current Practice. URL: <a href="https://tools.ietf.org/html/rfc2119">https://tools.ietf.org/html/rfc2119</a>
   <dt id="biblio-selectors-4">[SELECTORS-4]
   <dd>Elika Etemad; Tab Atkins Jr.. <a href="https://drafts.csswg.org/selectors/">Selectors Level 4</a>. URL: <a href="https://drafts.csswg.org/selectors/">https://drafts.csswg.org/selectors/</a>
   <dt id="biblio-url">[URL]
   <dd>Anne van Kesteren. <a href="https://url.spec.whatwg.org/">URL Standard</a>. Living Standard. URL: <a href="https://url.spec.whatwg.org/">https://url.spec.whatwg.org/</a>
   <dt id="biblio-webidl">[WEBIDL]
   <dd>Boris Zbarsky. <a href="https://heycam.github.io/webidl/">Web IDL</a>. URL: <a href="https://heycam.github.io/webidl/">https://heycam.github.io/webidl/</a>
   <dt id="biblio-xhr">[XHR]
   <dd>Anne van Kesteren. <a href="https://xhr.spec.whatwg.org/">XMLHttpRequest Standard</a>. Living Standard. URL: <a href="https://xhr.spec.whatwg.org/">https://xhr.spec.whatwg.org/</a>
  </dl>
  <h3 class="no-num no-ref heading settled" id="informative"><span class="content">Informative References</span><a class="self-link" href="#informative"></a></h3>
  <dl>
   <dt id="biblio-css-backgrounds-3">[CSS-BACKGROUNDS-3]
   <dd>Bert Bos; Elika Etemad; Brad Kemper. <a href="https://drafts.csswg.org/css-backgrounds/">CSS Backgrounds and Borders Module Level 3</a>. URL: <a href="https://drafts.csswg.org/css-backgrounds/">https://drafts.csswg.org/css-backgrounds/</a>
   <dt id="biblio-css-fonts-3">[CSS-FONTS-3]
   <dd>John Daggett; Myles Maxfield; Chris Lilley. <a href="https://drafts.csswg.org/css-fonts/">CSS Fonts Module Level 3</a>. URL: <a href="https://drafts.csswg.org/css-fonts/">https://drafts.csswg.org/css-fonts/</a>
   <dt id="biblio-css-values-3">[CSS-VALUES-3]
   <dd>Tab Atkins Jr.; Elika Etemad. <a href="https://drafts.csswg.org/css-values-3/">CSS Values and Units Module Level 3</a>. URL: <a href="https://drafts.csswg.org/css-values-3/">https://drafts.csswg.org/css-values-3/</a>
   <dt id="biblio-fetch">[FETCH]
   <dd>Anne van Kesteren. <a href="https://fetch.spec.whatwg.org/">Fetch Standard</a>. Living Standard. URL: <a href="https://fetch.spec.whatwg.org/">https://fetch.spec.whatwg.org/</a>
   <dt id="biblio-fingerprinting-guidance">[FINGERPRINTING-GUIDANCE]
   <dd>Nick Doty. <a href="https://www.w3.org/TR/fingerprinting-guidance/">Mitigating Browser Fingerprinting in Web Specifications</a>. 28 March 2019. NOTE. URL: <a href="https://www.w3.org/TR/fingerprinting-guidance/">https://www.w3.org/TR/fingerprinting-guidance/</a>
   <dt id="biblio-least-power">[LEAST-POWER]
   <dd>Tim Berners-Lee; Noah Mendelsohn. <a href="https://www.w3.org/2001/tag/doc/leastPower">The Rule of Least Power</a>. 23 February 2006. TAG Finding. URL: <a href="https://www.w3.org/2001/tag/doc/leastPower">https://www.w3.org/2001/tag/doc/leastPower</a>
   <dt id="biblio-remote-playback">[REMOTE-PLAYBACK]
   <dd>Mounir Lamouri; Anton Vayvod. <a href="https://w3c.github.io/remote-playback/">Remote Playback API</a>. URL: <a href="https://w3c.github.io/remote-playback/">https://w3c.github.io/remote-playback/</a>
   <dt id="biblio-rfc8890">[RFC8890]
   <dd>M. Nottingham. <a href="https://tools.ietf.org/html/rfc8890">The Internet is for End Users</a>. August 2020. Informational. URL: <a href="https://tools.ietf.org/html/rfc8890">https://tools.ietf.org/html/rfc8890</a>
   <dt id="biblio-uievents">[UIEVENTS]
   <dd>Gary Kacmarcik; Travis Leithead; Doug Schepers. <a href="https://w3c.github.io/uievents/">UI Events</a>. URL: <a href="https://w3c.github.io/uievents/">https://w3c.github.io/uievents/</a>
   <dt id="biblio-unsanctioned-tracking">[UNSANCTIONED-TRACKING]
   <dd>Mark Nottingham. <a href="http://www.w3.org/2001/tag/doc/unsanctioned-tracking/">Unsanctioned Web Tracking</a>. 17 July 2015. TAG Finding. URL: <a href="http://www.w3.org/2001/tag/doc/unsanctioned-tracking/">http://www.w3.org/2001/tag/doc/unsanctioned-tracking/</a>
  </dl>
  <h2 class="no-num no-ref heading settled" id="issues-index"><span class="content">Issues Index</span><a class="self-link" href="#issues-index"></a></h2>
  <div style="counter-reset:issue">
   <div class="issue"> Privacy Threat Model is not ready for prime time.<a href="#issue-70c97a29"> âµ </a></div>
   <div class="issue"> when we write up a principle on monkey patching,
be sure to take this nuance into account. <a href="https://github.com/w3ctag/design-principles/issues/184">&lt;https://github.com/w3ctag/design-principles/issues/184></a><a href="#issue-05c58ddf"> âµ </a></div>
  </div>
<script>/* script-dfn-panel */

document.body.addEventListener("click", function(e) {
    var queryAll = function(sel) { return [].slice.call(document.querySelectorAll(sel)); }
    // Find the dfn element or panel, if any, that was clicked on.
    var el = e.target;
    var target;
    var hitALink = false;
    while(el.parentElement) {
        if(el.tagName == "A") {
            // Clicking on a link in a <dfn> shouldn't summon the panel
            hitALink = true;
        }
        if(el.classList.contains("dfn-paneled")) {
            target = "dfn";
            break;
        }
        if(el.classList.contains("dfn-panel")) {
            target = "dfn-panel";
            break;
        }
        el = el.parentElement;
    }
    if(target != "dfn-panel") {
        // Turn off any currently "on" or "activated" panels.
        queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(function(el){
            el.classList.remove("on");
            el.classList.remove("activated");
        });
    }
    if(target == "dfn" && !hitALink) {
        // open the panel
        var dfnPanel = document.querySelector(".dfn-panel[data-for='" + el.id + "']");
        if(dfnPanel) {
            dfnPanel.classList.add("on");
            var rect = el.getBoundingClientRect();
            dfnPanel.style.left = window.scrollX + rect.right + 5 + "px";
            dfnPanel.style.top = window.scrollY + rect.top + "px";
            var panelRect = dfnPanel.getBoundingClientRect();
            var panelWidth = panelRect.right - panelRect.left;
            if(panelRect.right > document.body.scrollWidth && (rect.left - (panelWidth + 5)) > 0) {
                // Reposition, because the panel is overflowing
                dfnPanel.style.left = window.scrollX + rect.left - (panelWidth + 5) + "px";
            }
        } else {
            console.log("Couldn't find .dfn-panel[data-for='" + el.id + "']");
        }
    } else if(target == "dfn-panel") {
        // Switch it to "activated" state, which pins it.
        el.classList.add("activated");
        el.style.left = null;
        el.style.top = null;
    }

});
</script>